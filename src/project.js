require=function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var r="function"==typeof require&&require;if(!s&&r)return r(o,!0);if(c)return c(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return a(n||e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var c="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({Alert:[function(e,t,n){"use strict";cc._RF.push(t,"c12553sxCxG/on0Bz7rkX0f","Alert"),cc.Class({extends:cc.Component,properties:{_alert:null,_btnOK:null,_btnCancel:null,_title:null,_content:null,_onok:null},onLoad:function(){if(null!=cc.vv){var e=new Date;console.log("加载 Alert.js time:"+e.getSeconds()+":"+e.getMilliseconds()),this._alert=cc.find("Canvas/alert"),cc.vv.alert=this,cc.sys.localStorage.getItem("SendError")&&(console.log("游戏出现异常错误，我们已收集该错误信息并尽快修复，感谢您的支持!"),cc.sys.localStorage.removeItem("SendError"))}},onBtnClicked:function(e){"btn_ok"==e.target.name&&this._onok&&this._onok(),this._alert.active=!1,this._onok=null},show:function(e,t,n,i){},onDestory:function(){cc.vv&&(cc.vv.alert=null)}}),cc._RF.pop()},{}],AnysdkMgr:[function(e,t,n){"use strict";cc._RF.push(t,"f58cea6lrpDZJSNs2BGBqxN","AnysdkMgr"),cc.Class({extends:cc.Component,properties:{_isCapturing:!1},onLoad:function(){},init:function(){this.ANDROID_BATTERY="com/yueyou/ssmj/GetBatteryTest",this.ANDROID_API="com/yueyou/ssmj/WXAPI",this.ANDROID_COPY="com/yueyou/ssmj/GetBatteryTest",this.IOS_API="AppController",this.appid="sd_100",this.paykey="B23235809C124C378124347408EE415F"},pay:function(e,t){console.log("pay:function(userId,cardNum)"),Util1.httpGet(url);var n="http://dchmj.yueyouxi.net/gamepay/weixinpay/pay?account="+e+"&quantity="+t;cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"pay","(Ljava/lang/String;)V",n):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.IOS_API,"jumpToBizPay:",n)},getroomid:function(){jsb.reflection.callStaticMethod(this.ANDROID_API,"getroomid","()V")},kfcopy:function(e){return cc.sys.os==cc.sys.OS_ANDROID?(jsb.reflection.callStaticMethod(this.ANDROID_COPY,"copytext","(Ljava/lang/String;)V",e),!0):cc.sys.os==cc.sys.OS_IOS&&(jsb.reflection.callStaticMethod(this.IOS_API,"copytext:",e),!0)},login:function(){cc.sys.os==cc.sys.OS_ANDROID?(console.log("刘鑫 进入安卓微信SDK"),jsb.reflection.callStaticMethod(this.ANDROID_API,"Login","()V")):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"login"):console.log("platform:"+cc.sys.os+" dosn't implement share.")},getBattery:function(){var e=-1;return cc.sys.os==cc.sys.OS_ANDROID?e=jsb.reflection.callStaticMethod(this.ANDROID_BATTERY,"getdianliang","(Ljava/lang/String;)F","diangliang"):cc.sys.os==cc.sys.OS_IOS&&(e=jsb.reflection.callStaticMethod("AppController","getBatteryQuantity")),e},getBatteryState:function(){var e=-1;return cc.sys.os==cc.sys.OS_ANDROID?e=jsb.reflection.callStaticMethod(this.ANDROID_BATTERY,"getStatus","(Ljava/lang/String;)I","status"):cc.sys.os==cc.sys.OS_IOS&&(e=jsb.reflection.callStaticMethod("AppController","getBatteryStauts")),e},share:function(e,t,n){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"Share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Z)V",cc.vv.http.SI.appweb,e,t,n):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"share:shareTitle:shareDesc:shareChoose:",cc.vv.http.SI.appweb,e,t,n):console.log("platform:"+cc.sys.os+" dosn't implement share.")},alishare:function(e,t,n){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.ANDROID_API,"aliShare","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Z)V",cc.vv.http.SI.appweb,e,t,n):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(this.IOS_API,"alishare:shareTitle:shareDesc:shareChoose:",cc.vv.http.SI.appweb,e,t,n):console.log("platform:"+cc.sys.os+" dosn't implement share.")},shareResult:function(){if(!this._isCapturing){this._isCapturing=!0;var e=cc.director.getWinSize(),t=(new Date,jsb.fileUtils.getWritablePath()+"result_share.jpg");jsb.fileUtils.isFileExist(t)&&jsb.fileUtils.removeFile(t);var n=new cc.RenderTexture(Math.floor(e.width),Math.floor(e.height));n.setPosition(cc.p(e.width/2,e.height/2)),n.begin(),cc.director.getRunningScene().visit(),n.end(),n.saveToFile("result_share.jpg",cc.IMAGE_FORMAT_JPG);var i=this,a=0;setTimeout(function n(){if(jsb.fileUtils.isFileExist(t)){var c=100/e.height,o=Math.floor(e.width*c);cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(i.ANDROID_API,"ShareIMG","(Ljava/lang/String;II)V",t,o,100):cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod(i.IOS_API,"shareIMG:width:height:",t,o,100):console.log("platform:"+cc.sys.os+" dosn't implement share."),i._isCapturing=!1}else{if(++a>10)return void console.log("time out...");setTimeout(n,50)}},50)}},onLoginResp:function(e){console.log("send http wechat_auth"),console.log("打印端口---123123:"+cc.vv.http.account_port),cc.vv.http.sendRequest(cc.vv.http.account_port,"/wechat_auth",{code:e,os:cc.sys.os},function(e){console.log("recieve http wechat_auth"),0==e.errcode&&(cc.log("set http wx_account,wx_sign begin"),cc.sys.localStorage.setItem("wx_account",e.account),cc.sys.localStorage.setItem("wx_sign",e.sign),cc.log("set http wx_account,wx_sign over")),cc.vv.userMgr.onAuth(e)})},onSetAddRoomId:function(e){if(console.log("onSetAddRoomId~~~~~~~~~~~~~~~"+e),cc.vv.userMgr.javaaddRoomId=e,0!=cc.vv.userMgr.javaaddRoomId){var t=cc.vv.userMgr.javaaddRoomId;cc.vv.userMgr.enterRoom(t,function(e){if(0==e.errcode)cc.vv.userMgr.javaaddRoomId=0;else if(2222==e.errcode){n="钻石不足，加入房间失败!";cc.vv.alert.show("",n)}else if(4==e.errcode||13001==e.errcode){n="房间["+t+"]已满!";cc.vv.alert.show("",n)}else if(1==e.errcode||2==e.errcode||3==e.errcode||500==e.errcode){var n="房间["+t+"]不存在，请重新输入!";cc.vv.alert.show("",n)}}.bind(this))}},onSetGPSPos:function(e){console.log("onSetGPSPos~~~~~~~~~~~~~~~"+e);var t=JSON.parse(e);cc.vv.GpsMgr.myjpos=t.posj,cc.vv.GpsMgr.mywpos=t.posw,console.log("myjpos~~~~~~~~~~~~~~~"+cc.vv.GpsMgr.myjpos),console.log("mywpos~~~~~~~~~~~~~~~"+cc.vv.GpsMgr.mywpos),cc.vv.GpsMgr.sendoneinfo()},setwxloginstatus:function(){jsb.reflection.callStaticMethod(this.ANDROID_API,"setwxloginstatus","()V")},getSystemUtil:function(){cc.sys.os==cc.sys.OS_ANDROID?(console.log("getSystemUtil~~~~~~~~~~~~~~~123456789"),jsb.reflection.callStaticMethod("com/yueyou/ssmj/SystemUtil","showSystemParameter","()V")):cc.sys.os==cc.sys.OS_IOS||console.log("platform:"+cc.sys.os+" dosn't implement share.")},setSystemUtil:function(e,t,n,i,a){console.log("setSystemUtil~~~~~~~~~~~~~~~123456789"),cc.vv.userMgr.deviceBrand=e,cc.vv.userMgr.systemModel=t,cc.vv.userMgr.systemVersion=n,cc.vv.userMgr.IMEI=i,cc.vv.userMgr.IMSI=a},getMainActivity:function(){cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/ssmj/MainActivity","onClick","()V"):(cc.sys.os,cc.sys.OS_IOS)},receiveMainActivity:function(){console.log("receiveMainActivity~~~~~~~123456~~~~111~~~~");var e="";cc.sys.os==cc.sys.OS_ANDROID?e=jsb.reflection.callStaticMethod("com/yueyou/ssmj/MainActivity","getImagePhoto","()Ljava/lang/String;"):(cc.sys.os,cc.sys.OS_IOS),console.log("receiveMainActivity~~~~~~~123456~~~~3333~~~~"+e.length),cc.vv.net.send("set_head",e)},HTTP_pay:function(e){var t="",n="";"001"==e?(t="金币X6万",n="￥6"):"002"==e?(t="金币X12万(赠送X3万)",n="￥12"):"003"==e?(t="金币X30万(赠送X15万)",n="￥30"):"004"==e?(t="金币X100万(赠送X80万)",n="￥98"):"005"==e?(t="金币X300万(赠送X400万)",n="￥298"):"006"==e?(t="金币X1000万(赠送X2000万)",n="￥1000",e="009"):"007"==e?(t="喇叭X50个",n="￥12"):"008"==e?(t="透视卡X50个",n="￥12"):"010"==e&&(t="金币X10万(赠送X10万)",n="￥10"),cc.sys.os==cc.sys.OS_ANDROID?(jsb.reflection.callStaticMethod("com/yueyou/ssmj/HttpPay","pay","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",this.appid,e,cc.vv.userMgr.userId+"",this.paykey,t,n),console.log("HTTP_pay~~~~~~~123456~~~~789~~~~"+cc.vv.userMgr.userId)):(cc.sys.os,cc.sys.OS_IOS)},dispatchKeyEvent:function(){"xlmjgame"==cc.director.getScene().name&&(cc.vv.chat._chatRoot.active?cc.vv.chat._chatRoot.active=!1:cc.vv.MJGame._Help.active?cc.vv.MJGame._Help.active=!1:cc.vv.MJGame._settlementInfo.active?cc.vv.MJGame._settlementInfo.active=!1:cc.vv.MJGame._discountRecharge.active?cc.vv.MJGame._discountRecharge.active=!1:cc.vv.game_over._gameover.active?(cc.vv.game_over._gameover.active=!1,cc.vv.game_over.onBtnGBgameover()):cc.vv.MJGame.display_return_hall())},dingdanyanzhen:function(e){var t="http://service.qxwf2.cn/service/pay/verification?orderno="+e,n=cc.loader.getXMLHttpRequest();n.timeout=3e3,n.open("GET",t,!0),cc.sys.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),n.onreadystatechange=function(){console.log("xhr.readyState:"+n.readyState),console.log("xhr.status:"+n.status);t=new Date;if(console.log("进入服务器回调 time:"+t.getSeconds()+":"+t.getMilliseconds()),4===n.readyState&&n.status>=200&&n.status<300){console.log("http res("+n.responseText.length+"):"+n.responseText);try{var e=JSON.parse(n.responseText),t=new Date;console.log("服务器回调成功 time:"+t.getSeconds()+":"+t.getMilliseconds());var i=cc.director.getScene().name;1e4==e.code?"hall"==i?cc.vv.hall.onSecuritySettingPrompt(e.msg):(i="xlmjgame")&&cc.vv.MJGame.onSecuritySettingPrompt(e.msg):2e4==e.code&&("hall"==i?cc.vv.hall.onSecuritySettingPrompt(e.msg):(i="xlmjgame")&&cc.vv.MJGame.onSecuritySettingPrompt(e.msg))}catch(e){console.log(e)}}},n.send(),console.log("xhr.send()")}}),cc._RF.pop()},{}],AudioMgr:[function(e,t,n){"use strict";cc._RF.push(t,"55caepcpvFK5r0Ax5f8jss4","AudioMgr"),cc.Class({extends:cc.Component,properties:{bgmVolume:.5,sfxVolume:.5,bgmAudioID:-1},init:function(){var e=cc.sys.localStorage.getItem("bgmVolume");null!=e&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll();var e=(new Date).getTime();cc.sys.localStorage.setItem("Game_CutOut",e)}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll();var e=(new Date).getTime();cc.sys.localStorage.getItem("Game_CutOut")-e>72e5?cc.director.loadScene("update"):null!=cc.vv.gameNetMgr.roomId&&0==cc.vv.gameNetMgr.isOver&&cc.vv.Reconnect.DisconnectReConnect()})},getUrl:function(e){return cc.url.raw("resources/textures/sounds/android/"+e)},playBGM:function(e){var t=this.getUrl(e);cc.audioEngine.stopAll(),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){var t=this.getUrl(e);cc.audioEngine.play(t,!1,this.sfxVolume)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],AudioMng:[function(e,t,n){"use strict";cc._RF.push(t,"3ff4cR3g8xJC57rKd4+qiuG","AudioMng"),cc.Class({extends:cc.Component,properties:{winAudio:{default:null,url:cc.AudioClip},loseAudio:{default:null,url:cc.AudioClip},cardAudio:{default:null,url:cc.AudioClip},buttonAudio:{default:null,url:cc.AudioClip},chipsAudio:{default:null,url:cc.AudioClip},bgm:{default:null,url:cc.AudioClip}},playMusic:function(){cc.audioEngine.playMusic(this.bgm,!0)},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},_playSFX:function(e){cc.audioEngine.playEffect(e,!1)},playWin:function(){this._playSFX(this.winAudio)},playLose:function(){this._playSFX(this.loseAudio)},playCard:function(){this._playSFX(this.cardAudio)},playChips:function(){this._playSFX(this.chipsAudio)},playButton:function(){this._playSFX(this.buttonAudio)}}),cc._RF.pop()},{}],ButtonScaler:[function(e,t,n){"use strict";cc._RF.push(t,"489b5t2VmlAb62AhKIhFFXd","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){function e(e){this.getComponent(cc.Button).interactable&&(this.stopAllActions(),this.runAction(t.scaleUpAction))}console.log("开始加载 ButtonScaler.js");var t=this,n=cc.find("Menu/AudioMng")||cc.find("Game/AudioMng");n&&(n=n.getComponent("AudioMng")),t.initScale=this.node.scale,t.button=t.getComponent(cc.Button),t.scaleDownAction=cc.scaleTo(t.transDuration,t.pressedScale),t.scaleUpAction=cc.scaleTo(t.transDuration,t.initScale),this.node.on("touchstart",function(e){this.getComponent(cc.Button).interactable&&(this.stopAllActions(),n&&n.playButton(),this.runAction(t.scaleDownAction))},this.node),this.node.on("touchend",e,this.node),this.node.on("touchcancel",e,this.node),console.log("加载完成 ButtonScaler.js")}}),cc._RF.pop()},{}],Chat:[function(e,t,n){"use strict";cc._RF.push(t,"58f27rxustNsYlRX3fryN8X","Chat"),cc.Class({extends:cc.Component,properties:{_chatRoot:null,_tabQuick:null,_tabEmoji:null,_iptChat:null,_chatRecord:null,_quickChatInfo:null,_btnChat:null,_tm_kai:null,_tm_guan:null,_chatArrLayer_data_content:null,_chatArrLayer_data:null,_tanmu_kaiguan:!0},onLoad:function(){if(null!=cc.vv){console.log("开始加载 Chat.js"),cc.vv.chat=this,this._btnChat=this.node.getChildByName("btn_chat"),this._btnChat.active=0==cc.vv.replayMgr.isReplay(),cc.vv.utils.addClickEvent(this._btnChat,this.node,"Chat","onBtnChatClicked"),this._chatRoot=this.node.getChildByName("chat"),this._chatRoot.active=!1;var e=this._chatRoot.getChildByName("bj");cc.vv.utils.addClickEvent(e,this.node,"Chat","onBgClicked"),this._tabQuick=this._chatRoot.getChildByName("quickchatlist"),this._tabEmoji=this._chatRoot.getChildByName("emojis"),this._chatRecord=this._chatRoot.getChildByName("chatRecord"),this._chatArrLayer_data_content=cc.find("view/content",this._chatRecord),this._chatArrLayer_data=this._chatArrLayer_data_content.children[0],this._chatArrLayer_data_content.removeChild(this._chatArrLayer_data),this._iptChat=this._chatRoot.getChildByName("iptChat").getComponent(cc.EditBox),this._tm_kai=this._chatRoot.getChildByName("tm_kai"),cc.vv.utils.addClickEvent(this._tm_kai,this.node,"Chat","onBtn__tm_kai"),this._tm_guan=this._chatRoot.getChildByName("tm_guan"),cc.vv.utils.addClickEvent(this._tm_guan,this.node,"Chat","onBtn__tm_guan"),this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"快点啊，等的都瞌睡了！",sound:"_1"},this._quickChatInfo.item1={index:1,content:"你们玩的不错，我也来玩一个！",sound:"_2"},this._quickChatInfo.item2={index:2,content:"帅哥，你胡啥牌，我打给你呀？",sound:"_3"},this._quickChatInfo.item3={index:3,content:"下好叫，割猫胡，做大做强么的前途。",sound:"_4"},this._quickChatInfo.item4={index:4,content:"自己摸不到，只有给你罗！",sound:"_5"},this._quickChatInfo.item5={index:5,content:"催啥子，我在想过那张！",sound:"_6"},this._quickChatInfo.item6={index:6,content:"勾个圈圈，咋又点炮了！",sound:"_7"},this._quickChatInfo.item7={index:7,content:"嘿，上碰下自摸哦！",sound:"_8"},this._quickChatInfo.item8={index:8,content:"你是炮兵学院毕业的吧，点的那么准！",sound:"_9"},this._quickChatInfo.item9={index:8,content:"辛辛苦苦几十年一炮回到解放前！",sound:"_10"},this._chatRecordInfo={},this._chatRecordInfo.happy={index:0,content:"happy0"},this._chatRecordInfo.angry={index:1,content:"angry0"},this._chatRecordInfo.smile={index:2,content:"smaile0"},this._chatRecordInfo.han={index:3,content:"han0"},this._chatRecordInfo.zhiya={index:4,content:"zhiya0"},this._chatRecordInfo.shihua={index:5,content:"shihua0"},this._chatRecordInfo.jiong={index:6,content:"jiong0"},this._chatRecordInfo.sleep={index:7,content:"sleep0"},this._chatRecordInfo.fennu={index:8,content:"fennu0"},this._chatRecordInfo.yun={index:9,content:"yun0"},this._chatRecordInfo.lihai={index:10,content:"lihai2"},this._chatRecordInfo.touxiang={index:11,content:"touxiang0"},this._chatRecordInfo.se={index:12,content:"se0"},this._chatRecordInfo.huaixiao={index:13,content:"huaixiao0"},this._chatRecordInfo.shaoxiang={index:14,content:"shaoxiang0"},console.log("加载完成 Chat.js")}},getQuickChatInfo:function(e){var t="item"+e;return this._quickChatInfo[t]},getChatRecordInfo:function(e){return this._chatRecordInfo[e]},onBtnChatClicked:function(){this._chatRoot.active=!0},onBgClicked:function(){this._chatRoot.active=!1},oncharEsc:function(){this._chatRoot.active=!1},onTabClicked:function(e){"tabQuick"==e.target.name?(this._tabEmoji.active=!1,this._chatRecord.active=!1,this._tabQuick.active=!0):"tabEmoji"==e.target.name?(this._tabQuick.active=!1,this._chatRecord.active=!1,this._tabEmoji.active=!0):"free_input"==e.target.name&&(this._tabQuick.active=!1,this._tabEmoji.active=!1,this._chatRecord.active=!0)},onQuickChatItemClicked:function(e){this._chatRoot.active=!1;var t=this._quickChatInfo[e.target.name];cc.vv.net.send("quick_chat",t.index),console.log()},onEmojiItemClicked:function(e){console.log(e.target.name),this._chatRoot.active=!1,cc.vv.net.send("emoji",e.target.name)},onBtnSendChatClicked:function(){this._chatRoot.active=!1,""!=this._iptChat.string&&(cc.vv.net.send("chat",this._iptChat.string),this._iptChat.string="")},onBtn__tm_kai:function(){this._tm_kai.active=!1,this._tm_guan.active=!0,this._tanmu_kaiguan=!1},onBtn__tm_guan:function(){this._tm_guan.active=!1,this._tm_kai.active=!0,this._tanmu_kaiguan=!0},chatRecord_display:function(e,t,n){var i=cc.vv.gameNetMgr.getSeatByID(n),a=this.getViewItemChat(this._chatArrLayer_data_content.childrenCount,this._chatArrLayer_data_content,this._chatArrLayer_data),c=a.getChildByName("chatContent");if(1==e)c.getComponent(cc.RichText).string=i.name+": "+t;else if(2==e){var o=this.getChatRecordInfo(t);c.getComponent(cc.RichText).string=i.name+': <img src="'+o.content+'"/>'}c.height>120&&(a.height=c.height+30);for(var s=0,r=0;r<this._chatArrLayer_data_content.childrenCount;r++)s+=this._chatArrLayer_data_content.children[r].height;this._chatArrLayer_data_content.height=s+20*this._chatArrLayer_data_content.childrenCount},getViewItemChat:function(e,t,n){var i=t;if(i.childrenCount>e)return i.children[e];var a=cc.instantiate(n);return i.addChild(a),a},deleteContentChat:function(e,t){for(;t.childrenCount>e;){var n=t.children[t.childrenCount-1];t.removeChild(n,!0)}},update:function(e){}}),cc._RF.pop()},{}],CheckBoxGroupMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ebd7fHQCdxFSpoH3LoFwNPw","CheckBoxGroupMgr"),cc.Class({extends:cc.Component,properties:{_groups:null},onLoad:function(){},init:function(){this._groups={}},add:function(e){var t=e.groupId,n=this._groups[t];null==n&&(n=[],this._groups[t]=n),n.push(e)},del:function(e){var t=e.groupId,n=this._groups[t];if(null!=n){var i=n.indexOf(e);-1!=i&&n.splice(i,1),0==n.length&&delete this._groups[t]}},check:function(e){var t=e.groupId,n=this._groups[t];if(null!=n)for(var i=0;i<n.length;++i){var a=n[i];a==e?a.check(!0):a.check(!1)}}}),cc._RF.pop()},{}],CheckBoxMutex:[function(e,t,n){"use strict";cc._RF.push(t,"b4c9dXNkjxBcJac9I4cGPE0","CheckBoxMutex");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({extends:cc.Component,properties:{target:cc.Node,sprite:cc.SpriteFrame,checkedSprite:cc.SpriteFrame,checked:!1,groupId:-1},onLoad:function(){console.log("开始加载 CheckBoxMutex.js"),null!=cc.vv&&(console.log(i(cc.vv.checkboxGroupMgr.add)),cc.vv.checkboxGroupMgr.add(this),this.refresh(),console.log("加载完成 CheckBoxMutex.js"))},onClicked:function(){cc.vv.checkboxGroupMgr.check(this),this.refresh()},check:function(e){1==this.checked?this.checked=!1:this.checked=e,this.refresh()},refresh:function(){var e=this.target.getComponent(cc.Sprite);this.checked?e.spriteFrame=this.checkedSprite:e.spriteFrame=this.sprite}}),cc._RF.pop()},{}],CheckBox:[function(e,t,n){"use strict";cc._RF.push(t,"dc9e5hcegFBFpbh0CwUFw8V","CheckBox"),cc.Class({extends:cc.Component,properties:{target:cc.Node,sprite:cc.SpriteFrame,checkedSprite:cc.SpriteFrame,checked:!1},onLoad:function(){console.log("开始加载 CheckBox.js"),this.refresh(),console.log("加载完成 CheckBox.js")},onClicked:function(){this.checked=!this.checked,this.refresh()},onClickedES:function(){this.checked=!this.checked,this.refresh()},refresh:function(){var e=this.target.getComponent(cc.Sprite);this.checked?e.spriteFrame=this.checkedSprite:e.spriteFrame=this.sprite}}),cc._RF.pop()},{}],CreateRole:[function(e,t,n){"use strict";cc._RF.push(t,"5d56bFYy/REb77pQCq9YHh6","CreateRole"),cc.Class({extends:cc.Component,properties:{inputName:cc.EditBox},onRandomBtnClicked:function(){var e=["上官","欧阳","东方","端木","独孤","司马","南宫","夏侯","诸葛","皇甫","长孙","宇文","轩辕","东郭","子车","东阳","子言"],t=["雀圣","赌侠","赌圣","稳赢","不输","好运","自摸","有钱","土豪"],n=Math.floor(Math.random()*(e.length-1)),i=Math.floor(Math.random()*(t.length-1));this.inputName.string=e[n]+t[i],console.log("随机的名字："+this.inputName.string)},onLoad:function(){console.log("开始加载 CreateRole.js"),this.onRandomBtnClicked(),console.log("加载完成 CreateRole.js")},onBtnConfirmClicked:function(){var e=this.inputName.string;console.log("随机的名字："+e),cc.vv.userMgr.create(e)}}),cc._RF.pop()},{}],CreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"eec07HsL4pBn5/PiT3SYBew","CreateRoom"),cc.Class({extends:cc.Component,properties:{_leixingxuanze:null,_dchmj_kaifangmoshi:null,_dchmj_kaifangzhifu:null,_dchmj_kaifangsuanfen:null,_dchmj_wanfaxuanze:null,_permissionDiamond:null,_theMargin:null,_theMarginindex:-1},onLoad:function(){console.log("开始加载 CreateRoom.js"),cc.vv.createRoom=this,this._leixingxuanze=[];for(var e=this.node.getChildByName("leixingxuanze"),t=0;t<e.childrenCount;++t)null!=(n=e.children[t].getComponent("RadioButton"))&&this._leixingxuanze.push(n);this._dchmj_kaifangmoshi=[];for(var e=this.node.getChildByName("dchmj_kaifangmoshi"),t=0;t<e.childrenCount;++t)null!=(n=e.children[t].getComponent("RadioButton"))&&this._dchmj_kaifangmoshi.push(n);this._dchmj_kaifangzhifu=[];for(var e=this.node.getChildByName("dchmj_kaifangzhifu"),t=0;t<e.childrenCount;++t)null!=(n=e.children[t].getComponent("RadioButton"))&&this._dchmj_kaifangzhifu.push(n);this._dchmj_kaifangsuanfen=[];for(var e=this.node.getChildByName("dchmj_kaifangsuanfen"),t=0;t<e.childrenCount;++t)null!=(n=e.children[t].getComponent("RadioButton"))&&this._dchmj_kaifangsuanfen.push(n);this._dchmj_wanfaxuanze=[];for(var e=this.node.getChildByName("dchmj_wanfaxuanze"),t=0;t<e.childrenCount;++t){if(t>=2)n=e.children[t].getComponent("CheckBox");else var n=e.children[t].getComponent("RadioButton");null!=n&&this._dchmj_wanfaxuanze.push(n)}this._permissionDiamond=this.node.getChildByName("permissionDiamond"),this._theMargin=this._permissionDiamond.getChildByName("theMargin").getComponent(cc.Label),this._theMargin.string="0",this._theMarginindex=-1,this.getBeforeBtnCheckedState(),console.log("加载完成 CreateRoom.js")},onBtnBack:function(){this.node.active=!1},onBtnOK:function(){this.node.active=!1,this.createRoom()},createRoom:function(){for(var e=0,t=0;t<this._leixingxuanze.length;++t)if(this._leixingxuanze[t].checked){e=t;break}0==e&&(cc.vv._Gametype="jl_dch_chch",this.createRoomSYMJ(cc.vv._Gametype,function(e){t=new Date;console.log("关闭正在连接图层 time:"+t.getSeconds()+":"+t.getMilliseconds()),cc.vv.wc.hide();var t=new Date;console.log("关闭成功 time:"+t.getSeconds()+":"+t.getMilliseconds()),0!==e.errcode?2222==e.errcode?cc.vv.alert.show("","钻石不足，创建房间失败!"):1100==e.errcode?cc.vv.alert.show("","房卡不足，创建房间失败!"):11008==e.errcode?cc.vv.alert.show("","房卡准入金不足!"):11004==e.errcode?cc.vv.alert.show("","创建房间sign错误!"):11005==e.errcode?cc.vv.alert.show("","token不存在!"):1110==e.errcode||11007==e.errcode?cc.vv.alert.show("","已在房间内!"):11001==e.errcode?cc.vv.alert.show("","创建房间参数错误!"):cc.vv.alert.show("","创建房间失败,错误码:"+e.errcode+"...errormsg:"+e.errmsg):cc.vv.gameNetMgr.connectGameServer(e)})),cc.sys.localStorage.setItem("gametype",e)},createRoomSYMJ:function(e,t){for(var n=this,i=0,a=0;a<n._dchmj_kaifangmoshi.length;++a)if(n._dchmj_kaifangmoshi[a].checked){i=a;break}for(var c=0,a=0;a<n._dchmj_kaifangsuanfen.length;++a)if(n._dchmj_kaifangsuanfen[a].checked){c=a;break}for(var o=0,a=0;a<2;++a)if(n._dchmj_wanfaxuanze[a].checked){o=a;break}var s=n._dchmj_wanfaxuanze[2].checked,r=n._dchmj_wanfaxuanze[3].checked,l=n._dchmj_wanfaxuanze[4].checked,h=n._dchmj_wanfaxuanze[5].checked,g=n._dchmj_wanfaxuanze[6].checked,d=n._dchmj_wanfaxuanze[7].checked,u={type:e,difen:0,jushuxuanze:i,paymentway:0,moshi:i,suanfen:c,fengdan:o,xiaojifeidan:s,bukepinghu:r,keduanmen:l,zhandan:h,zhanli:d,dianpaopeifu:g,deposit:this._theMarginindex};cc.sys.localStorage.setItem("dch_jushuxuanze",i),cc.sys.localStorage.setItem("dch_suanfen",c),cc.sys.localStorage.setItem("dch_fengdan",o),cc.sys.localStorage.setItem("dch_xiaojifeidan",s),cc.sys.localStorage.setItem("dch_bukepinghu",r),cc.sys.localStorage.setItem("dch_keduanmen",l),cc.sys.localStorage.setItem("dch_zhandan",h),cc.sys.localStorage.setItem("dch_baosanjia",g),cc.sys.localStorage.setItem("dch_suanzhanli",d);var v={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,conf:JSON.stringify(u)};cc.vv.wc.show("正在创建房间"),cc.vv.http.sendRequest(cc.vv.http.hall_port,"/create_private_room",v,t),console.log("发送创建房间  =  "+v)},getBeforeBtnCheckedState:function(){var e=cc.sys.localStorage.getItem("dch_jushuxuanze"),t=cc.sys.localStorage.getItem("dch_zhifu"),n=cc.sys.localStorage.getItem("dch_suanfen"),i=cc.sys.localStorage.getItem("dch_fengdan"),a=cc.sys.localStorage.getItem("dch_xiaojifeidan"),c=cc.sys.localStorage.getItem("dch_bukepinghu"),o=cc.sys.localStorage.getItem("dch_keduanmen"),s=cc.sys.localStorage.getItem("dch_zhandan"),r=cc.sys.localStorage.getItem("dch_baosanjia"),l=cc.sys.localStorage.getItem("dch_suanzhanli");if(e&&(0==e||1==e||2==e||3==e))for(h=0;h<this._dchmj_kaifangmoshi.length;h++)this._dchmj_kaifangmoshi[h].checked=h==e;if(t&&(0==t||1==t))for(h=0;h<this._dchmj_kaifangzhifu.length;h++)this._dchmj_kaifangzhifu[h].checked=t==h;if(n&&(0==n||1==n))for(h=0;h<this._dchmj_kaifangsuanfen.length;h++)this._dchmj_kaifangsuanfen[h].checked=n==h;if(i&&(0==i||1==i))for(var h=0;h<this._dchmj_wanfaxuanze.length;h++)this._dchmj_wanfaxuanze[h].checked=i==h;a?(a="true"==a,this._dchmj_wanfaxuanze[2].checked=a):this._dchmj_wanfaxuanze[2].checked=!0,c&&(c="true"==c,this._dchmj_wanfaxuanze[3].checked=c),o&&(o="true"==o,this._dchmj_wanfaxuanze[4].checked=o),s&&(s="true"==s,this._dchmj_wanfaxuanze[5].checked=s),r?(r="true"==r,this._dchmj_wanfaxuanze[6].checked=r):this._dchmj_wanfaxuanze[6].checked=!0,l?(l="true"==l,this._dchmj_wanfaxuanze[7].checked=l):this._dchmj_wanfaxuanze[7].checked=!0},theMarginPlus:function(){var e=parseInt(this._theMargin.string);e+=10,this._theMarginindex++,e>50&&(e=50),this._theMarginindex>4&&(this._theMarginindex=4),this._theMargin.string=e+""},theMarginReduce:function(){var e=parseInt(this._theMargin.string);e-=10,this._theMarginindex--,e<0&&(e=0),this._theMarginindex<-1&&(this._theMarginindex=-1),this._theMargin.string=e+""}}),cc._RF.pop()},{}],DingPiao:[function(e,t,n){"use strict";cc._RF.push(t,"62338Mb02tD7IIykemdplS7","DingPiao"),cc.Class({extends:cc.Component,properties:{_dingpiao:null,tips:[],selected:[],_dingpiaos:[]},onLoad:function(){null!=cc.vv&&(this.initView(),this.initDingPiao(),this.initEventHandlers())},initView:function(){var e=this.node.getChildByName("game"),t=this.node.getChildByName("prepare");this._dingpiao=t.getChildByName("dingpiao"),this._dingpiao.active=cc.vv.gameNetMgr.isDingPiaoing,this._dingpiao.active&&(t.active=!0,e.active=!1,cc.vv.MJRoom._btnDispress.active=!0,cc.vv.MJRoom._btnExit.active=!1,cc.vv.MJRoom._btnWeichat.active=!1);for(var n=["myself","right","left"],i=0;i<n.length;++i){var a=e.getChildByName(n[i]).getChildByName("seat").getChildByName("piao");this._dingpiaos.push(a)}this.reset();for(var c=this._dingpiao.getChildByName("tips"),i=0;i<c.childrenCount;++i){var o=c.children[i];this.tips.push(o)}"dingpiao"==cc.vv.gameNetMgr.gamestate&&this.showDingPiaoChoice()},IsHidedingpiaoBtnArr:function(e){for(var t=0;t<this._dingpiao.childrenCount;t++)"tips"!=this._dingpiao.children[t].name&&(this._dingpiao.children[t].active=e)},initEventHandlers:function(){var e=this;this.node.on("game_dingpiao",function(t){e.showDingPiaoChoice()}),this.node.on("game_dingpiao_notify",function(t){var n=cc.vv.gameNetMgr.getSeatIndexByID(t.detail.userid),i=cc.vv.gameNetMgr.getLocalIndexKWX(n);console.log("game_dingpiao_notify:"+i),cc.vv.gameNetMgr.seatIndex==n?(e.IsHidedingpiaoBtnArr(!1),e.tips[i].active=!0,e.tips[i].children[t.detail.piaonum].active=!0):(e.tips[i].active=!0,e.tips[i].children[t.detail.piaonum].active=!0)}),this.node.on("game_dingpiao_finish",function(){e._dingpiao.active=!1,cc.vv.gameNetMgr.isDingPiaoing=!1,e.initDingPiao(),cc.vv.gameNetMgr.curIsDissolve=null})},showDingPiaoChoice:function(){this._dingpiao.active=!0,this.reset();for(e=0;e<this.tips.length;++e)this.tips[e].active=!0;for(var e=0;e<cc.vv.gameNetMgr.seats.length;e++)if(null!=cc.vv.gameNetMgr.seats[e].dingpiao&&-1!=cc.vv.gameNetMgr.seats[e].dingpiao){var t=cc.vv.gameNetMgr.getSeatIndexByID(cc.vv.gameNetMgr.seats[e].userid),n=cc.vv.gameNetMgr.getLocalIndexKWX(t);this.tips[n].active=!0,this.tips[n].children[cc.vv.gameNetMgr.seats[e].dingpiao].active=!0,e==cc.vv.gameNetMgr.seatIndex&&this.IsHidedingpiaoBtnArr(!1)}cc.vv.MJRoom&&(cc.vv.MJRoom._btnDispress.active=!0,cc.vv.MJRoom._btnExit.active=!1,cc.vv.MJRoom._btnWeichat.active=!1)},initDingPiao:function(){for(var e=["bupiao","piaoyi","piaoer"],t=cc.vv.gameNetMgr.seats,n=0;n<t.length;++n){var i=t[n].dingpiao;i=null==i||i<0||i>=e.length?null:e[i];var a=cc.vv.gameNetMgr.getLocalIndexKWX(n);i&&(cc.vv.gameNetMgr.isDingPiaoing||(this._dingpiaos[a].getChildByName(i).active=!0))}},reset:function(){this.setInteractable(!0),this.selected.push(this._dingpiao.getChildByName("bupiao_selected")),this.selected.push(this._dingpiao.getChildByName("piaoyi_selected")),this.selected.push(this._dingpiao.getChildByName("piaoer_selected"));for(t=0;t<this.selected.length;++t)this.selected[t].active=!1;for(t=0;t<this._dingpiaos.length;++t)for(var e=0;e<this._dingpiaos[t].children.length;++e)this._dingpiaos[t].children[e].active=!1;for(var t=0;t<this._dingpiao.childrenCount;t++)if("New Layout"==this._dingpiao.children[t].name||"bupiao"==this._dingpiao.children[t].name||"piaoyi"==this._dingpiao.children[t].name||"piaoer"==this._dingpiao.children[t].name)this._dingpiao.children[t].active=!0;else if("tips"==this._dingpiao.children[t].name)for(var n=0;n<this._dingpiao.children[t].childrenCount;n++){this._dingpiao.children[t].children[n].active=!1;for(var i=0;i<this._dingpiao.children[t].children[n].childrenCount;i++)this._dingpiao.children[t].children[n].children[i].active=!1}else this._dingpiao.children[t].active=!1},onDingPiaoClicked:function(e){var t=0;"bupiao"==e.target.name?t=0:"piaoyi"==e.target.name?t=1:"piaoer"==e.target.name&&(t=2);for(var n=0;n<this.selected.length;++n)this.selected[n].active=!1;this.selected[t].active=!0,cc.vv.gameNetMgr.dingpiao=t,cc.vv.net.send("dingpiao",t)},setInteractable:function(e){this._dingpiao.getChildByName("bupiao").getComponent(cc.Button).interactable=e,this._dingpiao.getChildByName("piaoyi").getComponent(cc.Button).interactable=e,this._dingpiao.getChildByName("piaoer").getComponent(cc.Button).interactable=e}}),cc._RF.pop()},{}],DingQue:[function(e,t,n){"use strict";cc._RF.push(t,"907582awNJFnobC/mZGFLBq","DingQue"),cc.Class({extends:cc.Component,properties:{queYiMen:null,tips:[],selected:[],dingques:[],_masks:null,_infoTime:0,_dingque_display:null,_lack_door:[]},onLoad:function(){console.log("开始加载 DingQue.js"),null!=cc.vv&&(this.initView(),this.initDingQue(),this.initEventHandlers(),console.log("加载完成 DingQue.js"))},initView:function(){cc.vv.DingQue=this;var e=cc.director.getScene().name;console.log("场景名称 = "+e);var t=this.node.getChildByName("game");this.queYiMen=t.getChildByName("dingque"),this._masks=this.queYiMen.getChildByName("masks"),this._dingque_display=this.queYiMen.getChildByName("dingque_display"),this.queYiMen.active=cc.vv.gameNetMgr.isDingQueing;for(var n=["myself","right","up","left"],i=0;i<n.length;++i){var a=t.getChildByName(n[i]).getChildByName("seat").getChildByName("que");this.dingques.push(a)}for(var c=this.queYiMen.getChildByName("tips"),i=0;i<c.childrenCount;++i){o=c.children[i];this.tips.push(o)}for(i=0;i<this._dingque_display.childrenCount;++i){var o=this._dingque_display.children[i];this._lack_door.push(o)}this.reset()},initEventHandlers:function(){var e=this;this.node.on("game_dingque",function(t){e.showDingQueChoice()}),this.node.on("game_dingque_notify",function(t){var n=cc.vv.gameNetMgr.getSeatIndexByID(t.detail),i=cc.vv.gameNetMgr.getLocalIndex(n);console.log("game_dingque_notify:"+i),e.tips[i].active=!1,0==i&&e.Own_DingQue_Complete()}),this.node.on("game_dingque_finish",function(){cc.vv.gameNetMgr.isDingQueing=!1,setTimeout(function(){e.whole_dingque_complete()},700)}),this.node.on("game_sync",function(t){e.initDingQue()})},showDingQueChoice:function(e){0==(e=cc.vv.QueYiMen)?this.queYiMen.getChildByName("dingqueguangxiao").x=11:1==e?this.queYiMen.getChildByName("dingqueguangxiao").x=361:2==e&&(this.queYiMen.getChildByName("dingqueguangxiao").x=-339),this.queYiMen.getChildByName("dingqueguangxiao").active=!0,this.queYiMen.active=!0,this.reset();for(var t=0;t<this.tips.length;++t){var n=this.tips[t];n.active=t>0}this.queYiMen.getChildByName("tong").active=!0,this.queYiMen.getChildByName("tiao").active=!0,this.queYiMen.getChildByName("wan").active=!0,this.queYiMen.getChildByName("masks").active=!0},initDingQue:function(){for(var e=["tong","tiao","wan"],t=cc.vv.gameNetMgr.seats,n=0;n<t.length;++n){var i=t[n].dingque;i=null==i||i<0||i>=e.length?null:e[i];var a=cc.vv.gameNetMgr.getLocalIndex(n);0==a&&(cc.vv.gameNetMgr.dingque=t[n].dingque),i&&(this.dingques[a].getChildByName(i).active=!0)}},reset:function(){this.setInteractable(!0);for(e=0;e<this.dingques.length;++e)for(t=0;t<this.dingques[e].children.length;++t)this.dingques[e].children[t].active=!1;for(var e=0;e<this._lack_door.length;++e)for(var t=0;t<this._lack_door[e].children.length;++t)this._lack_door[e].children[t].active=!1},onQueYiMenClicked:function(e){var t=0;"tong"==e.target.name?t=0:"tiao"==e.target.name?t=1:"wan"==e.target.name&&(t=2),cc.vv.gameNetMgr.dingque=t,cc.vv.net.send("dingque",t)},setInteractable:function(e){this.queYiMen.getChildByName("tong").getComponent(cc.Button).interactable=e,this.queYiMen.getChildByName("tiao").getComponent(cc.Button).interactable=e,this.queYiMen.getChildByName("wan").getComponent(cc.Button).interactable=e},Own_DingQue_Complete:function(){this.queYiMen.getChildByName("dingqueguangxiao").active=!1;var e=this.queYiMen.getChildByName("tong"),t=this.queYiMen.getChildByName("tiao"),n=this.queYiMen.getChildByName("wan");if(0==cc.vv.gameNetMgr.dingque){var i=cc.fadeOut(.7),a=cc.moveTo(.7,cc.p(-350,-400)),c=cc.spawn(a,i),o=cc.fadeOut(.7),s=cc.moveTo(.7,cc.p(350,-400)),r=cc.spawn(s,o),l=cc.moveTo(.7,cc.p(-773,-215)),h=cc.scaleTo(.7,.3,.3),g=cc.spawn(l,h);e.runAction(g),t.runAction(r),n.runAction(c)}if(1==cc.vv.gameNetMgr.dingque){var i=cc.fadeOut(.7),a=cc.moveTo(.7,cc.p(-350,-400)),c=cc.spawn(a,i),d=cc.fadeOut(.7),l=cc.moveTo(.7,cc.p(0,-400)),g=cc.spawn(l,d),s=cc.moveTo(.7,cc.p(-773,-215)),u=cc.scaleTo(.7,.3,.3),r=cc.spawn(s,u);e.runAction(g),t.runAction(r),n.runAction(c)}if(2==cc.vv.gameNetMgr.dingque){var o=cc.fadeOut(.7),s=cc.moveTo(.7,cc.p(350,-400)),r=cc.spawn(s,o),d=cc.fadeOut(.7),l=cc.moveTo(.7,cc.p(0,-400)),g=cc.spawn(l,d),a=cc.moveTo(.7,cc.p(-773,-215)),v=cc.scaleTo(.7,.3,.3),c=cc.spawn(a,v);e.runAction(g),t.runAction(r),n.runAction(c)}var m=this;setTimeout(function(){m._masks.active=!1,m.queYiMen.getChildByName("tong").active=!1,m.queYiMen.getChildByName("tiao").active=!1,m.queYiMen.getChildByName("wan").active=!1,m.queYiMen.getChildByName("masks").active=!1,m.queYiMen.getChildByName("dingqueguangxiao").active=!1,m.queYiMen.getChildByName("tong").x=0,m.queYiMen.getChildByName("tong").y=-70,m.queYiMen.getChildByName("tong").scaleX=1,m.queYiMen.getChildByName("tong").scaleY=1,m.queYiMen.getChildByName("tong").opacity=255,m.queYiMen.getChildByName("tiao").x=350,m.queYiMen.getChildByName("tiao").y=-70,m.queYiMen.getChildByName("tiao").scaleX=1,m.queYiMen.getChildByName("tiao").scaleY=1,m.queYiMen.getChildByName("tiao").opacity=255,m.queYiMen.getChildByName("wan").x=-350,m.queYiMen.getChildByName("wan").y=-70,m.queYiMen.getChildByName("wan").scaleX=1,m.queYiMen.getChildByName("wan").scaleY=1,m.queYiMen.getChildByName("wan").opacity=255},780)},whole_dingque_complete:function(){for(var e=["tong","tiao","wan"],t=cc.vv.gameNetMgr.seats,n=0;n<t.length;++n){var i=t[n].dingque;i=null==i||i<0||i>=e.length?null:e[i];var a=cc.vv.gameNetMgr.getLocalIndex(n);0!=a&&(i&&(this._lack_door[a].getChildByName(i).active=!0))}var c=this;setTimeout(function(){for(var e=0;e<c._lack_door.length;++e){var t=c._lack_door[e],n=cc.scaleTo(.7,.2,.2);if(0!=e)if(1==e){var i=cc.moveTo(.7,cc.p(770,120)),a=cc.fadeOut(.7),o=cc.spawn(i,n,a);t.runAction(o)}else if(2==e){var i=cc.moveTo(.7,cc.p(-580,458)),a=cc.fadeOut(.7),o=cc.spawn(i,n,a);t.runAction(o)}else if(3==e){var i=cc.moveTo(.7,cc.p(-765,120)),a=cc.fadeOut(.7),o=cc.spawn(i,n,a);t.runAction(o)}}},800),setTimeout(function(){c.queYiMen.active=!1,c.initDingQue();for(var e=0;e<c._lack_door.length;++e){var t=c._lack_door[e];0!=e&&(1==e?(t.x=400,t.y=170,t.scaleX=.7,t.scaleY=.7,t.opacity=255):2==e?(t.x=0,t.y=370,t.scaleX=.7,t.scaleY=.7,t.opacity=255):3==e&&(t.x=-400,t.y=170,t.scaleX=.7,t.scaleY=.7,t.opacity=255))}},1600)},update:function(e){for(var t=0;t<this.tips.length;++t)if(this.tips[t].active){for(var n=1;n<this.tips[t].children.length;n++)this.tips[t].children[n].active=!1;var i=Math.floor(Date.now()/200)%4;this.tips[t].children[i].active=!0}}}),cc._RF.pop()},{}],Folds:[function(e,t,n){"use strict";cc._RF.push(t,"0bf63eiZEFMWbW03o8heqa5","Folds"),cc.Class({extends:cc.Component,properties:{_folds:null},onLoad:function(){console.log("开始加载 Folds.js"),null!=cc.vv&&(cc.vv.Folds=this,this.initView(),this.initEventHandler(),this.initAllFolds(),console.log("加载完成 Folds.js"))},initView:function(){this._folds={};for(var e=this.node.getChildByName("game"),t=["myself","right","up","left"],n=0;n<t.length;++n){for(var i=t[n],a=[],c=e.getChildByName(i).getChildByName("folds"),o=0;o<c.children.length;++o){var s=c.children[o];s.active=!1;var r=s.getComponent(cc.Sprite);r.spriteFrame=null,a.push(r)}this._folds[i]=a}this.hideAllFolds()},hideAllFolds:function(){for(var e in this._folds){var t=this._folds[n];for(var n in t)t[n].node.active=!1}},initEventHandler:function(){var e=this;this.node.on("game_begin",function(t){e.initAllFolds()}),this.node.on("game_sync",function(t){e.initAllFolds()}),this.node.on("game_chupai_notify",function(t){e.initFolds(t.detail)}),this.node.on("guo_notify",function(t){e.initFolds(t.detail)})},initAllFolds:function(){var e=cc.vv.gameNetMgr.seats;for(var t in e)this.initFolds(e[t])},initFolds:function(e){var t=e.folds;if(null!=t){for(var n=cc.vv.gameNetMgr.getLocalIndex(e.seatindex),i=cc.vv.mahjongmgr.getFoldPre(n),a=cc.vv.mahjongmgr.getSide(n),c=this._folds[a],o=0;o<c.length;++o){s=o;"right"!=a&&"up"!=a||(s=c.length-o-1),(r=c[s]).node.active=!0,this.setSpriteFrameByMJID(i,r,t[o])}for(o=t.length;o<c.length;++o){var s=o;"right"!=a&&"up"!=a||(s=c.length-o-1);var r=c[s];r.spriteFrame=null,r.node.active=!1}}},setSpriteFrameByMJID:function(e,t,n){cc.vv.mahjongmgr.getSpriteFrameByMJID(t,e,n),t.node.active=!0}}),cc._RF.pop()},{}],FrameEvent:[function(e,t,n){"use strict";cc._RF.push(t,"eb925YxRi5Of7U1HIcsySLL","FrameEvent"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},kaijuPlayComplete:function(){for(var e=cc.vv.gameNetMgr.seats,t=0;t<e.length;++t){var n=e[t],i=cc.vv.gameNetMgr.getLocalIndex(n.seatindex);cc.vv.MJRoom._seats[i].setInfo(n.name,n.score),cc.vv.MJRoom._seats[i].setID(n.userid,n.heading)}cc.vv.MJGame._startAnimation.active=!1},qiPaiPlayComplete:function(){console.log("当摸牌动画播放完成时 ------ ")},huPaiPlayComplete:function(){this.node.active=!1},pengGangPlayComplete:function(){this.node.active=!1}}),cc._RF.pop()},{}],GameNetMgr:[function(e,t,n){"use strict";cc._RF.push(t,"9545659TARKZLMoHGqXoY2N","GameNetMgr");cc.Class({extends:cc.Component,properties:{_token:null,dataEventHandler:null,roomId:null,maxNumOfGames:0,numOfGames:0,numOfMJ:0,seatIndex:-1,seats:null,turn:-1,button:-1,dingque:-1,chupai:-1,dingpiao:-1,isDingQueing:!1,isDingPiaoing:!1,isHuanSanZhang:!1,gamestate:"",isOver:!1,hb_handle:null,_changeBrand:-1,baopai:null,_dingzhuang:null,_Subsequentdingzhuang:null,_zidongchupai:!1,_auto_action:null,_isFenzhang:!1,_dongjia:-1,_baopai:-1,lianzhuang:0,choice_place_lv:2},reset:function(e){this.turn=-1,this.chupai=-1,this.dingque=-1,this.button=-1,this.gamestate="",this.dingpiao=-1,this.isDingQueing=!1,this.isDingPiaoing=!1,this.isHuanSanZhang=!1,this.curaction=null,this.curIsDissolve=null,this.baopai=null,this._zidongchupai=!1,this._auto_action=null,this._dongjia=-1,this.lianzhuang=0;for(var t=0;t<this.seats.length;++t)this.seats[t].holds=[],this.seats[t].folds=[],this.seats[t].pengs=[],this.seats[t].angangs=[],this.seats[t].diangangs=[],this.seats[t].wangangs=[],this.seats[t].chi=[],this.seats[t].pigang=0,this.seats[t].laigang=0,this.seats[t].dxnbgangs=[],this.seats[t].xiadan=[],this.seats[t].zfbzancount=0,this.seats[t].fan=1,this.seats[t].score=e?this.seats[t].score:0,this.seats[t].jiangyise=!1,this.seats[t].qingyise=!1,this.seats[t].pattern="",this.seats[t].daxiaoxue=0,this.seats[t].quanqiuren=!1,this.seats[t].isganghu=!1,this.seats[t].dongzhang=!1,this.seats[t].isying=!1,this.seats[t].dingque=-1,this.seats[t].dingpiao=-1,this.seats[t].ready=!1,this.seats[t].hued=!1,this.seats[t].liangpai=!1,this.seats[t].kou=[],this.seats[t].koupaiSize=0,this.seats[t].ting=[],this.seats[t].holdlen=0,this.seats[t].huanpais=[],this.seats[t].huinfo=[],this.seats[t].crown=e?this.seats[t].crown:0,this.seats[t].tinged=!1,this.seats[t].zfbdan=[],this.seats[t].dxnbdan=[],this.seats[t].yaodan=[],this.seats[t].jiudan=[],this.seats[t].yaoji=[]},clear:function(){this.dataEventHandler=null,null==this.isOver&&(this.seats=null,this.roomId=null,this.maxNumOfGames=0,this.numOfGames=0)},dispatchEvent:function(e,t){this.dataEventHandler&&this.dataEventHandler.emit(e,t)},getSeatIndexByID:function(e){if(null==this.seats)return-1;for(var t=0;t<this.seats.length;++t)if(this.seats[t].userid==e)return this.seats[t].seatindex;return-1},getSeatSeatsIndex:function(e){for(var t=0;t<this.seats.length;t++)if(this.seats[t].userid==e.userid)return this.seats[t].seatindex},isOwner:function(){return 0==this.seatIndex},getSeatByID:function(e){if(null==this.seats)return null;for(var t=this.getSeatIndexByID(e),n=0;n<this.seats.length;n++)if(t==this.seats[n].seatindex)return this.seats[n];return null},getSelfData:function(){return this.seats[this.seatIndex]},getLocalIndex:function(e){return(e-this.seatIndex+4)%4},getLocalIndexKWX:function(e){return(e-this.seatIndex+3)%3},getLocalIndexKWXseat:function(e){return this.seats[e]},prepareReplay:function(e,t){this.roomId=e.roomno,this.seats=e.seats,this.turn=this.getSeatIndexByID(t.initData.zhuang),this.button=t.initData.zhuang,this._dongjia=t.initData.dong,this.conf=t.roomConf;var n=t.initData;cc.vv._Gametype=this.conf.type,this.numOfGames=n.quan?n.quan:0,this.maxNumOfGames=this.conf&&this.conf.quanshu?this.conf.quanshu:0;for(var i=0;i<this.seats.length;++i){var a=this.seats[i];a.seatindex=i,a.score=null,a.holds=n.seats[i].holds,a.pengs=[],a.angangs=[],a.chi=[],a.diangangs=[],a.wangangs=[],a.dxnbgangs=[],a.zfbzancount=0,a.kou=[],a.folds=[],a.crown=null,a.zfbdan=[],a.dxnbdan=[],a.yaodan=[],a.jiudan=[],a.yaoji=[],a.hued=!1,console.log(a),cc.vv.userMgr.userId==a.userid&&(this.seatIndex=i)}this.conf.type},getWanfa:function(){var e=this.conf;if(e&&null!=e.maxGames&&null!=e.maxFan){var t=[];return t.push(e.maxGames+"局"),t.push(e.maxFan+"番封顶"),e.hsz&&t.push("换三张"),1==e.zimo?t.push("自摸加番"):t.push("自摸加底"),e.jiangdui&&t.push("将对"),1==e.dianganghua?t.push("点杠花(自摸)"):t.push("点杠花(放炮)"),e.menqing&&t.push("门清、中张"),e.tiandihu&&t.push("天地胡"),1==e.isAA?t.push("每人支付"):0==e.isAA&&t.push("房主支付"),t.join(" ")}return""},getwanfaLJMJGameOver:function(){var e=this.conf;if(e&&null!=e.maxGames){var t=[];return t.push(e.maxGames+"局"),e.xianda?t.push("先打后抓"):t.push("先抓后打"),t.join(" ")}return""},getwanfaLJMJ:function(){var e=this.conf;if(e&&null!=e.maxGames){var t=[];return t.push(e.maxGames+"局"),e.xianda?t.push("先打后抓"):t.push("先抓后打"),e.kahu&&t.push("不卡不胡"),e.dafeng&&t.push("刮大风"),e.zhongse&&t.push("红中算色"),e.loubao&&t.push("楼宝"),e.anbao&&t.push("暗宝"),e.bianka&&t.push("三七边"),e.zhongbao&&t.push("红中当宝"),e.ankedouble&&t.push("暗刻加倍"),e.dianpaobao&&t.push("点炮包付"),e.danka&&t.push("单吊算卡"),t.join(" ")}return""},getwanfaSYMJ:function(){var e=this.conf;if(null!=e){var t=[];return 0==e.moshi?t.push("1圈"):1==e.moshi?t.push("2圈"):2==e.moshi?t.push("4圈"):3==e.moshi?t.push("8圈"):4==e.moshi?t.push("锅100(筹码)"):5==e.moshi&&t.push("锅200(筹码)"),0==e.fengding&&t.push("封顶自摸60点炮100"),e.qidui&&t.push("七对(先报听)"),e.guodan&&t.push("过蛋儿"),t.join(" ")}return""},getwanfaChangchunMJ:function(){var e=this.conf;if(null!=e){var t=[];return t.push(e.quanshu+"圈"),0==e.suanfen?t.push("一分算法"):1==e.zhifu&&t.push("335分算法"),0==e.fengdan?t.push("三风蛋"):1==e.zhifu&&t.push("四风蛋"),e.xiaojifeidan&&t.push("小鸡飞蛋"),e.bukepinghu&&t.push("不可平胡"),e.keduanmen&&t.push("不可平胡"),e.zhandan&&t.push("攒蛋"),e.dianpaopeifu&&t.push("点炮包三家"),e.suanzhanli&&t.push("下蛋算战立"),t.join(" ")}return""},getWanfaYPEL:function(){var e=this.conf;if(e&&null!=e.maxGames){var t=[];return t.push(e.maxGames+"局"),t.push(e.fengding+"封顶"),t.push(e.jingding+"金顶"),t.push("一癞到底"),1==e.isAA?t.push("每人支付"):0==e.isAA&&t.push("房主支付"),t.join(" ")}return""},getWanfaKWX:function(){var e=this.conf;if(e&&null!=e.maxGames){var t=[];return t.push(e.maxGames+"局"),"0"==e.dingPiao&&t.push("自由选漂"),"8"==e.fengDing?t.push("8番"):"16"==e.fengDing&&t.push("16番"),0==e.qiuanPinDao?t.push("全频道"):1==e.qiuanPinDao&&t.push("半频道"),0==e.maiMa?t.push(" "):1==e.maiMa?t.push("自摸买马"):2==e.maiMa&&t.push("亮倒自摸买马"),e.paoQiaMoBa&&t.push("跑恰摸八"),e.chaJiao&&t.push("查叫"),e.buFenLiang&&t.push("部分亮"),e.liangLess12&&t.push("少于12张不能明"),e.shuKan&&t.push("数坎"),1==e.isAA?t.push("每人支付"):0==e.isAA&&t.push("房主支付"),t.join(" ")}return""},initHandlers:function(){var e=this;cc.vv.net.addHandler("xlch_join_result",function(e){console.log("xlch_join_result:-----")}),cc.vv.net.addHandler("login_finished",function(e){console.log("login_finished:-----")}),cc.vv.net.addHandler("exit_result",function(t){console.log("exit_result:-----"),e.roomId=null,e.turn=-1,e.dingque=-1,e.dingpiao=-1,e.isDingQueing=!1,e.isDingPiaoing=!1,e.seats=null}),cc.vv.net.addHandler("exit_notify_push",function(t){console.log("exit_notify_push:-----");var n=t;if(n==cc.vv.userMgr.userId)e.roomId=null,e.turn=-1,e.dingque=-1,e.dingpiao=-1,e.isDingQueing=!1,e.isDingPiaoing=!1,e.isHuanSanZhang=!1,e.seats=null;else{var i=e.getSeatByID(n);null!=i&&(i.userid=0,i.name="",e.dispatchEvent("user_state_changed",i))}}),cc.vv.net.addHandler("game_baopai_push",function(t){console.log("game_baopai_push:-----"),e.dispatchEvent("game_baopai",t)}),cc.vv.net.addHandler("game_huanbao_push",function(t){console.log("game_huanbao_push:-----");e.dispatchEvent("game_huanbao",null)}),cc.vv.net.addHandler("game_fenzhang_push",function(t){console.log("game_fenzhang_push:-----"),e.dofenzhang()}),cc.vv.net.addHandler("game_dabao_notify_push",function(t){console.log("game_dabao_notify_push:-----"),e.dispatchEvent("game_dabao",t)}),cc.vv.net.addHandler("game_huanbao_notify_push",function(t){console.log("game_huanbao_notify_push:-----");e.dispatchEvent("game_huanbao",null)}),cc.vv.net.addHandler("game_baopai_notify_push",function(t){console.log("game_baopai_notify_push:-----"),e.dispatchEvent("game_baopai",t)}),cc.vv.net.addHandler("xiadan_notify_push",function(t){console.log("xiadan_notify_push:-----"),console.log(t);var n=t.userid,i=e.getSeatIndexByID(n);e.doXiaDan(i,t,t.ting)}),cc.vv.net.addHandler("budan_notify_push",function(t){console.log("budan_notify_push:-----"),console.log(t);var n=t.userid,i=e.getSeatIndexByID(n);e.doBuDan(i,t,t.ting)}),cc.vv.net.addHandler("dan_notify_push",function(t){console.log("dan_notify_push:-----"),console.log(t);var n=t.userid,i=e.getSeatIndexByID(n);e.doYaoJiDan(i,t)}),cc.vv.net.addHandler("dismiss_push",function(t){console.log("dismiss_push:-----"),e.roomId=null,e.turn=-1,e.dingque=-1,e.dingpiao=-1,e.isDingQueing=!1,e.isDingPiaoing=!1,e.seats=null}),cc.vv.net.addHandler("disconnect",function(e){console.log("disconnect:-----");var t=cc.director.getScene().name;"hall"==t?cc.vv.hall.onSecuritySettingPrompt("你已掉线，请重新登陆"):(t="xlmjgame")&&cc.vv.MJGame.onSecuritySettingPrompt("你已掉线，请重新登陆"),cc.game.restart()}),cc.vv.net.addHandler("new_user_comes_push",function(t){console.log("new_user_comes_push:-----");for(var n=0;n<t.length;n++)e.seats[n]=t[n],console.log("正在创建场景：-+-+-"+t[n].heading),console.log("正在创建场景：-+-+-+-+-+-"+t[n]);e.seatIndex=e.getSeatIndexByID(cc.vv.userMgr.userId),cc.vv.MJRoom.initSeats(),cc.vv.MJGame.display_Seek_Interface_Info()}),cc.vv.net.addHandler("user_state_push",function(t){console.log("user_state_push:-----"),console.log(t);var n=t.userid,i=e.getSeatByID(n);i.online=t.online,e.dispatchEvent("user_state_changed",i)}),cc.vv.net.addHandler("quxiaoliang_result_push",function(t){console.log("quxiaoliang_result_push:-----");var n=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],i=n.holds[n.holds.length-1];n.holds=t;var a=n.holds.indexOf(i);-1!=a&&(n.holds.splice(a,1),n.holds.push(i)),n.kou=[],n.koupaiSize=0,e.dispatchEvent("quxiaoliang_result",n)}),cc.vv.net.addHandler("user_ready_push",function(t){console.log("user_ready_push:-----"),console.log(t);var n=t.userid,i=e.getSeatByID(n);i.ready=t.ready,e.dispatchEvent("user_state_changed",i)}),cc.vv.net.addHandler("game_holds_push",function(t){console.log("game_holds_push:-----");var n=e.seats[e.seatIndex];console.log("服务器告诉我的手牌game_holds_push:"+t),n.holds=t;for(var i=0;i<e.seats.length;++i){var a=e.seats[i];null==a.folds&&(a.folds=[]),null==a.pengs&&(a.pengs=[]),null==a.angangs&&(a.angangs=[]),null==a.diangangs&&(a.diangangs=[]),null==a.wangangs&&(a.wangangs=[]),null==a.dxnbgangs&&(a.dxnbgangs=[]),null==a.zfbzancount&&(a.zfbzancount=0),null==a.chi&&(a.chi=[]),null==a.kou&&(a.kou=[]),null==a.zfbdan&&(a.zfbdan=[]),null==a.dxnbdan&&(a.dxnbdan=[]),null==a.yaodan&&(a.yaodan=[]),null==a.jiudan&&(a.jiudan=[]),null==a.yaoji&&(a.yaoji=[]),a.ready=!1}}),cc.vv.net.addHandler("game_begin_push",function(t){console.log("game_begin_push:-----"),console.log(t),cc.is_pure_begin=!0,e.button=t,e.turn=e.button,e.gamestate="playing",e.dispatchEvent("game_begin")}),cc.vv.net.addHandler("game_laipi_push",function(t){console.log("game_laipi_push:-----"),cc.vv.pi=t.pi,cc.vv.lai=t.lai,e.dispatchEvent("game_laipi")}),cc.vv.net.addHandler("liangpai_result_push",function(t){console.log("liangpai_result_push:-----");var n=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex];n.kou=t,n.koupaiSize=n.kou.length;for(var i=0;i<n.koupaiSize;i++)e.dokou(n,n.kou[i]);e.dispatchEvent("my_kou_notify",n)}),cc.vv.net.addHandler("liangpai_notify_push",function(t){console.log("liangpai_notify_push:-----");var n=e.getSeatIndexByID(t.userid),i=e.seats[n];i.liangpai=!0,e.doming(n),n!=cc.vv.gameNetMgr.seatIndex&&(i.holds=t.holds,i.koupaiSize=t.koupai,i.holdlen=t.holdlen,e.dispatchEvent("other_kou_notify",i))}),cc.vv.net.addHandler("liangpai_ting_push",function(t){console.log("liangpai_ting_push:-----"),e.dispatchEvent("liangpai_ting",t)}),cc.vv.net.addHandler("gang_score_push",function(t){console.log("gang_score_push:-----");for(var n=t,i=0;i<n.length;i++){var t={userid:n[i].userid,score:n[i].score};e.dispatchEvent("show_zongfen",t)}}),cc.vv.net.addHandler("baoting_notify_push",function(t){console.log("baoting_notify_push:-----");var n=t.userid,i=e.getSeatIndexByID(n);e.doting(i),e.doChupai(i,t.pai)}),cc.vv.net.addHandler("game_sync_push",function(t){console.log("game_sync_push:-----"),cc.vv.MJGame._Whether_play=!1,cc.vv.Peng_Gang_WhetherPlay=!1,cc.vv.Hu_WhetherPlay=!1,e.numOfMJ=t.numofmj,e.gamestate=t.state,console.log("当前牌桌状态--------------------："+t.state),e.turn=t.turn,e.button=t.button,e._dongjia=t.dong,e.chupai=t.chuPai,e._changeBrand=t.huanmethod,e.baopai=t.baopai;for(var n=0;n<4;++n){var i=e.seats[n],a=t.seats[n];if(i.holds=a.holds,i.folds=a.folds,i.pigang=a.pigang,i.laigang=a.laigang,i.angangs=a.angangs,i.diangangs=a.diangangs,i.wangangs=a.wangangs,i.pengs=a.pengs,i.dxnbgangs=a.dxnbgangs,i.zfbzancount=a.zfbzancount,i.dingque=a.dingque,i.chi=a.chis,i.hued=a.hued,i.fan=a.fan,i.score=a.score,i.jiangyise=a.jiangyise,i.qingyise=a.qingyise,i.pattern=a.pattern,i.daxiaoxue=a.daxiaoxue,i.quanqiuren=a.quanqiuren,i.isganghu=a.isganghu,i.dongzhang=a.dongzhang,i.isying=a.isying,i.iszimo=a.iszimo,i.dingpiao=a.piao,i.liangpai=a.liangpai,i.kou=a.kous,i.ting=a.ting,i.koupaiSize=a.kouLen,i.holdlen=a.holdlen,i.huanpais=a.huanpais,i.huinfo=a.huList,i.crown=a.crown?a.crown:i.crown,i.tinged=a.baoting,i.zfbdan=a.zfbdan,i.dxnbdan=a.dxnbdan,i.yaodan=a.yaodan,i.jiudan=a.jiudan,i.yaoji=a.yaoji,n==e.seatIndex){e.dingque=a.dingque;for(var c=0;c<a.hupaiList.length;c++)cc.vv.MJGame.settlementInfo_display(a.hupaiList[c])}cc.vv.onpenggang&&cc.vv.onpenggang.onPengGangChanged(i)}"dingque"==e.gamestate?(e.isDingQueing=!0,cc.vv.DingQue.showDingQueChoice()):"huanpai"==e.gamestate?(e.isHuanSanZhang=!0,cc.vv.HuanSanZhang.showHuanpai()):"dingpiao"==e.gamestate&&(e.isDingPiaoing=!0),e.dispatchEvent("game_sync")}),cc.vv.net.addHandler("guodan_notify_push",function(t){console.log("guodan_notify_push:-----");var n=cc.vv.gameNetMgr.getSeatIndexByID(t.userid);e.doguodan(n,t.pai)}),cc.vv.net.addHandler("game_dingque_push",function(t){console.log("game_dingque_push:-----"),setTimeout(function(){cc.vv.QueYiMen=t,e.isDingQueing=!0,e.isHuanSanZhang=!1,e.dispatchEvent("game_dingque",t)},2500)}),cc.vv.net.addHandler("game_dingpiao_push",function(t){console.log("game_dingpiao_push:-----"),e.dodingpiao()}),cc.vv.net.addHandler("game_huanpai_push",function(t){console.log("game_huanpai_push:-----"),setTimeout(function(){cc.vv.SanZhangPai=t,e.isHuanSanZhang=!0,e.dispatchEvent("game_huanpai",t)},6500)}),cc.vv.net.addHandler("game_huanpai_finish_push",function(t){console.log("game_huanpai_finish_push:-----"),e.isHuanSanZhang=!0,e.dispatchEvent("game_huanpai_finish",t)}),cc.vv.net.addHandler("hangang_notify_push",function(t){console.log("hangang le!!!!!!!!!!!!!!!"),console.log(t),e.dispatchEvent("hangang_notify",t)}),cc.vv.net.addHandler("kou_notify_push",function(t){var n=e.getSeatIndexByID(t.userid);e.seats[n].koupaiSize=t.koulen}),cc.vv.net.addHandler("game_action_push",function(t){setTimeout(function(){e.curaction=t,e.dispatchEvent("game_action",t),console.log("game_action_push"),console.log(t)},1100)}),cc.vv.net.addHandler("hb_data",function(e){cc.vv.MJRoom._SendHeartNum=0;var t=new Date;cc.vv.MJRoom._signalTimeMiddle=t.getTime(),cc.vv.MJRoom.ShowSignal(!0)}),cc.vv.net.addHandler("xiadan_holdpai",function(t){e.dispatchEvent("xiadan_action",t),console.log(t)}),cc.vv.net.addHandler("game_lianzhuang_push",function(t){console.log(t),console.log("game_lianzhuang_push"),e.lianzhuang=t}),cc.vv.net.addHandler("game_chupai_push",function(t){setTimeout(function(){console.log("game_chupai_push");var n=t,i=e.getSeatIndexByID(n);e.doTurnChange(i)},1700)}),cc.vv.net.addHandler("game_num_push",function(t){e.numOfGames=t,e.dispatchEvent("game_num",t)}),cc.vv.net.addHandler("game_dice_push",function(t){e._dingzhuang=t,e.dispatchEvent("game_dice",t)}),cc.vv.net.addHandler("game_final_dice_push",function(t){e._Subsequentdingzhuang=t,e.dispatchEvent("game_final_dice",t)}),cc.vv.net.addHandler("game_over_push",function(t){if(console.log("game_over_push"),console.log(t),cc.vv.tingpaiArr={},cc.vv.MJGame._preservation_hupaai={},t)for(var n=0;n<e.seats.length;n++)e.seats[n].ready=!1,e.dispatchEvent("user_state_changed",e.seats[n]);e.dispatchEvent("game_over",t)}),cc.vv.net.addHandler("mj_count_push",function(t){console.log("mj_count_push"),e.numOfMJ=t,e.dispatchEvent("mj_count",t)}),cc.vv.net.addHandler("hu_push",function(t){console.log(t),e.doHu(t)}),cc.vv.net.addHandler("game_chupai_notify_push",function(t){var n=t.userid,i=t.pai,a=e.getSeatIndexByID(n);e.doChupai(a,i)}),cc.vv.net.addHandler("game_mopai_push",function(t){setTimeout(function(){console.log("game_mopai_push"),e.doMopai(e.seatIndex,t)},1500)}),cc.vv.net.addHandler("game_liang_mopai_push",function(t){var n=e.getSeatIndexByID(t.userid);e.seatIndex!=n&&e.LiangPaidoMopai(n,t.pai)}),cc.vv.net.addHandler("guo_notify_push",function(t){var n=t.userid,i=t.pai,a=e.getSeatIndexByID(n);e.doGuo(a,i)}),cc.vv.net.addHandler("guo_result",function(t){console.log("guo_result"),e.dispatchEvent("guo_result",t)}),cc.vv.net.addHandler("guohu_push",function(t){console.log("guohu_push"),e.dispatchEvent("push_notice",{info:"过胡",time:1.5})}),cc.vv.net.addHandler("game_huanpai_result_push",function(t){t=2,e._changeBrand=t,console.log("game_huanpai_result_push");var n="";n=0==t?"换对家牌":1==t?"换下家牌":"换上家牌",e.dispatchEvent("game_huanpai_result"),e.dispatchEvent("push_notice",{info:n,time:2})}),cc.vv.net.addHandler("peng_notify_push",function(t){cc.vv.Peng_Gang_WhetherPlay=!0,console.log("peng_notify_push"),console.log(t);var n=t.userid,i=(t.pai,e.getSeatIndexByID(n));e.doPeng(i,t.pai,t.ting)}),cc.vv.net.addHandler("chi_notify_push",function(t){console.log("chi_notify_push"),console.log(t);var n=t.userid,i=e.getSeatIndexByID(n);e.doChi(i,t.pai,t.pai1,t.pai2,t.ting)}),cc.vv.net.addHandler("gang_notify_push",function(t){cc.vv.Peng_Gang_WhetherPlay=!0,console.log("gang_notify_push"),console.log(t);var n=t.userid,i=t.pai,a=e.getSeatIndexByID(n);e.doGang(a,i,t.gangtype)}),cc.vv.net.addHandler("liangzan_notify_push",function(t){console.log("liangzan_notify_push");var n=t.userid,i=e.getSeatIndexByID(n);e.doliangzan(i)}),cc.vv.net.addHandler("action_wait_push",function(t){e.dispatchEvent("action_wait",t)}),cc.vv.net.addHandler("game_dingque_notify_push",function(t){e.dispatchEvent("game_dingque_notify",t)}),cc.vv.net.addHandler("game_dingpiao_notify_push",function(t){e.dispatchEvent("game_dingpiao_notify",t)}),cc.vv.net.addHandler("game_dingque_finish_push",function(t){for(var n=0;n<t.length;++n)e.seats[n].dingque=t[n];e.dispatchEvent("game_dingque_finish",t)}),cc.vv.net.addHandler("game_dingpiao_finish_push",function(t){for(var n=0;n<t.length;++n)e.seats[n].dingpiao=t[n];e.dispatchEvent("game_dingpiao_finish",t)}),cc.vv.net.addHandler("maima_push",function(t){e.dispatchEvent("maima_push",t)}),cc.vv.net.addHandler("game_tingmap_push",function(e){cc.vv.tingpaiArr=e.tingTable,cc.vv.DCHMJGame&&(cc.vv.DCHMJGame._tingData=e)}),cc.vv.net.addHandler("chat_push",function(t){e.dispatchEvent("chat_push",t)}),cc.vv.net.addHandler("quick_chat_push",function(t){e.dispatchEvent("quick_chat_push",t)}),cc.vv.net.addHandler("emoji_push",function(t){e.dispatchEvent("emoji_push",t)}),cc.vv.net.addHandler("dismiss_notice_push",function(t){console.log("dismiss_notice_push"),console.log(t),e.curIsDissolve=t,e.dispatchEvent("dissolve_notice",t)}),cc.vv.net.addHandler("dismiss_cancel_push",function(t){e.dispatchEvent("dismiss_cancel_push",t),cc.vv.gameNetMgr.curIsDissolve=null,e.dispatchEvent("dissolve_cancel")}),cc.vv.net.addHandler("voice_msg_push",function(t){e.dispatchEvent("voice_msg",t)}),cc.vv.net.addHandler("game_seat_score_push",function(e){cc.vv.MJGame.settlementInfo_display(e)}),cc.vv.net.addHandler("exit_room_result",function(t){var n=t;if(n==cc.vv.userMgr.userId)e.roomId=null,e.turn=-1,e.dingque=-1,e.dingpiao=-1,e.isDingQueing=!1,e.isDingPiaoing=!1,e.isHuanSanZhang=!1,e.seats=null,cc.vv.TimePointer._time=-1,cc.vv.TimePointer._alertTime=-1,setTimeout(function(){cc.director.loadScene("hall")},200);else{var i=e.getSeatByID(n);null!=i&&(i.userid=0,i.name="",e.dispatchEvent("user_state_changed",i))}}),cc.vv.net.addHandler("game_tuoguan_result",function(e){cc.vv.MJGame.game_tuoguan_result(e)}),cc.vv.net.addHandler("game_tuoguan_cancel_result",function(e){cc.vv.MJGame.game_tuoguan_cancel_result(e)}),cc.vv.net.addHandler("action_notify_push",function(t){if(t.isgang){var n=t.userId,i=t.pai,a=e.getSeatIndexByID(n);e.doGang(a,i,t.gangtype,t.scoreList)}else e.dispatchEvent("hupai",t)}),cc.vv.net.addHandler("game_holds_push_all",function(t){for(var n=0;n<t.length;n++)e.seats[n].holds=t[n],cc.vv.MJGame.initOtherMahjongs(e.seats[n])}),cc.vv.net.addHandler("game_coin_push",function(e){var t=cc.vv.gameNetMgr.getSeatIndexByID(e.userid),n=cc.vv.gameNetMgr.getLocalIndex(t),i=e.coin;cc.vv.gameNetMgr.seats[t].score=i,cc.vv.MJRoom._seats2[n].setScore(i)}),cc.vv.net.addHandler("game_seat_renshu_push",function(t){e.dispatchEvent("game_seat_renshu",t)}),cc.vv.net.addHandler("game_renshu_push",function(t){e.dispatchEvent("game_renshu",t)})},doting:function(e){this.seats[e].tinged=!0,e==this.seatIndex&&(this._zidongchupai=!0,this.gamestate=""),this.dispatchEvent("user_state_changed",this.seats[e]),this.dispatchEvent("ting_notify",e)},doguodan:function(e,t){var n={seatIndex:e,pai:t};this.dispatchEvent("guodan_notify",n)},doChangeRollingSaiZi:function(e){this.dispatchEvent("ChangeRollingSaiZi",e)},doSubsequentChangeRollingSaiZi:function(e){this.dispatchEvent("SubsequentChangeRollingSaiZi",e)},doHu:function(e){this.dispatchEvent("hupai",e)},doming:function(e){this.dispatchEvent("kou_holder_notify",e)},doGuo:function(e,t){var n=this.seats[e];n.folds.push(t),this.dispatchEvent("guo_notify",n)},dofenzhang:function(){this._isFenzhang=!0;this.dispatchEvent("game_fenzhang",null)},doMopai:function(e,t){if(null!=this.seats){var n=this.seats[e];n.holds&&(n.holds.push(t),this.dispatchEvent("game_mopai",{seatIndex:e,pai:t})),console.log("摸完牌之后的手牌：mogame_mopai:"+n.holds)}},LiangPaidoMopai:function(e,t){var n=this.seats[e];n.holds&&(n.holds.push(t),this.dispatchEvent("LiangPaigame_mopai",{seatIndex:e,pai:t}))},dodingpiao:function(){this.isDingPiaoing=!0,this.dispatchEvent("game_dingpiao")},objSize:function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},CustomTimer:function(e){for(var t=new Date,n=t.getTime()+e;;)if((t=new Date).getTime()>n)return},doChupai:function(e,t){this.chupai=t;var n=this.seats[e];if(n.holds){var i=n.holds.indexOf(t);-1!=i&&n.holds.splice(i,1)}this.dispatchEvent("game_chupai_notify",{seatData:n,pai:t}),console.log("出完牌之后的手牌：game_chupai_notify:"+n.holds)},doPeng:function(e,t,n){var i=this.seats[e];if(i.holds)for(var a=0;a<2;++a){var c=i.holds.indexOf(t);-1!=c&&i.holds.splice(c,1)}i.pengs.push(t);var o={seatData:i,notshowchiEfx:n};n&&this.doting(e,13),this.dispatchEvent("peng_notify",o),console.log("碰完牌之后的手牌：peng_notify:"+i.holds)},dokou:function(e,t){if(e.holds)for(var n=0;n<3;++n){var i=e.holds.indexOf(t);-1!=i&&e.holds.splice(i,1)}},doChi:function(e,t,n,i,a){var c=this.seats[e];if(c.holds){var o=c.holds.indexOf(n);-1!=o&&c.holds.splice(o,1),-1!=(o=c.holds.indexOf(i))&&c.holds.splice(o,1)}var s=c.chi;s.push(t),s.push(n),s.push(i);var r={seatData:c,notshowchiEfx:a};a&&this.doting(e,12),this.dispatchEvent("chi_notify",r)},doXiaDan:function(e,t,n){var i=this.seats[e];if(i.holds)for(var a=0;a<t.xiadan.length;a++){var c=i.holds.indexOf(t.xiadan[a].pai);-1!=c&&i.holds.splice(c,1)}"dnxb"==t.name&&(i.dxnbdan=t.xiadan),"zfb"==t.name&&(i.zfbdan=t.xiadan),"yaodan"==t.name&&(i.yaodan=t.xiadan),"jiudan"==t.name&&(i.jiudan=t.xiadan);var t={seatData:i,notshowchiEfx:n};this.dispatchEvent("xiadan_notify",t)},doHuiFangXiaDan:function(e,t,n,i,a,c){var o=this.seats[e];if(o.holds){var s=o.holds.indexOf(t);-1!=s&&o.holds.splice(s,1),-1!=(s=o.holds.indexOf(n))&&o.holds.splice(s,1),-1!=(s=o.holds.indexOf(i))&&o.holds.splice(s,1),-1!=(s=o.holds.indexOf(a))&&o.holds.splice(s,1)}var r="";0!=t&&9!=t&&18!=t||(r="yaodan"),8!=t&&17!=t&&26!=t||(r="jiudan"),27!=t&&29!=t&&31!=t||(r="zfb"),33!=t&&35!=t&&37!=t&&39!=t||(r="dnxb");var l=[],h={pai:t,count:1};l.push(h),h={pai:n,count:1},l.push(h),h={pai:i,count:1},l.push(h),-1!=a&&(h={pai:a,count:1},l.push(h)),"dnxb"==r&&(o.dxnbdan=l),"zfb"==r&&(o.zfbdan=l),"yaodan"==r&&(o.yaodan=l),"jiudan"==r&&(o.jiudan=l);var g={seatData:o,notshowchiEfx:c};this.dispatchEvent("xiadan_notify",g)},doBuDan:function(e,t,n){var i=this.seats[e];if(i.holds){var a=i.holds.indexOf(t.pai);-1!=a&&i.holds.splice(a,1)}if("yaoji"!=t.name){"dnxb"==t.name&&(i.dxnbdan=t.xiadan),"zfb"==t.name&&(i.zfbdan=t.xiadan),"yaodan"==t.name&&(i.yaodan=t.xiadan),"jiudan"==t.name&&(i.jiudan=t.xiadan);var t={seatData:i,notshowchiEfx:n};this.dispatchEvent("budan_notify",t)}else this.doYaoJiDan(e,t)},doHuiFangBuDan:function(e,t,n){var i=!1,a=this.seats[e];if(a.holds){var c=a.holds.indexOf(t);-1!=c&&a.holds.splice(c,1)}var o="";0!=t&&9!=t&&18!=t||(o="yaodan"),8!=t&&17!=t&&26!=t||(o="jiudan"),27!=t&&29!=t&&31!=t||(o="zfb"),33!=t&&35!=t&&37!=t&&39!=t||(o="dnxb");for(s=0;s<a.dxnbdan.length;s++){if(a.dxnbdan[s].pai==t){a.dxnbdan[s].count+=1,i=!0;break}if(9==a.dxnbdan[s].pai){a.dxnbdan[s].pai=t,a.dxnbdan[s].count=1,i=!0;break}}for(s=0;s<a.zfbdan.length;s++){if(a.zfbdan[s].pai==t){a.zfbdan[s].count+=1,i=!0;break}if(9==a.zfbdan[s].pai){a.zfbdan[s].pai=t,a.zfbdan[s].count=1,i=!0;break}}for(s=0;s<a.yaodan.length;s++)a.yaodan[s].pai==t&&(a.yaodan[s].count+=1,i=!0);for(var s=0;s<a.jiudan.length;s++){if(a.jiudan[s].pai==t){a.jiudan[s].count+=1,i=!0;break}if(9==a.jiudan[s].pai){a.jiudan[s].pai=t,a.jiudan[s].count=1,i=!0;break}}if(i||9!=t||this.doHuiFangYaoJiDan(e,-999),"dnxb"==o&&!i){var r={pai:t,count:1};a.dxnbdan.push(r)}var l={seatData:a,notshowchiEfx:n};this.dispatchEvent("budan_notify",l)},doHuiFangYaoJiDan:function(e,t){var n=this.seats[e];if(n.holds&&-999!=t){var i=n.holds.indexOf(9);-1!=i&&n.holds.splice(i,1)}if(n.yaoji){var a={pai:9,count:0};n.yaoji.push(a)}-999!=t?n.yaoji[0].count=t:n.yaoji[0].count+=1;var c={seatData:n};this.dispatchEvent("yaojidan_notify",c)},doYaoJiDan:function(e,t){var n=this.seats[e];"yaoji"==t.name&&(n.yaoji=t.xiadan);var t={seatData:n};this.dispatchEvent("yaojidan_notify",t)},getGangType:function(e,t){if(t==cc.vv.pi)return"pigang";if(t==cc.vv.lai)return"laigang";if(999==t)return"dxnbgang";if(-1!=e.pengs.indexOf(t))return"wangang";for(var n=0,i=0;i<e.holds.length;++i)e.holds[i]==t&&n++;return 3==n?"diangang":"angang"},doLoginSence:function(){console.log("选择创建场景类型 = "+cc.vv._Gametype),"xlmjgame"!=cc.director.getScene().name&&cc.director.loadScene("xlmjgame",function(){cc.vv.net.send("start_matching")})},doGang:function(e,t,n,i){var a=this.seats[e];n||(n=this.getGangType(a,t));var c=function(e,t){if(e.holds)for(n=0;n<4&&-1!=(i=e.holds.indexOf(t));++n)e.holds.splice(i,1);if(e.kou)for(var n=0;n<e.kou.length;n++){var i=e.kou.indexOf(t);if(-1==i)break;e.kou.splice(i,1)}},o=function(e,t){if(e.holds){var n=e.holds.indexOf(t);-1!=n&&e.holds.splice(n,1)}};if("pigang"==n)a.pigang||(a.pigang=0),a.pigang++,o(a,t);else if("laigang"==n)a.laigang||(a.laigang=0),a.laigang++,o(a,t);else if("wangang"==n){if(-1!=a.pengs.indexOf(t)){var s=a.pengs.indexOf(t);-1!=s&&a.pengs.splice(s,1)}a.wangangs.push(t),c(a,t)}else if("angang"==n)a.angangs.push(t),c(a,t);else if("diangang"==n)a.diangangs.push(t),c(a,t);else if("dxnbgang"==n){a.dxnbgangs.push(t);for(var r=[30,31,32,33],l=0;l<r.length;l++)o(a,r[l])}this.dispatchEvent("gang_notify",{seatData:a,gangtype:n,scoreList:i}),console.log("杠完牌之后的手牌，杠牌类型"+n+"：gang_notify:"+a.holds)},doliangzan:function(e){var t=this.seats[e];t.zfbzancount++;for(var n=[27,28,29],i=0;i<n.length;i++)!function(e,t){if(e.holds){var n=e.holds.indexOf(t);-1!=n&&e.holds.splice(n,1)}}(t,n[i]);this.dispatchEvent("liangzan_notify",{seatData:t,gangtype:"liangzan"})},doTurnChange:function(e){var t={last:this.turn,turn:e};this.turn=e,this.dispatchEvent("game_chupai",t)},connectGameServer:function(e){cc.vv.net.ip=cc.vv.http.active_ip+":"+e.port,console.log(cc.vv.net.ip);cc.vv.wc.show("正在进入房间"),cc.vv.net.connect(function(){console.log("房间连接失败成功");var t={token:e.token,roomid:e.roomid,time:e.time,sign:e.sign};cc.vv.gameNetMgr._token=e.token,cc.vv.net.send("login",t)},function(){console.log("房间连接失败"),cc.vv.wc.hide(),cc.director.loadScene("hall")})}}),cc._RF.pop()},{}],GameOver:[function(e,t,n){"use strict";cc._RF.push(t,"facfdljnx5F+rFDAq5Qbmqa","GameOver"),cc.Class({extends:cc.Component,properties:{_gameover:null,_gameresult:null,_seats:[],_isGameEnd:!1,_pingju:null,_win:null,_lose:null,_btnReady:null,_baopaiDisplay:null,_GB_game_over:null,__startGame:null},onLoad:function(){if(console.log("开始加载 GameOver.js"),null!=cc.vv&&null!=cc.vv._Gametype){cc.vv.game_over=this;this._gameover=this.node.getChildByName("game_over"),this._gameover&&(this._gameover.active=!1),this._btnReady=this._gameover.getChildByName("btnReady"),cc.vv.utils.addClickEvent(this._btnReady,this.node,"GameOver","onBtnReadyClicked"),this._GB_game_over=this._gameover.getChildByName("btn_Close"),cc.vv.utils.addClickEvent(this._GB_game_over,this.node,"GameOver","onBtnGBgameover"),this._startGame=this.node.getChildByName("startGame"),cc.vv.utils.addClickEvent(this._startGame,this.node,"GameOver","onBtnStartGame");for(var e=this._gameover.getChildByName("result_list"),t=1;t<=4;++t){var n="s"+t,i=e.getChildByName(n),a={};a.over_win_bj=i.getChildByName("over_win_bj"),a.over_pingju_bj=i.getChildByName("over_pingju_bj"),a.over_lose_bj=i.getChildByName("over_lose_bj"),a.title_win=i.getChildByName("title_win"),a.title_pingju=i.getChildByName("title_pingju"),a.title_lose=i.getChildByName("title_lose"),a.iocn=i.getChildByName("iocn").getComponent(cc.Sprite),a.VIP_title=i.getChildByName("VIP_title"),a.username=i.getChildByName("username").getComponent(cc.Label),a.theTotalScore=i.getChildByName("theTotalScore"),a.ScrollView_content=i.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),this._seats.push(a)}var c=this;this.node.on("game_over",function(e){var e=e.detail;setTimeout(function(){c.onGameOver(e)},3e3)}),this.node.on("game_end",function(e){c._isGameEnd=!0}),console.log("加载完成 GameOver.js")}},onGameOver:function(e){"XL_MJGame"==cc.vv._Gametype&&this.onGameOver_XLCH(e)},onGameOver_XLCH:function(e){if(console.log(e),e&&0!=e.length){this._gameover.active=!0;for(var t=0;t<cc.vv.gameNetMgr.seats.length;++t){var n=cc.vv.gameNetMgr.seats[t],i=this._seats[t],a=e[n.userid],c=this.finalScoring_Calculation(a);i.over_win_bj.active=!1,i.over_pingju_bj.active=!1,i.over_lose_bj.active=!1,i.title_win.active=!1,i.title_pingju.active=!1,i.title_lose.active=!1,i.username.string=cc.vv.gameNetMgr.seats[t].name;var o=i.theTotalScore.getChildByName("win_label"),s=i.theTotalScore.getChildByName("lose_label");o.active=!1,s.active=!1;var r=Math.abs(c);r>=1e8?r=parseInt(r/1e8)+"亿":r>=1e6&&(r=parseInt(r/1e4)+"万"),c>0?(i.over_win_bj.active=!0,i.title_win.active=!0,i.username.node.color=new cc.Color(254,236,209),o.getComponent(cc.Label).string="+"+r,o.active=!0):c<0?(i.over_lose_bj.active=!0,i.title_lose.active=!0,i.username.node.color=new cc.Color(228,228,228),s.getComponent(cc.Label).string="-"+r,s.active=!0):(i.over_pingju_bj.active=!0,i.title_pingju.active=!0,i.username.node.color=new cc.Color(209,235,254),s.getComponent(cc.Label).string=r,s.active=!0),n.heading&&cc.loader.loadRes(n.heading,cc.SpriteFrame,function(e,t){e||(i.iocn.spriteFrame=t)});for(var l=0;l<i.ScrollView_content.children.length;l++)i.ScrollView_content.children[l].active=!1;for(var h=0,g=0;g<a.length;g++){var d=a[g],u=i.ScrollView_content.children[h];i.ScrollView_content.height=170*a.length,u.getChildByName("bottom_tiao_win").active=!1,u.getChildByName("bottom_tiao_pingju").active=!1,u.getChildByName("bottom_tiao_lose").active=!1,u.getChildByName("beishu_fan").getComponent(cc.Label).string=d.fan+"倍",u.getChildByName("score").getComponent(cc.Label).string=d.score;var v=cc.vv.gameNetMgr.getSeatIndexByID(n.userid),m=(cc.vv.gameNetMgr.getSeatIndexByID(d.userId)-v+4)%4,p="";0==m&&(p="三家"),1==m&&(p="下家"),2==m&&(p="对家"),3==m&&(p="上家"),u.getChildByName("position").getComponent(cc.Label).string=p;var _="";"normal"==d.paixing?_="平胡":"duidui"==d.paixing?_="对对胡":"qingyise"==d.paixing?_="清一色":"qidui"==d.paixing?_="七对":"yaojiu"==d.paixing?_="幺九":"jingougou"==d.paixing?_="金钩钩":"qingdui"==d.paixing?_="清对":"qingqidui"==d.paixing?_="清七对":"longqidui"==d.paixing?_="龙七对":"qingyaojiu"==d.paixing?_="清幺九":"qingjingougou"==d.paixing?_="清金钩钩":"jiangjingougou"==d.paixing?_="将金钩钩":"qinglongqidui"==d.paixing&&(_="清龙七对");var f="";d.hujiaozhuanyi&&!d.hu?(f=d.score>0?"呼叫转移":"被呼叫转移",u.getChildByName("paixing_hufa").getComponent(cc.Label).string=f):d.tuishui?(f=d.score>0?"退税":"被退税",u.getChildByName("paixing_hufa").getComponent(cc.Label).string=f):d.chadajiao||d.chahuazhu?(d.chadajiao&&(f=d.score>0?"查大叫":"被查大叫"),d.chahuazhu&&(f=d.score>0?"查花猪":"被查花猪"),u.getChildByName("paixing_hufa").getComponent(cc.Label).string=f):d.isgang?("angang"==d.gangtype?f=d.userId==cc.vv.userMgr.userId?"下雨":"被下雨":"wangang"==d.gangtype?f=d.userId==cc.vv.userMgr.userId?"刮风":"被刮风":"diangang"==d.gangtype&&(f=d.score>0?"刮风":"被刮风"),u.getChildByName("paixing_hufa").getComponent(cc.Label).string=f):(d.zimo?f=d.userId==n.userid?"自摸":"被自摸":d.hu&&(f=d.score>0?"胡":"点炮"),f=f+"("+_,d.gangshanghua&&(f+=",杠上花"),d.hujiaozhuanyi&&(f+=",杠上炮"),d.qiangganghu&&(f+=",抢杠胡"),d.haidilao&&(f+=",海底捞月"),d.gang>0&&(f+=","+d.gang+"杠"),d.gen>0&&(f+=","+d.gen+"根"),u.getChildByName("paixing_hufa").getComponent(cc.Label).string=f+")"),c>0?(u.getChildByName("bottom_tiao_win").active=!0,u.getChildByName("beishu_fan").color=new cc.Color(254,236,209),u.getChildByName("score").color=new cc.Color(254,236,209),u.getChildByName("position").color=new cc.Color(254,236,209),u.getChildByName("paixing_hufa").color=new cc.Color(254,236,209)):c<0?(u.getChildByName("bottom_tiao_pingju").active=!0,u.getChildByName("beishu_fan").color=new cc.Color(228,228,228),u.getChildByName("score").color=new cc.Color(228,228,228),u.getChildByName("position").color=new cc.Color(228,228,228),u.getChildByName("paixing_hufa").color=new cc.Color(228,228,228)):(u.getChildByName("bottom_tiao_lose").active=!0,u.getChildByName("beishu_fan").color=new cc.Color(209,235,254),u.getChildByName("score").color=new cc.Color(209,235,254),u.getChildByName("position").color=new cc.Color(209,235,254),u.getChildByName("paixing_hufa").color=new cc.Color(209,235,254)),h++,u.active=!0}}}},Ishupai:function(e){for(var t=0;t<e.length;t++)if(e[t].hu)return!1;return!0},initPengAndGangs:function(e,t,n,i){var a=null;e._pengandgang.length<=t?(a=cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e._pengandgang.push(a),e.mahjongs.addChild(a)):(a=e._pengandgang[t]).active=!0;for(var c=0;c<a.childrenCount;++c){var o=a.children[c].getComponent(cc.Sprite);if("fengDan"!=o.node.name){var s=o.node.getChildByName("kouTag");if(s&&(s.active=!1),"gang"==o.node.name){var r="peng"!=i&&"kous"!=i&&"zfbzan"!=i;o.node.active=r,"angang"==i?cc.vv.mahjongmgr.getEmptySpriteFrame(o,"myself"):cc.vv.mahjongmgr.getSpriteFrameByMJID(o,"B_",n)}else cc.vv.mahjongmgr.getSpriteFrameByMJID(o,"B_",n),o.node.getChildByName("updateZhang").active=!1}else o.node.getChildByName("updateZhang").active=!1,o.node.active=!1}var l=this.intzhangshu(t,e._pengandgang);a.x=55*l+5*t},initChiAndGangs:function(e,t,n,i){var a=null;e._pengandgang.length<=t?(a=cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e._pengandgang.push(a),e.mahjongs.addChild(a)):(a=e._pengandgang[t]).active=!0;for(var c=0,o=0;o<a.childrenCount;++o){var s=a.children[o].getComponent(cc.Sprite);"fengDan"!=s.node.name?"gang"==s.node.name?s.node.active=!1:(s.node.getChildByName("piTag").active=!1,s.node.getChildByName("laiTag").active=!1,s.node.getChildByName("updateZhang").active=!1,cc.vv.mahjongmgr.getSpriteFrameByMJID(s,"B_",n[c++])):(s.node.getChildByName("updateZhang").active=!1,s.node.active=!1)}var r=this.intzhangshu(t,e._pengandgang);a.x=55*r+5*t},initXiaDan:function(e,t,n,i){var a=null;e._pengandgang.length<=t?(a=cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e._pengandgang.push(a),e.mahjongs.addChild(a)):(a=e._pengandgang[t]).active=!0;for(var c=0,o=0;o<a.childrenCount;++o){var s=a.children[o].getComponent(cc.Sprite),r=a.children[o];if("fengDan"==s.node.name&&n.length<4)s.node.active=!1;else if("gang"==s.node.name)s.node.active=!1;else{s.node.getChildByName("piTag").active=!1,s.node.getChildByName("laiTag").active=!1,"fengDan"==s.node.name?(cc.vv.mahjongmgr.getSpriteFrameByMJID(s,"B_",n[c++].pai),s.node.active=!0):cc.vv.mahjongmgr.getSpriteFrameByMJID(s,"B_",n[c++].pai),r.getChildByName("updateZhang").active=!0,r.getChildByName("updateZhang").y=50;for(var l=0;l<r.getChildByName("updateZhang").children.length;++l)l+2==n[c-1].count?r.getChildByName("updateZhang").children[l].active=!0:r.getChildByName("updateZhang").children[l].active=!1}}var h=this.intzhangshu(t,e._pengandgang);a.x=55*h+5*t},intzhangshu:function(e,t){for(var n=0,i=0;i<e;i++)for(var a=t[i],c=0;c<a.children.length;c++){var o=a.children[c].getComponent(cc.Sprite);o.node.active&&"gang"!=o.node.name&&n++}return n},hideSYMJParameterLayer:function(){if("jl_dch_chch"==cc.vv.gameNetMgr.conf.type)for(var e=cc.find("Canvas/game_over").getChildByName("result_list"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("hu").getChildByName("dianpao").active=!1,e.children[t].getChildByName("hu").getChildByName("zimo").active=!1,e.children[t].getChildByName("hu").getChildByName("hu").active=!1},onBtnReadyClicked:function(){cc.vv.gameNetMgr.reset(!0);for(var e=0;e<cc.vv.gameNetMgr.seats.length;e++){cc.vv.gameNetMgr.seats[e].userid!=cc.vv.userMgr.userId&&(cc.vv.gameNetMgr.seats[e].userid=0,cc.vv.gameNetMgr.seats[e].name="");var t=cc.vv.gameNetMgr.getLocalIndex(cc.vv.gameNetMgr.seats[e].seatindex);cc.vv.MJRoom._seats[t].hide_Seat_Node()}if(cc.vv.MJGame.gameRoot.active=!1,this._gameover.active=!1,cc.vv.MJGame._startGame.active=!1,cc.vv.gameNetMgr.reset(!0),cc.vv.userMgr.coins>5e4)cc.vv.gameNetMgr.choice_place_lv=3;else if(cc.vv.userMgr.coins>2e4)cc.vv.gameNetMgr.choice_place_lv=2;else{if(!(cc.vv.userMgr.coins>3e3))return void cc.director.loadScene("hall");cc.vv.gameNetMgr.choice_place_lv=1}cc.vv.MJGame.display_Seek_Interface_Info(),cc.vv.MJGame.SetUpSeek_place_lv(),cc.vv.MJGame.guangbi_waitRenshu(),cc.vv.MJGame._seek_player.active=!0,cc.vv.MJGame.prepareRoot.active=!0,cc.vv.MJGame.eliminate_settlementInfo(),cc.vv.DingQue.reset(),cc.vv.net.send("xlch_join",cc.vv.gameNetMgr.choice_place_lv)},onBtnShareClicked:function(){console.log("onBtnShareClicked")},onBtnGBgameover:function(){this._gameover.active=!1,cc.vv.MJGame._startGame.active=!0},onBtnStartGame:function(){cc.vv.gameNetMgr.reset(!0);for(var e=0;e<cc.vv.gameNetMgr.seats.length;e++){cc.vv.gameNetMgr.seats[e].userid!=cc.vv.userMgr.userId&&(cc.vv.gameNetMgr.seats[e].userid=0,cc.vv.gameNetMgr.seats[e].name="");var t=cc.vv.gameNetMgr.getLocalIndex(cc.vv.gameNetMgr.seats[e].seatindex);cc.vv.MJRoom._seats[t].hide_Seat_Node()}if(cc.vv.MJGame.gameRoot.active=!1,this._gameover.active=!1,cc.vv.MJGame._startGame.active=!1,cc.vv.gameNetMgr.reset(!0),cc.vv.userMgr.coins>5e4)cc.vv.gameNetMgr.choice_place_lv=3;else if(cc.vv.userMgr.coins>2e4)cc.vv.gameNetMgr.choice_place_lv=2;else{if(!(cc.vv.userMgr.coins>3e3))return void cc.director.loadScene("hall");cc.vv.gameNetMgr.choice_place_lv=1}cc.vv.MJGame.display_Seek_Interface_Info(),cc.vv.MJGame.SetUpSeek_place_lv(),cc.vv.MJGame.guangbi_waitRenshu(),cc.vv.MJGame._seek_player.active=!0,cc.vv.MJGame.prepareRoot.active=!0,cc.vv.MJGame.eliminate_settlementInfo(),cc.vv.DingQue.reset(),cc.vv.net.send("xlch_join",cc.vv.gameNetMgr.choice_place_lv)},finalScoring_Calculation:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].score;return t}}),cc._RF.pop()},{}],GameResult:[function(e,t,n){"use strict";cc._RF.push(t,"2b08d8pm0VBDLYlZIdfLuPS","GameResult"),cc.Class({extends:cc.Component,properties:{_gameresult:null,_seats:[],_timeLabel:null,_lastMinute:null,_wanfaLabel:null,_consumeTime:null},onLoad:function(){if(console.log("开始加载 GameResult.js"),null!=cc.vv){this._gameresult=this.node.getChildByName("game_result"),cc.find("Canvas/game_result/infobar/Z_room_txt/New Label").getComponent(cc.Label).string=cc.vv.gameNetMgr.roomId,this._timeLabel=cc.find("Canvas/game_result/infobar/time").getComponent(cc.Label),this._wanfaLabel=cc.find("Canvas/game_result/infobar/wanfa").getComponent(cc.Label);cc.find("Canvas/game_result/typeTitle/typeLabel").getComponent(cc.Label);for(var e=this._gameresult.getChildByName("seats"),t=0;t<e.children.length;++t)this._seats.push(e.children[t].getComponent("Seat"));var n=cc.find("Canvas/game_result/btnClose");n&&cc.vv.utils.addClickEvent(n,this.node,"GameResult","onBtnCloseClicked");var i=cc.find("Canvas/game_result/btnShare");i&&cc.vv.utils.addClickEvent(i,this.node,"GameResult","onBtnShareClicked");var a=this;this.node.on("game_end",function(e){a.onGameEnd(e.detail)}),console.log("加载完成 GameResult.js")}},showResult:function(e,t,n){"xlch"==cc.vv.gameNetMgr.conf.type||"xzdd"==cc.vv.gameNetMgr.conf.type?this.showResultXlchAndXzdd(e,t,n):"ypel"==cc.vv.gameNetMgr.conf.type?this.showResultYPEL(e,t,n):"kwx"==cc.vv.gameNetMgr.conf.type.substring(0,3)?this.showResultKWX(e,t,n):"ljmj"==cc.vv.gameNetMgr.conf.type?this.showResultLJMJ(e,t,n):"jl_dch_chch"==cc.vv.gameNetMgr.conf.type&&this.showResultChangChun(e,t,n)},showResultXlchAndXzdd:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("angangcishu").getComponent(cc.Label).string=t.numangang,e.node.getChildByName("minggangcishu").getComponent(cc.Label).string=t.numminggang,e.node.getChildByName("zimocishu").getComponent(cc.Label).string=t.numzimo,e.node.getChildByName("jiepaocishu").getComponent(cc.Label).string=t.numjiepao,e.node.getChildByName("chajiaocishu").getComponent(cc.Label).string=t.numchadajiao,e.node.getChildByName("huazhucishu").getComponent(cc.Label).string=t.numhuazhu},showResultYPEL:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("angangcishu").getComponent(cc.Label).string=t.numangang,e.node.getChildByName("minggangcishu").getComponent(cc.Label).string=t.numminggang,e.node.getChildByName("hupaicishu").getComponent(cc.Label).string=t.numzimo+t.numjiepao,e.node.getChildByName("pigangcishu").getComponent(cc.Label).string=t.numpigang,e.node.getChildByName("laigangcishu").getComponent(cc.Label).string=t.numlaigang},showResultKWX:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("zimocishu").getComponent(cc.Label).string=t.numzimo,e.node.getChildByName("hupaicishu").getComponent(cc.Label).string=t.numjiepao,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("angangcishu").getComponent(cc.Label).string=t.numangang,e.node.getChildByName("minggangcishu").getComponent(cc.Label).string=t.numminggang},showResultLJMJ:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("zimocishu").getComponent(cc.Label).string=t.numzimo,e.node.getChildByName("jiepaocishu").getComponent(cc.Label).string=t.numjiepao,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("mobaocishu").getComponent(cc.Label).string=t.nummobao,e.node.getChildByName("baozhongbaocishu").getComponent(cc.Label).string=t.numbaozhongbao},showResultSYMJ:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("zimocishu").getComponent(cc.Label).string=t.numzimo,e.node.getChildByName("jiepaocishu").getComponent(cc.Label).string=t.numjiepao,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("guodancishu").getComponent(cc.Label).string=t.numguodan},showResultChangChun:function(e,t,n){e.node.getChildByName("zuijiapaoshou").active=n,e.node.getChildByName("zuozhuangcishu").getComponent(cc.Label).string=t.numZhuoZhuang,e.node.getChildByName("hupaicishu").getComponent(cc.Label).string=t.numzimo+t.numjiepao+t.numMoBao+t.numDuiBao,e.node.getChildByName("dianpaocishu").getComponent(cc.Label).string=t.numdianpao,e.node.getChildByName("mobaocishu").getComponent(cc.Label).string=t.numMoBao+t.numDuiBao},update:function(e){var t=Math.floor(Date.now()/1e3/60);if(this._lastMinute!=t){this._lastMinute=t;var n=new Date,i=n.getHours();i=i<10?"0"+i:i;var a=n.getMinutes();a=a<10?"0"+a:a,this._timeLabel.string=i+":"+a}},onGameEnd:function(e){var t=e.numofgames;this._wanfaLabel.string=t+"/"+this._wanfaLabel.string;for(var n=e.endinfo,i=cc.vv.gameNetMgr.seats,a=-1,c=0,o=-1,s=0;s<n.length;++s){l=i[r=cc.vv.gameNetMgr.getSeatIndexByID(n[s].userid)];n[s].totalscore>a&&(a=n[s].totalscore),n[s].numdianpao>c&&(c=n[s].numdianpao,o=r)}for(s=0;s<i.length;++s){var r=cc.vv.gameNetMgr.getSeatIndexByID(n[s].userid),l=i[r],h=!1;n[s].totalscore>0&&(h=n[s].totalscore==a),this._seats[s].node.getChildByName("GameEnd2").active=!1,this._seats[s].node.getChildByName("replaceGameEnd2").active=!1,h?this._seats[s].node.getChildByName("GameEnd2").active=!0:this._seats[s].node.getChildByName("replaceGameEnd2").active=!0,this._seats[s].setInfo(l.name,n[s].totalscore,h),this._seats[s].setID(n[s].userid),this._seats[s].setCrown(l.crown);var g=o==s;this.showResult(this._seats[s],n[s],g)}},onBtnCloseClicked:function(){cc.director.loadScene("hall")},onBtnShareClicked:function(){cc.vv.anysdkMgr.shareResult()}}),cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"24e30ZJLgdH3rs1R1CvqN8U","Global");cc.Class({extends:cc.Component,statics:{isstarted:!1,netinited:!1,userguid:0,nickname:"",money:0,lv:0,roomId:0}});cc._RF.pop()},{}],GpsMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d5094LKM9ZOLqfbrCAYMxT1","GpsMgr");var i=Math.PI;cc.Class({extends:cc.Component,properties:{PlayersGpsInfo:null,distanceArr:null,myjpos:"",mywpos:""},init:function(){this.initPlayersinfo(),this.initHandlers()},initPlayersinfo:function(){this.PlayersGpsInfo={},this.distanceArr={};for(e=0;e<4;++e)this.PlayersGpsInfo[e]={},this.PlayersGpsInfo[e].Posj=0,this.PlayersGpsInfo[e].PosW=0;for(var e=0;e<6;++e)this.distanceArr[e]={},this.distanceArr[e].d=0,0==e&&(this.distanceArr[e].p1=0,this.distanceArr[e].p2=1,this.distanceArr[e].d=500),1==e&&(this.distanceArr[e].p1=0,this.distanceArr[e].p2=2,this.distanceArr[e].d=500),2==e&&(this.distanceArr[e].d=500,this.distanceArr[e].p1=0,this.distanceArr[e].p2=3),3==e&&(this.distanceArr[e].d=500,this.distanceArr[e].p1=1,this.distanceArr[e].p2=2),4==e&&(this.distanceArr[e].p1=1,this.distanceArr[e].p2=3,this.distanceArr[e].d=500),5==e&&(this.distanceArr[e].p1=2,this.distanceArr[e].p2=3,this.distanceArr[e].d=500)},sendoneinfo:function(){var e={longitude:cc.vv.GpsMgr.myjpos,latitude:cc.vv.GpsMgr.mywpos};cc.vv.net.send("zuobiao",e),console.log("j"+cc.vv.GpsMgr.myjpos),console.log("w"+cc.vv.GpsMgr.mywpos),console.log("sendzuobiao")},initHandlers:function(){cc.vv.net.addHandler("send_gpsinfo_oneplayer",function(e){}),cc.vv.net.addHandler("user_zuobiao_all",function(e){var t=e;for(var n in t){var i=cc.vv.gameNetMgr.getSeatIndexByID(t[n].userId),a=cc.vv.gameNetMgr.getLocalIndex(i);cc.vv.GpsMgr.UpdataOnePlayerPosinfo(a,t[n].latitude,t[n].longitude),console.log("userId == "+t[n].userId),console.log("seatIndex == "+i)}console.log("sendzuobiao"+t),cc.vv.GpsMgr.UpdatadistanceArr(),cc.vv.gameNetMgr.dispatchEvent("updatabt")})},getstr:function(e){var t="没人",n="没人",i=cc.vv.gameNetMgr.seats;console.log("juliduoshao"+e.d);for(a=0;a<i.length;++a)(c=cc.vv.gameNetMgr.getLocalIndex(i[a].seatindex))==e.p1&&(console.log("mingzi1"+c),t=i[a].name);for(var a=0;a<i.length;++a){var c=cc.vv.gameNetMgr.getLocalIndex(i[a].seatindex);c==e.p2&&(console.log("mingzi2"+c),n=i[a].name)}return t+"和"+n+"相距"+e.d+"米\n"},UpdataOnePlayerPosinfo:function(e,t,n){this.PlayersGpsInfo[e]&&(this.PlayersGpsInfo[e].Posj=n,this.PlayersGpsInfo[e].PosW=t)},UpdatadistanceArr:function(){this.distanceArr[0].d=this.getGreatCircleDistance(this.PlayersGpsInfo[0].Posj,this.PlayersGpsInfo[0].PosW,this.PlayersGpsInfo[1].Posj,this.PlayersGpsInfo[1].PosW),this.distanceArr[1].d=this.getGreatCircleDistance(this.PlayersGpsInfo[0].Posj,this.PlayersGpsInfo[0].PosW,this.PlayersGpsInfo[2].Posj,this.PlayersGpsInfo[2].PosW),this.distanceArr[2].d=this.getGreatCircleDistance(this.PlayersGpsInfo[0].Posj,this.PlayersGpsInfo[0].PosW,this.PlayersGpsInfo[3].Posj,this.PlayersGpsInfo[3].PosW),this.distanceArr[3].d=this.getGreatCircleDistance(this.PlayersGpsInfo[1].Posj,this.PlayersGpsInfo[1].PosW,this.PlayersGpsInfo[2].Posj,this.PlayersGpsInfo[2].PosW),this.distanceArr[4].d=this.getGreatCircleDistance(this.PlayersGpsInfo[1].Posj,this.PlayersGpsInfo[1].PosW,this.PlayersGpsInfo[3].Posj,this.PlayersGpsInfo[3].PosW),this.distanceArr[5].d=this.getGreatCircleDistance(this.PlayersGpsInfo[2].Posj,this.PlayersGpsInfo[2].PosW,this.PlayersGpsInfo[3].Posj,this.PlayersGpsInfo[3].PosW),console.log("ddddddeeee1"+this.distanceArr[0].d),console.log("ddddddeeee2"+this.distanceArr[1].d),console.log("ddddddeeee3"+this.distanceArr[2].d),console.log("ddddddeeee4"+this.distanceArr[3].d),console.log("ddddddeeee5"+this.distanceArr[4].d),console.log("ddddddeeee6"+this.distanceArr[5].d)},Attentions:function(){for(var e=0;e<6;++e)this.distanceArr[e]},getRad:function(e){return e*i/180},getGreatCircleDistance:function(e,t,n,i){if(0==e||0==e||0==n||0==i)return 500;var a=this.getRad(e),c=this.getRad(n),o=a-c,s=this.getRad(t)-this.getRad(i),r=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(a)*Math.cos(c)*Math.pow(Math.sin(s/2),2)));return r*=6378137,r=Math.round(1e4*r)/1e4}}),cc._RF.pop()},{}],HTTP:[function(e,t,n){"use strict";cc._RF.push(t,"123e5etqhREob1mGOWeQA8k","HTTP");var i=["39.104.89.54"];cc.MD5=e("MD5");var a=new(e("Utils")),c=cc.Class({extends:cc.Component,statics:{sessionId:0,userId:0,useYumingList:!1,useYumingCount:0,ips:[],IOS_VERSION:"1",ANDROID_VERSION:"1",SI:null,account_port:9e3,hall_port:9e3,state:"account",active_ip:null,refreshServerIps:function(e){try{var t=JSON.parse(e);if(!Array.isArray(t)||0==t.length)return;cc.sys.localStorage.setItem("HTTP_ips",e),c.ips=[];for(var n=0;n<t.length;++n)t&&c.ips.push(cc.vv.utils.customDecryptIP(t[n],234523542));c.useYumingList=!1}catch(e){console.log("refreshServerIps: "+e.message)}},sendRequest:function(e,t,n,i,a,o){console.log("打印端口---111:"+e),c.__sendRequest(e,t,n,i,o,a,!0)},__sendRequest:function(e,t,n,a,o,s,r){if(console.log("打印端口---222:"+e),s)return console.log("打印端口---333:"+e),void c.__send(null,null,t,n,a,o,s);0!==c.ips.length||c.useYumingList||(c.ips=i.concat([]),c.useYumingList=!0),0===c.ips.length&&(console.log("no ip to use: reuse yuming_list"),c.ips=i.concat([]),c.useYumingList=!0);var l,h=c.useYumingList,g=c.ips.concat([]);if(c.active_ip)l=c.active_ip;else{var d=Math.floor(Math.random()*g.length);l=g.splice(d,1)}var u=0;console.log("打印端口---666:"+e),c.__send(l,e,t,n,function(t){console.log("打印端口---777:"+e),a(t),c.active_ip=l},function r(){if(h){if(3==++u&&null!==a)return void a({errcode:-1});if(u>=4)return void o()}if(0==g.length){if(h&&o)return void o();g=i.concat([]),h=!0}var d=Math.floor(Math.random()*g.length);l=g.splice(d,1),console.log("打印端口---444:"+e),c.__send(l,e,t,n,function(t){console.log("打印端口---555:"+e),a(t),c.active_ip=l},r,s)},s)},__send:function(e,t,n,i,c,o,s){var r=cc.loader.getXMLHttpRequest();r.timeout=3e3,r.ontimeout=o,r.onerror=o,console.log("path : "+n);var l="?",h="",g=(new Date).getTime();i&&(i=a.objKeySortedClone(i));for(var d in i)"?"!=l&&(l+="&"),l+=d+"="+i[d],h+=i[d];h=encodeURI(h);var u=Math.floor(1e6*Math.random()+1);console.log("reqdata:"+h);h=cc.MD5(h+"9ba984dsf6"+g+u);s||(l+="?"==l?"fuckoff="+h+"&timestamp="+g+"&nonce="+u:"&fuckoff="+h+"&timestamp="+g+"&nonce="+u),console.log("打印端口:"+t);var v="http://"+e+":"+t;null==s&&(s=v),console.log("extraUrl:"+s);var m=s+n+encodeURI(l);console.log("RequestURL:"+m),r.open("GET",m,!0),console.log("xhr.open(GET,requestURL, true);"),cc.sys.isNative&&r.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),console.log("xhr.setRequestHeader"),r.onreadystatechange=function(){console.log("xhr.readyState:"+r.readyState),console.log("xhr.status:"+r.status);t=new Date;if(console.log("进入服务器回调 time:"+t.getSeconds()+":"+t.getMilliseconds()),4===r.readyState&&r.status>=200&&r.status<300){console.log("http res("+r.responseText.length+"):"+r.responseText);try{var e=JSON.parse(r.responseText);if(null!==c){var t=new Date;console.log("服务器回调成功 time:"+t.getSeconds()+":"+t.getMilliseconds()),c(e)}}catch(e){console.log(e)}finally{cc.vv&&cc.vv.wc}}else if(4===r.readyState&&0===r.status)try{c({errcode:"-1"})}catch(e){console.log(e)}},cc.vv&&cc.vv.wc,r.send(),console.log("xhr.send()")}}});cc._RF.pop()},{MD5:"MD5",Utils:"Utils"}],HallNet:[function(e,t,n){"use strict";cc._RF.push(t,"4af99kJX21MTJW7BXfs0ElM","HallNet"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},initHandlers:function(){cc.vv.net.addHandler("guest_result",function(e){console.log("guest_result:-----"),cc.vv.userMgr&&setTimeout(function(){cc.vv.userMgr.onAuth(e)},100)}),cc.vv.net.addHandler("login_h_result",function(e){console.log("login_h_result:-----"),cc.vv.userMgr&&setTimeout(function(){cc.vv.userMgr.onLogin(e)},100)}),cc.vv.net.addHandler("create_user_result",function(e){console.log("create_user_result:-----"),cc.vv.userMgr&&setTimeout(function(){cc.vv.userMgr.onCreate(e)},100)}),cc.vv.net.addHandler("rankcoin_result",function(e){console.log("rankcoin_result:-----"),cc.vv.history&&setTimeout(function(){cc.vv.history.receiveRankcoin(e)},100)}),cc.vv.net.addHandler("rankcoincharge_result",function(e){console.log("rankcoincharge_result:-----"),cc.vv.history&&setTimeout(function(){cc.vv.history.receiveRankcoinCharge(e)},100)}),cc.vv.net.addHandler("get_login_sign_result",function(e){console.log("get_login_sign_result:-----"),cc.vv.history&&setTimeout(function(){cc.vv.history.SevenDaysSign(e)},100)}),cc.vv.net.addHandler("coin_push",function(e){console.log("coin_push:-----"),cc.vv.userMgr.coins=e,"hall"==cc.director.getScene().name&&setTimeout(function(){cc.vv.hall.setCoins(e)},100)}),cc.vv.net.addHandler("gems_push",function(e){console.log("gems_push:-----"),cc.vv.hall.lblGems&&setTimeout(function(){cc.vv.hall.setGems(e)},100)}),cc.vv.net.addHandler("laba_push",function(e){console.log("laba_push:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.setNotice_num(e)},100)}),cc.vv.net.addHandler("toushika_push",function(e){console.log("toushika_push:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.settoushika_num(e)},100)}),cc.vv.net.addHandler("get_yaoqianshu_info_result",function(e){console.log("get_yaoqianshu_info_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.receiveYaoQianShu_info(e)},100)}),cc.vv.net.addHandler("message_board_result",function(e){console.log("message_board_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.receiveLineMessage(e)},100)}),cc.vv.net.addHandler("mail_info_result",function(e){console.log("mail_info_result:-----"),cc.vv.hall&&cc.vv.history&&setTimeout(function(){cc.vv.hall.mail_info_result(e)},100)}),cc.vv.net.addHandler("mail_get_item_result",function(e){console.log("mail_get_item_result:-----"),cc.vv.history&&setTimeout(function(){cc.vv.history.mail_get_item_result(e)},100)}),cc.vv.net.addHandler("task_info_result",function(e){console.log("task_info_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.task_info_result(e)},100)}),cc.vv.net.addHandler("login_task_result",function(e){console.log("login_task_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.task_info_result(e)},100)}),cc.vv.net.addHandler("change_name_result",function(e){console.log("change_name_result:-----"),cc.vv.hall&&setTimeout(function(){10017!=e.errcode?cc.vv.hall.change_name_result(e):cc.vv.hall.onSecuritySettingPrompt("非法字符")},100)}),cc.vv.net.addHandler("change_sign_result",function(e){console.log("change_sign_result:-----"),cc.vv.hall&&setTimeout(function(){10017!=e.errcode?cc.vv.hall.change_sign_result(e):cc.vv.hall.onSecuritySettingPrompt("非法字符")},100)}),cc.vv.net.addHandler("vip_result",function(e){console.log("vip_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.vip_result(e)},100)}),cc.vv.net.addHandler("Recharge_result",function(e){console.log("Recharge_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.Recharge_result(e)},100)}),cc.vv.net.addHandler("bind_phone_passwod_result",function(e){console.log("bind_phone_passwod_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.bind_phone_passwod_result(e)},100)}),cc.vv.net.addHandler("verify_code_result",function(e){console.log("verify_code_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.verify_code_result(e)},100)}),cc.vv.net.addHandler("change_phone_result",function(e){console.log("change_phone_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.change_phone_result(e)},100)}),cc.vv.net.addHandler("check_pass_result",function(e){console.log("check_pass_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.check_pass_result(e)},100)}),cc.vv.net.addHandler("change_password_result",function(e){console.log("change_password_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.change_password_result(e)},100)}),cc.vv.net.addHandler("set_head_result",function(e){console.log("set_head_result:-----"),cc.vv.hall&&setTimeout(function(){cc.vv.hall.set_head_result(e)},100)}),cc.vv.net.addHandler("game_error",function(e){console.log("game_error:-----"),"hall"==cc.director.getScene().name&&10016==e.errcode&&(cc.vv.wc.hide(),cc.vv.hall.onSecuritySettingPrompt("进入等级不匹配"))}),cc.vv.net.addHandler("laba_result",function(e){console.log("laba_result:-----");var t=cc.director.getScene().name;if(10017!=e.errcode&&""!=e.message&&null!=e.message&&cc.vv.userMgr._horn_TextRecord.push(e),"hall"==t){if(10017==e.errcode)return void cc.vv.hall.onSecuritySettingPrompt("非法字符");if(""==e.message||null==e.message)return void cc.vv.hall.onSecuritySettingPrompt("喇叭不足");cc.vv.userMgr._laba_SpeakingRecord.push(e),cc.vv.hall.horn_Record_display(e)}}),cc.vv.net.addHandler("Onlline_result",function(e){console.log("Onlline_result:-----"),"hall"==cc.director.getScene().name&&setTimeout(function(){cc.vv.hall.Onlline_result(e)},100)}),cc.vv.net.addHandler("Onlinelgift_result",function(e){console.log("Onlinelgift_result:-----"),"hall"==cc.director.getScene().name&&setTimeout(function(){cc.vv.hall.Onlinelgift_result(e)},100)}),cc.vv.net.addHandler("mailremove_result",function(e){console.log("mailremove_result:-----"),"hall"==cc.director.getScene().name&&setTimeout(function(){cc.vv.history.mailremove_result(e)},100)})}}),cc._RF.pop()},{}],Hall:[function(e,t,n){"use strict";cc._RF.push(t,"6edb3jjx+FBepS1mk1xKDF2","Hall");e("Net"),e("Global");cc.Class({extends:cc.Component,properties:{lblName:cc.Label,lblMoney:cc.Label,lblGems:cc.Label,lblID:cc.Label,lblNotice:cc.Label,settingsWin:cc.Node,helpWin:cc.Node,sprHeadImg:cc.Sprite,_QXXXLayer:null,_xiaoxiTag:null,_xiaoxiID:[],_gengduoBtn:null,_gengduoBtnArrLayer:null,_IscheckedGengduo:!1,_tuiguangLayer:null,_tuijianmaLayer:null,_yCodeLayer:null,_shojihaoLayer:null,_shojiBindSucceed:null,_dlrjieshaoLayer:null,_dlrShenQingLayer:null,_BindSucceed:null,_yCodeBindSucceed:null,_yCodePaySucceed:null,_YTips:null,_xiaoxiitemTemp:null,_activityTemp:null,_lebButton:null,_rankingInfo:null,_ranking_List:null,_SystemNoticeLayer:null,_systemDataContent:null,_systemDataLayer:null,_ActivityNoticeLayer:null,_activityDataContent:null,_activityDataLayer:null,_kfLabel:null,_DayRanking:null,_DayRankingTime:null,_WeeklyRanking:null,_WeeklyRankingTime:null,_MonthRanking:null,_MonthRankingTime:null,_XL_xuanze:null,_entertainment_xuanze:null,_SevenDaysSign:null,_shakeQianShu:null,_yqs_time:-1,_yqs_time_label:null,_yqs_existing_total_label:null,_yqs_explain_label:null,_yqs_shu_level_label:null,_schedule_bar:null,_customer:null,_customer_EditBox:null,_taskDetails:null,_eventsAndAnnouncements:null,_discountRecharge:null,_diamonds:null,_currency:null,_btn_GameAnnouncement:null,_btn_HottestBulletin:null,_announcementPage:null,_activePage:null,_mrsbffl_Interface:null,_yjldzn_Interface:null,_everyDay_info:null,_achievement_info:null,_everyDay_info_data:null,_achievement_info_data:null,_firstPackage:null,_modify_name_Interface:null,_modify_sex_Interface:null,_sex_xuanze:null,_modify_autograph_Interface:null,_shoppingMall:null,_BuyGoldCoins:null,_ExchangeProps:null,_VIP_Interface:null,_VIP_ProgressBar:null,_RechargeExplain:null,_speedofprogress:null,_VIP_level:null,_privilege1:null,_privilege2:null,_privilege3:null,_privilege4:null,_privilege5:null,_privilege6:null,_privilege7:null,_clickLeft:null,_clickRight:null,_current_display_level:null,_securitySetting:null,_bindMobilePhone:null,_bindingCompleted:null,_replace:null,_replaceNextStep:null,_modifyPassword:null,_switchAccount:null,_resetPassword:null,_help:null,_introduceExplain:null,_NoData:null,_card_Type:null,_horn_Record:null,_hornRecord_data_content:null,_hornRecordr_data:null,_btn_onlineRewards:null,_onlineTime_Label:null,_Onlline_time:-1,scrollBar_state:!0},initNetHandlers:function(){},onLoad:function(){if(console.log("开始加载 Hall.js"),cc.vv){cc.vv.hall=this,this.addComponent("MahjongMgr"),this.initLabels(),this._XL_xuanze=this.node.getChildByName("XL_xuanze"),this._entertainment_xuanze=this.node.getChildByName("entertainment_xuanze"),this._SevenDaysSign=this.node.getChildByName("SevenDaysSign"),this._shakeQianShu=this.node.getChildByName("shakeQianShu"),this._yqs_time_label=this._shakeQianShu.getChildByName("timer").getComponent(cc.Label),this._yqs_existing_total_label=this._shakeQianShu.getChildByName("existing_total").getComponent(cc.Label),this._yqs_explain_label=this._shakeQianShu.getChildByName("explain").getComponent(cc.Label),this._yqs_shu_level_label=this._shakeQianShu.getChildByName("shu_level").getComponent(cc.Label),this._schedule_bar=this._shakeQianShu.getChildByName("schedule").getChildByName("bar"),this._customer=this.node.getChildByName("customer"),this._customer_EditBox=this._customer.getChildByName("New EditBox").getComponent(cc.EditBox),this._taskDetails=this.node.getChildByName("taskDetails"),this._discountRecharge=this.node.getChildByName("discountRecharge"),this._diamonds=this._discountRecharge.getChildByName("diamonds"),this._currency=this._discountRecharge.getChildByName("currency"),this._eventsAndAnnouncements=this.node.getChildByName("eventsAndAnnouncements"),this._btn_GameAnnouncement=this._eventsAndAnnouncements.getChildByName("new_btn_GameAnnouncement").getChildByName("btn_GameAnnouncement"),this._btn_HottestBulletin=this._eventsAndAnnouncements.getChildByName("new_btn_HottestBulletin").getChildByName("btn_HottestBulletin"),this._announcementPage=this._eventsAndAnnouncements.getChildByName("announcementPage"),this._activePage=this._eventsAndAnnouncements.getChildByName("activePage"),this._mrsbffl_Interface=this._activePage.getChildByName("mrsbffl_Interface"),this._yjldzn_Interface=this._activePage.getChildByName("yjldzn_Interface"),this._everyDay_info=this._taskDetails.getChildByName("everyDay_info"),this._achievement_info=this._taskDetails.getChildByName("achievement_info"),this._everyDay_info_data=this._everyDay_info.getChildByName("view").getChildByName("content"),this._achievement_info_data=this._achievement_info.getChildByName("view").getChildByName("content"),this._firstPackage=this.node.getChildByName("firstPackage"),this._modify_name_Interface=this.node.getChildByName("userinfo").getChildByName("modify_name_Interface"),this._modify_sex_Interface=this.node.getChildByName("userinfo").getChildByName("modify_sex_Interface"),this._modify_autograph_Interface=this.node.getChildByName("userinfo").getChildByName("modify_autograph_Interface"),this._sex_xuanze=[];for(var t=this._modify_sex_Interface.getChildByName("sex_xuanze"),n=0;n<t.childrenCount;++n){var i=t.children[n].getComponent("RadioButton");null!=i&&this._sex_xuanze.push(i)}this._shoppingMall=this.node.getChildByName("shoppingMall"),this._BuyGoldCoins=this._shoppingMall.getChildByName("BuyGoldCoins"),this._ExchangeProps=this._shoppingMall.getChildByName("ExchangeProps"),this._VIP_Interface=this.node.getChildByName("VIP_Interface"),this._VIP_ProgressBar=this._VIP_Interface.getChildByName("ProgressBar").getChildByName("bar"),this._RechargeExplain=this._VIP_Interface.getChildByName("RechargeExplain").getComponent(cc.Label),this._speedofprogress=this._VIP_Interface.getChildByName("speedofprogress").getComponent(cc.Label),this._VIP_level=this._VIP_Interface.getChildByName("VIP_level"),this._privilege1=this._VIP_Interface.getChildByName("privilege1"),this._privilege2=this._VIP_Interface.getChildByName("privilege2"),this._privilege3=this._VIP_Interface.getChildByName("privilege3"),this._privilege4=this._VIP_Interface.getChildByName("privilege4"),this._privilege5=this._VIP_Interface.getChildByName("privilege5"),this._privilege6=this._VIP_Interface.getChildByName("privilege6"),this._privilege7=this._VIP_Interface.getChildByName("privilege7"),this._clickLeft=this._VIP_Interface.getChildByName("clickLeft"),this._clickRight=this._VIP_Interface.getChildByName("clickRight"),this._securitySetting=this.node.getChildByName("securitySetting"),this._bindMobilePhone=this._securitySetting.getChildByName("bindMobilePhone"),this._bindingCompleted=this._securitySetting.getChildByName("bindingCompleted"),this._replace=this._securitySetting.getChildByName("replace"),this._replaceNextStep=this._securitySetting.getChildByName("replaceNextStep"),this._modifyPassword=this._securitySetting.getChildByName("modifyPassword"),this._switchAccount=this._securitySetting.getChildByName("switchAccount"),this._resetPassword=this._securitySetting.getChildByName("resetPassword"),this._help=this.node.getChildByName("help"),this._introduceExplain=this._help.getChildByName("introduceExplain"),this._NoData=this.node.getChildByName("userinfo").getChildByName("NoData"),this._card_Type=this.node.getChildByName("userinfo").getChildByName("card_Type"),this._horn_Record=this.node.getChildByName("horn_Record"),this._hornRecord_data_content=cc.find("chatRecord/view/content",this._horn_Record),this._hornRecordr_data=this._hornRecord_data_content.children[0],this._hornRecord_data_content.removeChild(this._hornRecordr_data),this._btn_onlineRewards=this.node.getChildByName("btn_onlineRewards"),this._onlineTime_Label=this._btn_onlineRewards.getChildByName("onlineTime").getComponent(cc.Label),this.sprHeadImg.node.getComponent("ImageLoader").setUserID(cc.vv.userMgr.userId,cc.vv.userMgr._headimg),cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,"Hall","onBtnClicked"),this.addComponent("UserInfoShow"),this.initButtonHandler("Canvas/BottomSelection/btn_shezhi"),this._rankingInfo=this.node.getChildByName("rankingInfo");var a=new Date;this._hallHeartStart=a.getTime();var c=this.node.getChildByName("CurVersion").getComponent(cc.Label);cc.update&&cc.update.updateVersion?c.string="版本："+cc.update.updateVersion:c.string="版本：0",cc.vv.audioMgr.playBGM("music/daoting_bg.mp3");var o=e("CheckBoxGroupMgr");cc.vv.checkboxGroupMgr=new o,cc.vv.checkboxGroupMgr.init(),console.log(" hall脚本加载完成"),this.requestRankcoin(),this.requestRankcoinCharge(),this.requestSevenDaysSign(),this.requestYaoQianShu(),this.mail_info(),this.task_info(),this.determineSexDisplay(),this.VIP_request(),cc.vv.userMgr._XLCH_Record&&(this.open_xlxz(),cc.vv.userMgr._XLCH_Record=!1),this.XLCH_ZuiDaPaiXin(),this.Onlline(),this.change_KeFu();for(n=0;n<cc.vv.userMgr._horn_TextRecord.length;n++)cc.vv.hall.horn_Record_display(cc.vv.userMgr._horn_TextRecord[n]);console.log("加载完成 Hall.js")}else cc.director.loadScene("update")},ClickSysxiangqing:function(e){var t=e.target.parent.indexID;this._QXXXLayer.active=!0;var n="SysID_"+cc.vv.userMgr.update_notice.msgs[t].id;cc.sys.localStorage.setItem(n,1),this._QXXXLayer.getChildByName("time").getComponent(cc.Label).string=cc.vv.userMgr.update_notice.msgs[t].create_time;var i=cc.find("Canvas/QXXXLayer/New ScrollView/view/content/item").getComponent(cc.Label);i.string=cc.vv.userMgr.update_notice.msgs[t].msg,cc.find("Canvas/QXXXLayer/New ScrollView/view/content").height=i.node.height+20},ClickActxiangqing:function(e){var t=e.target.parent.indexID;this._QXXXLayer.active=!0;var n="ActID_"+cc.vv.userMgr.activity_notice.msgs[t].id;cc.sys.localStorage.setItem(n,1),this._QXXXLayer.getChildByName("time").getComponent(cc.Label).string=cc.vv.userMgr.activity_notice.msgs[t].create_time;var i=cc.find("Canvas/QXXXLayer/New ScrollView/view/content/item").getComponent(cc.Label);i.string=cc.vv.userMgr.activity_notice.msgs[t].msg,cc.find("Canvas/QXXXLayer/New ScrollView/view/content").height=i.node.height+20},onYbalance:function(){var e=cc.vv.hall._yCodePaySucceed.getChildByName("ycodeshow").getChildByName("balance").getComponent(cc.Label),t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_ybalance",t,function(t){"0"==t.errcode?e.string=t.balance:e.string="0"})},ontuiguangLayerEsc:function(){this._tuiguangLayer.active=!1},onY_MDetailsEsc:function(){this.node.getChildByName("ymdetails").active=!1},onY_MDetailsOpen:function(){this.node.getChildByName("ymdetails").active=!0},onY_MDetailsInfo:function(){this.onY_MDetailsEsc},onBindtuijianmaBtn:function(e,t){var n=this._tuijianmaLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label);if("delete"==t)n.string=n.string.substr(0,n.string.length-1);else if("again"==t)n.string="";else{if(n.string.length>=11)return;n.string+=t}},onBindtuijianma:function(){var e=this._tuijianmaLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label);if(""!=e.string){var t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId,code:e.string};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/bind_dealer",t,function(t){"0"==t.errcode?(cc.vv.hall._BindSucceed.getChildByName("label").getComponent(cc.Label).string="推荐码："+e.string,cc.vv.hall._BindSucceed.active=!0,cc.vv.hall._tuijianmaLayer.active=!1,cc.vv.userMgr.code=e.string,cc.vv.hall.refreshInfo(),cc.vv.alert.show("","绑定成功，获得钻石"+t.gems+" 颗!")):(e.string="",cc.vv.alert.show("","推荐码不存在!"))})}},onBindshojihaoBtn:function(e,t){var n=null;if(111==this._lebButton?n=this._shojihaoLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label):222==this._lebButton&&(n=this._shojihaoLayer.getChildByName("yzmLabelBG").getChildByName("label").getComponent(cc.Label)),n=n.getComponent(cc.Label),"delete"==t)n.string=n.string.substr(0,n.string.length-1);else if("again"==t)n.string="";else{if(111==this._lebButton){if(n.string.length>=11)return}else if(222==this._lebButton&&n.string.length>=6)return;n.string+=t}},onBindshojkihao:function(){var e=this._shojihaoLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label),t=this._shojihaoLayer.getChildByName("yzmLabelBG").getChildByName("label").getComponent(cc.Label);if(""!=e.string&&""!=t.string){var n={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId,phone_no:e.string,code:t.string};console.log("aaaaaaaaaaaaaaaaa"+JSON.stringify(n)),cc.vv.http.sendRequest(cc.vv.http.hall_port,"/check_verify_code",n,function(n){"0"==n.errcode?(cc.vv.hall._shojiBindSucceed.getChildByName("label").getComponent(cc.Label).string="手机号码："+e.string,cc.vv.hall._shojiBindSucceed.active=!0,cc.vv.hall._shojihaoLayer.active=!1,cc.vv.userMgr.phone=e.string,cc.vv.hall.refreshInfo(),cc.vv.alert.show("","绑定成功，获得钻石 "+n.gems+" !")):(e.string="",t.string="",cc.vv.alert.show("","手机号绑定失败!"))})}},onBindYMBtn:function(e,t){var n=this._yCodeLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label);if("delete"==t)n.string=n.string.substr(0,n.string.length-1);else if("again"==t)n.string="";else{if(n.string.length>=11)return;n.string+=t}},onBindYM:function(){var e=this._yCodeLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label);if(""!=e.string&&6==e.string.length){var t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId,ycode:e.string};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/bind_ycode",t,function(t){if(cc.log("onbindYm"+JSON.stringify(t)),"0"==t.errcode)cc.vv.hall._yCodeBindSucceed.getChildByName("label").getComponent(cc.Label).string="您绑定的Y码为：："+e.string,cc.vv.hall._yCodeBindSucceed.active=!0,cc.vv.hall._yCodePaySucceed.active=!1,cc.vv.hall._yCodeLayer.active=!1,cc.vv.userMgr.Yma=e.string,cc.vv.hall.refreshInfo(),cc.vv.alert.show("","绑定Y码成功，获得钻石 "+t.givendim+" !");else switch(e.string="",t.errcode){case 6001:cc.vv.alert.show("","用户Y码信息不存在!");break;case 6002:cc.vv.alert.show("","用户已有Y码!");break;case 6003:cc.vv.alert.show("","Y码已经被使用!");break;case 6005:cc.vv.alert.show("","用户已经绑定Y码!");break;case 6006:cc.vv.alert.show("","绑定Y码用户信息不存在!");break;case 6007:cc.vv.alert.show("","不能绑定自己的Y码!");break;case 6008:cc.vv.alert.show("","不能相互绑定Y码!");break;default:cc.vv.alert.show("","绑定Y码失败!"+t.errcode)}})}else cc.vv.alert.show("","请输入6位数Y码!")},onShowMoneyUrl:function(){cc.sys.openURL("http://ycode.yueyouxi.net:8081/ycode/index")},onshenqingdailirenBtn:function(){var e=this._dlrShenQingLayer.getChildByName("name").getChildByName("label").getComponent(cc.EditBox).string,t=this._dlrShenQingLayer.getChildByName("cellphone").getChildByName("label").getComponent(cc.EditBox).string,n=this._dlrShenQingLayer.getChildByName("QQ").getChildByName("label").getComponent(cc.EditBox).string,i=this._dlrShenQingLayer.getChildByName("weixin").getChildByName("label").getComponent(cc.EditBox).string,a=this._dlrShenQingLayer.getChildByName("zwjieshao").getChildByName("label").getComponent(cc.EditBox).string;if(""!=e&&""!=t&&""!=i){var c={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId,name:e,cellphone:t,qq:n,weixin:i,introduction:a};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/apply_dealer",c,function(e){"0"==e.errcode?cc.vv.alert.show("","申请成功!"):"2"==e.errcode?cc.vv.alert.show("","已经申请！"):cc.vv.alert.show("","申请失败 错误码："+e.errcode),cc.vv.hall._dlrShenQingLayer.active=!1})}else cc.vv.alert.show("","资料填写不齐全!")},getbindcode:function(){var e=this,t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_bindcode",t,function(t){if("0"==t.errcode)if(null!=t.code&&((n=cc.vv.hall._BindSucceed.getChildByName("label").getComponent(cc.Label)).string="推荐码："+t.code,cc.vv.userMgr.code=t.code),null!=t.bound_ycode&&((n=cc.vv.hall._yCodeBindSucceed.getChildByName("label").getComponent(cc.Label)).string="您绑定的Y码为："+t.bound_ycode,cc.vv.userMgr.Yma=t.bound_ycode),null!=t.y_code){var n=cc.vv.hall._yCodePaySucceed.getChildByName("ycodeshow").getChildByName("label").getComponent(cc.Label);n.string=t.y_code,cc.vv.userMgr.myYcode=t.y_code,e.node.getChildByName("top_left").getChildByName("crown").active=!0}else e.node.getChildByName("top_left").getChildByName("crown").active=!1})},getRecommend:function(){var e={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_bindcode",e,function(e){"0"==e.errcode&&null!=e.bind_code&&(cc.vv.hall._BindSucceed.getChildByName("label").getComponent(cc.Label).string="推荐码："+e.bind_code,cc.vv.userMgr.code=e.bind_code)})},getphone:function(){null!=cc.vv.userMgr.phone&&(cc.vv.hall._shojiBindSucceed.getChildByName("label").getComponent(cc.Label).string="手机号:"+cc.vv.userMgr.phone)},isHidedlrShenQingLayer:function(){this._dlrShenQingLayer.active=!this._dlrShenQingLayer.active,this._tuiguangLayer.active&&(this._tuiguangLayer.active=!1)},ongetMyYcodeSuccess:function(){this._tuiguangLayer.active&&this._yCodeBindSucceed.active&&(this._yCodeBindSucceed.getChildByName("Tips").active=!0)},onTipsOK:function(){this._yCodeBindSucceed.getChildByName("Tips").active=!1},onYTipsClose:function(){this._YTips.active=!1},showYTips:function(){this._YTips.active=!0},onYTipsBind:function(){this._YTips.active=!1},refreshInfo:function(){var e=this,t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_user_status",t,function(t){0!==t.errcode?console.log(t.errmsg):null!=t.gems&&(e.lblGems.string=t.gems)}.bind(e))},refreshGemsTip:function(){var e=this;cc.vv.userMgr.gemstip.lastTime=null;var t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,type:"fkgm",lasttime:cc.vv.userMgr.gemstip.lastTime};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_message",t,function(t){0!==t.errcode?console.log(t.errmsg):(cc.vv.userMgr.gemstip.lastTime=t.lasttime,cc.vv.userMgr.gemstip.msg=t.msg.replace("<newline>","\n"),e._kfLabel.string=cc.vv.userMgr.gemstip.msg)}.bind(this))},onSecuritySettingPrompt:function(e){var t=cc.find("Canvas/prompt");if(t&&(t.getChildByName("promptLabel").getComponent(cc.Label).string=e,!t.active)){var n=cc.scaleTo(.2,1.5,1.5),i=cc.scaleTo(.2,1.2,1.2),a=cc.scaleTo(.1,1,1),c=cc.sequence(n,i,a);t.active=!0,t.runAction(c),setTimeout(function(){t.active=!1},2e3)}},RequestSysXiaoxi:function(){var e={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,type:"update_notice",last_data_time:cc.vv.userMgr.update_notice.last_data_time};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_more_message",e,function(e){0!==e.errcode?(console.log(e.errmsg),this.DataSysXiaoxi(cc.vv.userMgr.update_notice.msgs)):(cc.vv.userMgr.update_notice.last_data_time=e.data_time,cc.vv.userMgr.update_notice.msgs=cc.vv.userMgr.update_notice.msgs.concat(e.msgs),this.DataSysXiaoxi(cc.vv.userMgr.update_notice.msgs))}.bind(this))},RequestActXiaoxi:function(){var e={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,type:"activity_notice",last_data_time:cc.vv.userMgr.activity_notice.last_data_time};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_more_message",e,function(e){0!==e.errcode?(console.log(e.errmsg),this.DataActXiaoxi(cc.vv.userMgr.activity_notice.msgs)):(cc.vv.userMgr.activity_notice.last_data_time=e.data_time,cc.vv.userMgr.activity_notice.msgs=cc.vv.userMgr.activity_notice.msgs.concat(e.msgs),this.DataActXiaoxi(cc.vv.userMgr.activity_notice.msgs))}.bind(this))},initButtonHandler:function(e){var t=cc.find(e);cc.vv.utils.addClickEvent(t,this.node,"Hall","onBtnClicked")},getViewItemRanking:function(e,t,n){var i=t;if(i.childrenCount>e)return i.children[e];var a=cc.instantiate(n);return i.addChild(a),a},deleteContentRanking:function(e,t){for(;t.childrenCount>e;){var n=t.children[t.childrenCount-1];t.removeChild(n,!0)}},DataSysXiaoxi:function(e){if(e&&0!=e.length){for(var t=this._systemDataLayer.height,n=0;n<e.length;n++){var i=this.getViewItemRanking(n,this._systemDataContent,this._systemDataLayer);i.indexID=n;var a=i.getChildByName("label").getComponent(cc.Label),c=e[n].create_time.substring(5,16);if(a.string=c+"    "+e[n].title,n>0){var o=this._systemDataContent.children[n-1].y;i.y=o-t-5}}this._systemDataContent.height=Math.abs(this._systemDataContent.children[e.length>0?e.length-1:0].y-this._systemDataContent.children[0].y-t),this.deleteContentRanking(e.length,this._systemDataContent)}},DataActXiaoxi:function(e){if(e&&0!=e.length){for(var t=this._activityDataLayer.height,n=0;n<e.length;n++){var i=this.getViewItemRanking(n,this._activityDataContent,this._activityDataLayer);i.indexID=n;var a=i.getChildByName("label").getComponent(cc.Label),c=e[n].create_time.substring(5,16);if(a.string=c+"    "+e[n].title,n>0){var o=this._activityDataContent.children[n-1].y;i.y=o-t-5}}this._activityDataContent.height=Math.abs(this._activityDataContent.children[e.length>0?e.length-1:0].y-this._activityDataContent.children[0].y-t),this.deleteContentRanking(e.length,this._activityDataContent)}},initLabels:function(){this.lblName.string=cc.vv.userMgr.userName,this.lblMoney.string=cc.vv.userMgr.coins,this.lblGems.string=cc.vv.userMgr.gems,this.lblID.string="ID:"+cc.vv.userMgr.userId},shareAddRoom:function(){},onBtnClicked:function(e){"btn_shezhi"==e.target.name?this.settingsWin.active=!0:"head"==e.target.name&&cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.coins,cc.vv.userMgr.gems,cc.vv.userMgr.toushika,cc.vv.userMgr.laba,cc.vv.userMgr.sign)},onReturnGameClicked:function(){"jl_dch_chch"==cc.vv.gameNetMgr.conf.type&&cc.director.loadScene("dchmjgame")},onBtnAddGemsClicked:function(){cc.vv.history._mallLayer.active=!0},RequestHeart:function(){var e=function(e){"0"==e.errcode&&(this._hallHeartAmount=0)}.bind(this),t={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/heart_beat",t,e)},onReconnectOk:function(){cc.director.loadScene("update")},update:function(e){if(this.scrollBar_state)if(cc.vv.userMgr._laba_SpeakingRecord.length<=0);else for(var t=0;t<cc.vv.userMgr._laba_SpeakingRecord.length;t++){this.lblNotice.string=cc.vv.userMgr._laba_SpeakingRecord[t].msgName+": "+cc.vv.userMgr._laba_SpeakingRecord[t].message,this.scrollBar(e);break}else this.scrollBar(e);cc.vv&&null!=cc.vv.userMgr.roomData&&(cc.vv.gameNetMgr.connectGameServer(cc.vv.userMgr.roomData),cc.vv.userMgr.roomData=null),this._yqs_time>0&&this.update_yqs_time(e),this._Onlline_time>0&&this.update_Onlline_time(e)},scrollBar:function(e){var t=this.lblNotice.node.x;(t-=100*e)+this.lblNotice.node.width<-(35*this.lblNotice.string.length+505)?(t=500,cc.vv.userMgr._laba_SpeakingRecord.splice(0,1),this.scrollBar_state=!0):this.scrollBar_state=!1,this.lblNotice.node.x=t},lebButton:function(e,t){this._lebButton=t},onBtnranking:function(){cc.vv.history.RefreshRankingArrBtn(),this._rankingInfo.active=!0},onEndranking:function(){this._rankingInfo.active=!1},onDisplayRankingInfo:function(e){for(var t=[],n=0;n<e.length;n++)if(null!=e[n]){var i={user_id:e[n].userID,name:e[n].userName,score:e[n].cash,headimg:e[n].headImag};t.push(i)}cc.vv.history.initRankingArrLayer(t)},requestDayRankingInfo:function(e){new Date;if(null==this._DayRanking){this._DayRankingTime=new Date;var t=this,n={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,type:e};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/rich_top10",n,function(n){0==n.errcode&&1==e&&(t._DayRanking=n.day_top10,t.onDisplayRankingInfo(t._DayRanking))})}else this.onDisplayRankingInfo(this._DayRanking)},obtainVerification:function(){var e=this._shojihaoLayer.getChildByName("labelBG").getChildByName("label").getComponent(cc.Label),t=this._shojihaoLayer.getChildByName("hqyzm_btn").getComponent(cc.Button),n=this._shojihaoLayer.getChildByName("hqyzm_btn").getChildByName("label").getComponent(cc.Label),i=this,a={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,phone_no:e.string,userid:cc.vv.userMgr.userId};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/send_verify_code",a,function(e){if(t.interactable=!1,"0"==e.errcode){i._lebButton=222;var a=60,c=setInterval(function(){a-=1,n.string=a+"s",0==a&&(n.string="",t.interactable=!0,clearInterval(c))},1e3)}else switch(t.interactable=!0,e.errcode){case 6010:cc.vv.alert.show("","用户已绑定手机号!");break;case 6011:cc.vv.alert.show("","手机号已被别的用户绑定!");break;case 6012:cc.vv.alert.show("","绑定手机，发验证码失败!");break;case 6102:cc.vv.alert.show("","手机号格式错误!");break;case 6103:cc.vv.alert.show("","不能重复请求手机验证码!");break;default:cc.vv.alert.show("","获取验证码失败，错误码!"+e.errcode)}})},open_xlxz:function(){var e=cc.find("Canvas/XL_xuanze/kuang_XL/jb_num").getComponent(cc.Label),t=cc.find("Canvas/XL_xuanze/kuang_XL/zs_num").getComponent(cc.Label);e.string=this.lblMoney.string,t.string=this.lblGems.string,this._XL_xuanze.active=!0},close_xlxz:function(){this._XL_xuanze.active=!1},open_ylcxz:function(){var e=cc.find("Canvas/entertainment_xuanze/kuang_yl/jb_num").getComponent(cc.Label),t=cc.find("Canvas/entertainment_xuanze/kuang_yl/zs_num").getComponent(cc.Label);e.string=this.lblMoney.string,t.string=this.lblGems.string,this._entertainment_xuanze.active=!0},close_ylcxz:function(){this._entertainment_xuanze.active=!1},requestRankcoin:function(){cc.vv.net.send("rankcoin")},requestRankcoinCharge:function(){cc.vv.net.send("rankcoincharge")},requestSevenDaysSign:function(){cc.vv.net.send("get_login_sign")},requestSign:function(){cc.vv.net.send("login_sign")},requestYaoQianShu:function(){cc.vv.net.send("get_yaoqianshu_info")},displaySign:function(){this._SevenDaysSign.active=!0},closeSign:function(){this._SevenDaysSign.active=!1},setCoins:function(e){this.lblMoney.string=e,cc.vv.userMgr.coins=e},setGems:function(e){this.lblGems.string=e,cc.vv.userMgr.gems=e},setNotice_num:function(e){cc.vv.userMgr.laba=e},settoushika_num:function(e){cc.vv.userMgr.toushika=e},display_YQS:function(){this._shakeQianShu.active=!0},close_YQS:function(){this._shakeQianShu.active=!1},update_yqs_time:function(e){this._yqs_time-=e,this._yqs_time<0&&(this._yqs_time=0,this.requestYaoQianShu());var t=Math.floor(this._yqs_time/60/60),n=Math.floor(this._yqs_time/60-60*t),i=Math.floor(this._yqs_time-60*n-60*t*60),a="";a+=t>0?"0"+t+":":"00:",a+=n>0&&n<10?"0"+n+":":n>=10?n+":":"00:",a+=i>0&&i<10?"0"+i:i>=10?i:"00",this._yqs_time<=0&&(a=""),this._yqs_time_label.string=a},receiveYaoQianShu_info:function(e){if(null!=e){this._shakeQianShu.getChildByName("lijigomai").active=!1,this._shakeQianShu.getChildByName("fahua").active=!1,this._shakeQianShu.getChildByName("schedule").active=!0,this._shakeQianShu.getChildByName("btn_receive").active=!0,this._yqs_time=e.time/1e3,this._shakeQianShu.getChildByName("btn_receive").getComponent(cc.Button).interactable=e.receive,this._yqs_existing_total_label.string=e.coin+"/"+e.maxCoin,this._yqs_explain_label.string="摇钱树等级LV"+e.level+"，已结金币"+e.coin,this._yqs_shu_level_label.string="LV "+e.level,this._schedule_bar.width=e.coin/e.maxCoin*474;var t=this._shakeQianShu.getChildByName("tree").getComponent(cc.Sprite),n="";n=e.maxCoin/e.coin>10?"textures/images/yaoqianshu/12":e.maxCoin/e.coin>8?"textures/images/yaoqianshu/6":e.maxCoin/e.coin>6?"textures/images/yaoqianshu/4":e.maxCoin/e.coin>4?"textures/images/yaoqianshu/3":e.maxCoin/e.coin>2?"textures/images/yaoqianshu/2":"textures/images/yaoqianshu/1",cc.loader.loadRes(n,cc.SpriteFrame,function(e,n){e||(t.spriteFrame=n)})}else this._yqs_shu_level_label.string="LV 0"},coinYaoQianShu:function(){cc.vv.net.send("get_yaoqianshu_coin")},add_getMainActivity:function(){cc.vv.anysdkMgr.getMainActivity()},obtainLineMessage:function(){var e=this._customer_EditBox.string;""!=e?cc.vv.net.send("message_board",e):this.onSecuritySettingPrompt("请输入您的留言")},receiveLineMessage:function(e){this._customer.getChildByName("btn_submit").getComponent(cc.Button).interactable=!1,this._customer.getChildByName("editBox_block").active=!0,this.onSecuritySettingPrompt("提交成功");var t=new Date,n=t.getFullYear(),i=t.getMonth(),a=t.getDate();cc.sys.localStorage.setItem("KF_Submit_Time",n+i+a+""),cc.sys.localStorage.setItem("KF_Submit_Content",this._customer_EditBox.string)},openCustomerInfo:function(){this.change_KeFu(),this._customer.active=!0},closeCustomerInfo:function(){this._customer.active=!1},mail_info:function(){cc.vv.net.send("mail_info")},mail_info_result:function(e){cc.vv.history.initMailboxLayer(e)},openTaskDetailsInfo:function(){this._taskDetails.active=!0},closeTaskDetailsInfo:function(){this._taskDetails.active=!1},openDiscountRechargeInfo:function(){this._discountRecharge.active=!0},shochonglibao:function(){cc.vv.anysdkMgr.HTTP_pay("010")},closeDiscountRechargeInfo:function(){this._discountRecharge.active=!1},openEventsAndAnnouncementsInfo:function(){this._eventsAndAnnouncements.active=!0},closeEventsAndAnnouncementsInfo:function(){this._eventsAndAnnouncements.active=!1},onBtnHottestBulletin:function(){this._btn_GameAnnouncement.active=!1,this._btn_HottestBulletin.active=!0,this._activePage.active=!0,this._announcementPage.active=!1},onBtnGameAnnouncement:function(){this._btn_HottestBulletin.active=!1,this._btn_GameAnnouncement.active=!0,this._activePage.active=!1,this._announcementPage.active=!0},help_btn_open:function(){this._help.active=!0},help_btn_back:function(){this._help.active=!1},task_info:function(){cc.vv.net.send("task_info")},task_info_result:function(e){console.log("收到任务奖励信息:"+e);for(t=0;t<this._everyDay_info_data.children.length;t++)0==t&&(this._everyDay_info_data.children[0].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.rcLogingift,this._everyDay_info_data.children[0].getChildByName("alreadyReceived").active=!1,2==e.rcLoginReceive&&(this._everyDay_info_data.children[0].getChildByName("btn_receive").active=!1,this._everyDay_info_data.children[0].getChildByName("alreadyReceived").active=!0)),1==t&&(this._everyDay_info_data.children[1].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.rcPlaygift,this._everyDay_info_data.children[1].getChildByName("complete_num").getComponent(cc.Label).string=e.rcPlayNum+"/"+e.rcPlayNumMax,this._everyDay_info_data.children[1].getChildByName("alreadyReceived").active=!1,1==e.rcPlayReceive?this._everyDay_info_data.children[1].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.rcPlayReceive?this._everyDay_info_data.children[1].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.rcPlayReceive&&(this._everyDay_info_data.children[1].getChildByName("btn_receive").active=!1,this._everyDay_info_data.children[1].getChildByName("alreadyReceived").active=!0)),2==t&&(this._everyDay_info_data.children[2].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.rcPlayWingift,this._everyDay_info_data.children[2].getChildByName("complete_num").getComponent(cc.Label).string=e.rcPlayWin+"/"+e.rcPlayWinMax,this._everyDay_info_data.children[2].getChildByName("alreadyReceived").active=!1,1==e.rcPlayWinReceive?this._everyDay_info_data.children[2].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.rcPlayWinReceive?this._everyDay_info_data.children[2].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.rcPlayWinReceive&&(this._everyDay_info_data.children[2].getChildByName("btn_receive").active=!1,this._everyDay_info_data.children[2].getChildByName("alreadyReceived").active=!0));for(var t=0;t<this._achievement_info_data.children.length;t++){if(0==t&&(this._achievement_info_data.children[0].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.versiongift,this._achievement_info_data.children[0].getChildByName("alreadyReceived").active=!1,1==e.versionReceive?this._achievement_info_data.children[0].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.versionReceive?this._achievement_info_data.children[0].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.versionReceive&&(this._achievement_info_data.children[0].getChildByName("btn_receive").active=!1,this._achievement_info_data.children[0].getChildByName("alreadyReceived").active=!0)),1==t){this._achievement_info_data.children[1].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.cjBairenShangzhuangWingift/1e8+"亿";n="";1==e.cjBairenShangzhuangWinReceive||2==e.cjBairenShangzhuangWinReceive?n="1/1":0==e.cjBairenShangzhuangWinReceive&&(n="0/1"),this._achievement_info_data.children[1].getChildByName("complete_num").getComponent(cc.Label).string=n,this._achievement_info_data.children[1].getChildByName("alreadyReceived").active=!1,1==e.cjBairenShangzhuangWinReceive?this._achievement_info_data.children[1].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.cjBairenShangzhuangWinReceive?this._achievement_info_data.children[1].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.cjBairenShangzhuangWinReceive&&(this._achievement_info_data.children[1].getChildByName("btn_receive").active=!1,this._achievement_info_data.children[1].getChildByName("alreadyReceived").active=!0)}if(2==t&&(this._achievement_info_data.children[2].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.cjPlaygift,this._achievement_info_data.children[2].getChildByName("complete_num").getComponent(cc.Label).string=e.cjPlayNum+"/"+e.cjPlayNumMax,this._achievement_info_data.children[2].getChildByName("alreadyReceived").active=!1,1==e.cjPlayReceive?this._achievement_info_data.children[2].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.cjPlayReceive?this._achievement_info_data.children[2].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.cjPlayReceive&&(this._achievement_info_data.children[2].getChildByName("btn_receive").active=!1,this._achievement_info_data.children[2].getChildByName("alreadyReceived").active=!0)),3==t&&(this._achievement_info_data.children[3].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.cjPlayWingift,this._achievement_info_data.children[3].getChildByName("complete_num").getComponent(cc.Label).string=e.cjPlayWin+"/"+e.cjPlayWinMax,this._achievement_info_data.children[3].getChildByName("alreadyReceived").active=!1,1==e.cjPlayWinReceive?this._achievement_info_data.children[3].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.cjPlayWinReceive?this._achievement_info_data.children[3].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.cjPlayWinReceive&&(this._achievement_info_data.children[3].getChildByName("btn_receive").active=!1,this._achievement_info_data.children[3].getChildByName("alreadyReceived").active=!0)),4==t){this._achievement_info_data.children[4].getChildByName("reward_num").getComponent(cc.Label).string="x "+e.cjPlayWinCoingift;var n="";1==e.cjPlayWinCoinReceive||2==e.cjPlayWinCoinReceive?n="1/1":0==e.cjPlayWinCoinReceive&&(n="0/1"),this._achievement_info_data.children[4].getChildByName("complete_num").getComponent(cc.Label).string=n,this._achievement_info_data.children[4].getChildByName("alreadyReceived").active=!1,1==e.cjPlayWinCoinReceive?this._achievement_info_data.children[4].getChildByName("btn_receive").getComponent(cc.Button).interactable=!0:0==e.cjPlayWinCoinReceive?this._achievement_info_data.children[4].getChildByName("btn_receive").getComponent(cc.Button).interactable=!1:2==e.cjPlayWinCoinReceive&&(this._achievement_info_data.children[4].getChildByName("btn_receive").active=!1,this._achievement_info_data.children[4].getChildByName("alreadyReceived").active=!0)}}2!=e.rcLoginReceive||1==e.rcPlayReceive||1==e.rcPlayWinReceive||1==e.versionReceive||e.cjBairenShangzhuangWinReceive||1==e.cjPlayReceive||1==e.cjPlayWinReceive||e.cjPlayWinCoinReceive},task_recieve:function(e){var t=e.target.parent.getChildByName("id").getComponent(cc.Label).string;cc.vv.net.send("task_recieve",t)},openFirstPackageInfo:function(){this._firstPackage.active=!0},closeFirstPackageInfo:function(){this._firstPackage.active=!1},open_modify_name_Interface:function(){var e=cc.vv.userMgr.userName;e.length>8&&(e=e.substr(0,8)),this._modify_name_Interface.getChildByName("EditBox").getComponent(cc.EditBox).string=e,this._modify_name_Interface.active=!0},close_modify_name_Interface:function(){this._modify_name_Interface.active=!1},modify_name_confirm:function(){var e=this._modify_name_Interface.getChildByName("EditBox").getComponent(cc.EditBox).string;cc.vv.net.send("change_name",e)},open_modify_sex_Interface:function(){this._modify_sex_Interface.active=!0},close_modify_sex_Interface:function(){this._modify_sex_Interface.active=!1,cc.vv.radiogroupmgr.check(this._sex_xuanze[cc.vv.userMgr.sex])},modify_sex_confirm:function(){for(var e=0,t=0;t<this._sex_xuanze.length;++t)if(this._sex_xuanze[t].checked){e=t;break}cc.vv.net.send("change_sex",e),cc.vv.userMgr.sex=e,this.close_modify_sex_Interface(),cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.coins,cc.vv.userMgr.gems,cc.vv.userMgr.toushika,cc.vv.userMgr.laba,cc.vv.userMgr.sign);var n=this.node.getChildByName("userinfo").getChildByName("icon").getComponent(cc.Sprite);cc.vv.userMgr._headimg||(0==cc.vv.userMgr.sex?n.spriteFrame.setTexture(cc.url.raw("resources/textures/images/hall/txnan.png")):1==cc.vv.userMgr.sex&&n.spriteFrame.setTexture(cc.url.raw("resources/textures/images/hall/txnv.png")),this.sprHeadImg.node.getComponent("ImageLoader").setUserID(cc.vv.userMgr.userId,cc.vv.userMgr._headimg))},determineSexDisplay:function(){0==cc.vv.userMgr.sex?(this._sex_xuanze[0].checked=!0,this._sex_xuanze[1].checked=!1):(this._sex_xuanze[0].checked=!1,this._sex_xuanze[1].checked=!0)},open_modify_autograph_Interface:function(){this._modify_autograph_Interface.getChildByName("EditBox").getComponent(cc.EditBox).string=cc.vv.userMgr.sign,this._modify_autograph_Interface.active=!0},close_modify_autograph_Interface:function(){this._modify_autograph_Interface.active=!1},modify_autograph_confirm:function(){var e=this._modify_autograph_Interface.getChildByName("EditBox").getComponent(cc.EditBox).string;cc.vv.net.send("change_sign",e)},open_shoppingMall:function(){this._shoppingMall.active=!0},close_shoppingMall:function(){this._shoppingMall.active=!1},open_VIP_Interface:function(){this._VIP_Interface.active=!0},close_VIP_Interface:function(){this._VIP_Interface.active=!1},VIP_clickLeft:function(){var e=this._current_display_level-1;this.display_VIP_Info(e),0==e?this._clickLeft.active=!1:this._clickRight.active=!0},VIP_clickRight:function(){var e=this._current_display_level+1;this.display_VIP_Info(e),10==e?this._clickRight.active=!1:this._clickLeft.active=!0},display_VIP_Info:function(e){if(this._current_display_level=e,this._VIP_level.getChildByName("level").getComponent(cc.Label).string=e,this._clickRight.getChildByName("level").getComponent(cc.Label).string="VIP"+(e+1),this._clickLeft.getChildByName("level").getComponent(cc.Label).string="VIP"+(e-1),0==e)this._privilege1.getChildByName("privilege1_hide").active=!0,this._privilege2.getChildByName("privilege2_hide").active=!0,this._privilege3.getChildByName("privilege3_hide").active=!0,this._privilege4.getChildByName("privilege4_hide").active=!0,this._privilege5.getChildByName("privilege5_hide").active=!0,this._privilege6.getChildByName("privilege6_hide").active=!0,this._privilege7.getChildByName("privilege7_hide").active=!0;else if(1==e)this._privilege1.getChildByName("privilege1_hide").active=!1,this._privilege2.getChildByName("privilege2_hide").active=!0,this._privilege3.getChildByName("privilege3_hide").active=!0,this._privilege4.getChildByName("privilege4_hide").active=!0,this._privilege5.getChildByName("privilege5_hide").active=!0,this._privilege6.getChildByName("privilege6_hide").active=!0,this._privilege7.getChildByName("privilege7_hide").active=!0,this._privilege4.getChildByName("explain").getComponent(cc.Label).string="赠送金币权限手续费 4%";else if(2==e)this._privilege1.getChildByName("privilege1_hide").active=!1,this._privilege2.getChildByName("privilege2_hide").active=!1,this._privilege3.getChildByName("privilege3_hide").active=!1,this._privilege4.getChildByName("privilege4_hide").active=!0,this._privilege5.getChildByName("privilege5_hide").active=!0,this._privilege6.getChildByName("privilege6_hide").active=!0,this._privilege7.getChildByName("privilege7_hide").active=!0,this._privilege4.getChildByName("explain").getComponent(cc.Label).string="赠送金币权限手续费 4%";else if(3==e||4==e||5==e||6==e||7==e||8==e){this._privilege1.getChildByName("privilege1_hide").active=!1,this._privilege2.getChildByName("privilege2_hide").active=!1,this._privilege3.getChildByName("privilege3_hide").active=!1,this._privilege4.getChildByName("privilege4_hide").active=!1,this._privilege5.getChildByName("privilege5_hide").active=!1,this._privilege6.getChildByName("privilege6_hide").active=!0,this._privilege7.getChildByName("privilege7_hide").active=!0;t="";3==e?t="赠送金币权限手续费 4%":4==e?t="赠送金币权限手续费 3.5%":5==e?t="赠送金币权限手续费 3.5%":6==e?t="赠送金币权限手续费 3%":7==e?t="赠送金币权限手续费 3%":8==e&&(t="赠送金币权限手续费 2.5%"),this._privilege4.getChildByName("explain").getComponent(cc.Label).string=t}else if(9==e||10==e){this._privilege1.getChildByName("privilege1_hide").active=!1,this._privilege2.getChildByName("privilege2_hide").active=!1,this._privilege3.getChildByName("privilege3_hide").active=!1,this._privilege4.getChildByName("privilege4_hide").active=!1,this._privilege5.getChildByName("privilege5_hide").active=!1,this._privilege6.getChildByName("privilege6_hide").active=!1,this._privilege7.getChildByName("privilege7_hide").active=!1;var t="";9==e?t="赠送金币权限手续费 2.5%":10==e&&(t="赠送金币权限手续费 2%"),this._privilege4.getChildByName("explain").getComponent(cc.Label).string=t}},jia_RechargeableGoldCoin:function(){this._discountRecharge.active=!0},jia_RechargeableDiamond:function(){this._discountRecharge.active=!0,this._discountRecharge.getChildByName("leixingxuanze").getChildByName("cjzs_btn").getComponent("RadioButton").onClickedDiscountRecharge()},change_name_result:function(e){0==e.errcode?(cc.vv.userMgr.userName=e.name,this.lblName.string=e.name,this.close_modify_name_Interface(),cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.coins,cc.vv.userMgr.gems,cc.vv.userMgr.toushika,cc.vv.userMgr.laba,cc.vv.userMgr.sign)):10005==e.errcode?this.onSecuritySettingPrompt("修改名字失败,金币不足"):10006==e.errcode&&this.onSecuritySettingPrompt("修改名字失败,金币不足")},change_sign_result:function(e){0==e.errcode&&(cc.vv.userMgr.sign=e.sign,this.close_modify_autograph_Interface(),cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.coins,cc.vv.userMgr.gems,cc.vv.userMgr.toushika,cc.vv.userMgr.laba,cc.vv.userMgr.sign))},VIP_request:function(){cc.vv.net.send("vip")},vip_result:function(e){console.log("收到VIP信息:"+e),10==e.vip?(this._RechargeExplain.string="你当前VIP等级已满",this._VIP_ProgressBar.width=484,this._speedofprogress.string=""):(this._VIP_ProgressBar.width=e.totalRecharge/e.nextRecharge*484,this._RechargeExplain.string="再充值"+(e.nextRecharge-e.totalRecharge)+"元，即可成为VIP"+(e.vip+1),this._speedofprogress.string=e.totalRecharge+"/"+e.nextRecharge),cc.vv.userMgr.vip=e.vip,this._current_display_level=cc.vv.userMgr.vip,this.display_VIP_Info(e.vip)},exchangeGoldCoins:function(e){var t=e.getCurrentTarget().getComponent(cc.Button).clickEvents[0].customEventData;cc.vv.net.send("Recharge",t)},Recharge_result:function(e){10006==e.errcode?cc.vv.alert.show("","金币兑换失败,钻石不足"):10008==e.errcode?cc.vv.alert.show("","金币兑换成功"):10009==e.errcode?cc.vv.alert.show("","喇叭兑换失败,钻石不足"):10010==e.errcode?cc.vv.alert.show("","喇叭兑换成功"):10011==e.errcode?cc.vv.alert.show("","透视卡兑换失败,钻石不足"):10012==e.errcode&&cc.vv.alert.show("","透视卡兑换成功")},ExchangeProps:function(e){var t=e.getCurrentTarget().getComponent(cc.Button).clickEvents[0].customEventData;cc.vv.net.send("Recharge",t)},XLCH_GameChoice:function(e,t){if(cc.vv.userMgr.coins<3e3)cc.vv.hall.onSecuritySettingPrompt("你的金币小于3000");else{if(1==t){if(!(cc.vv.userMgr.coins>=3e3&&cc.vv.userMgr.coins<2e4))return void cc.vv.hall.onSecuritySettingPrompt("进入等级不匹配");cc.vv.gameNetMgr.choice_place_lv=1}else if(2==t){if(!(cc.vv.userMgr.coins>=2e4&&cc.vv.userMgr.coins<5e4))return void cc.vv.hall.onSecuritySettingPrompt("进入等级不匹配");cc.vv.gameNetMgr.choice_place_lv=2}else if(3==t){if(!(cc.vv.userMgr.coins>=5e4))return void cc.vv.hall.onSecuritySettingPrompt("进入等级不匹配");cc.vv.gameNetMgr.choice_place_lv=3}else 4==t&&(cc.vv.userMgr.coins>=5e4?cc.vv.gameNetMgr.choice_place_lv=3:cc.vv.userMgr.coins>=2e4?cc.vv.gameNetMgr.choice_place_lv=2:cc.vv.gameNetMgr.choice_place_lv=1);cc.vv.wc.show("正在进入房间");for(var n=[],i=0;i<4;i++){var a={name:"",online:!1,sex:-1,ready:!1,seatindex:-1,userid:0,heading:null,score:0,ip:0};n.push(a)}cc.vv.gameNetMgr.seats=n,cc.vv.gameNetMgr.seats[0].userid=cc.vv.userMgr.userId,cc.vv.gameNetMgr.seats[0].name=cc.vv.userMgr.userName,cc.vv.gameNetMgr.seats[0].heading=cc.vv.userMgr._headimg,cc.vv.gameNetMgr.seats[0].ready=!0,cc.vv.gameNetMgr.seats[0].seatindex=0,cc.vv.gameNetMgr.seats[0].sex=cc.vv.userMgr.sex,cc.vv.gameNetMgr.seats[0].score=cc.vv.userMgr.coins,cc.vv.gameNetMgr.seatIndex=cc.vv.gameNetMgr.getSeatIndexByID(cc.vv.userMgr.userId),cc.vv.gameNetMgr.isOver=!1,cc.vv._Gametype="XL_MJGame",console.log("加载血流场景之前:-----"),setTimeout(function(){cc.director.loadScene("xlmjgame",function(){console.log("加载血流场景完成之后:-----"),cc.vv.net.send("xlch_join",cc.vv.gameNetMgr.choice_place_lv),console.log("加载血流场景完成之后++xlch_join:-----")})},100)}},UserInfoShow:function(e){cc.vv.userinfoShow._userinfo.active=!1},open_securitySetting:function(){var e=this._securitySetting.getChildByName("leixingxuanze").getChildByName("bdsj_btn").getComponent("RadioButton");cc.vv.userMgr._phone&&e.checked?(cc.vv.hall._bindingCompleted.active=!0,cc.vv.hall._bindingCompleted.getChildByName("phoneNumber").getComponent(cc.Label).string="绑定手机号码     "+cc.vv.userMgr._phone,cc.vv.hall._bindMobilePhone.active=!1):(this._bindMobilePhone.getChildByName("phoneEditBox").getComponent(cc.EditBox).string="",this._bindMobilePhone.getChildByName("passwordEditBox").getComponent(cc.EditBox).string="",this._bindMobilePhone.getChildByName("verificationEditBox").getComponent(cc.EditBox).string=""),this._securitySetting.active=!0},close_securitySetting:function(){this._securitySetting.active=!1},bdsj_hqyzm:function(){var e=this._bindMobilePhone.getChildByName("phoneEditBox").getComponent(cc.EditBox),t=this._bindMobilePhone.getChildByName("countDown").getComponent(cc.Label),n=this._bindMobilePhone.getChildByName("authenticationCode").getComponent(cc.Button);if(""!=e.string){var i=60;cc.vv.net.send("get_verify_code",e.string),n.interactable=!1,t.string=i+"s后重新获取";var a=setInterval(function(){i-=1,t.string=i+"s后重新获取",0==i&&(t.string="",n.interactable=!0,clearInterval(a))},1e3)}else this.onSecuritySettingPrompt("请输入手机号码")},DetermineBinding:function(){var e=this._bindMobilePhone.getChildByName("phoneEditBox").getComponent(cc.EditBox),t=this._bindMobilePhone.getChildByName("passwordEditBox").getComponent(cc.EditBox),n=this._bindMobilePhone.getChildByName("verificationEditBox").getComponent(cc.EditBox);""!=e.string?""!=t.string?""!=n.string?""!=e.string&&""!=t.string&&""!=n.string&&cc.vv.net.send("bind_phone_passwod",{phone:e.string,password:t.string,code:n.string}):this.onSecuritySettingPrompt("请输入验证码"):this.onSecuritySettingPrompt("请输入密码"):this.onSecuritySettingPrompt("请输入手机号码")},bind_phone_passwod_result:function(e){0==e.errcode?(cc.sys.localStorage.setItem("Login_phone",e.phone),cc.sys.localStorage.setItem("Login_password",e.password),cc.vv.userMgr._phone=e.phone,this._bindMobilePhone.active=!1,this._bindingCompleted.getChildByName("phoneNumber").getComponent(cc.Label).string="绑定手机号码     "+e.phone,this._bindingCompleted.active=!0,this.onSecuritySettingPrompt("绑定成功")):10014==e.errcode&&cc.vv.hall.onSecuritySettingPrompt("手机号已绑定")},open_ghsjhm_dyb:function(){this._replace.getChildByName("phoneNumber").getComponent(cc.Label).string=cc.vv.userMgr._phone,this._replace.getChildByName("verificationEditBox").getComponent(cc.EditBox).string="",this._replace.active=!0},close_ghsjhm_dyb:function(){this._replace.active=!1},ghsjhm_hqyzm_dyb:function(){var e=this._replace.getChildByName("authenticationCode").getComponent(cc.Button),t=this._replace.getChildByName("countDown").getComponent(cc.Label),n=60;cc.vv.net.send("get_verify_code",cc.vv.userMgr._phone),e.interactable=!1,t.string=n+"s后重新获取";var i=setInterval(function(){n-=1,t.string=n+"s后重新获取",0==n&&(t.string="",e.interactable=!0,clearInterval(i))},1e3)},btn_ghsjhh_xyb:function(){var e=this._replace.getChildByName("verificationEditBox").getComponent(cc.EditBox);""!=e.string?cc.vv.net.send("verify_code",e.string):this.onSecuritySettingPrompt("请输入验证码")},verify_code_result:function(e){0==e.errcode?(this.close_ghsjhm_dyb(),this.open_replaceNextStep()):10015==e.errcode&&this.onSecuritySettingPrompt("验证码错误")},open_replaceNextStep:function(){this._replaceNextStep.active=!0,this._replaceNextStep.getChildByName("phoneEditBox").getComponent(cc.EditBox).string="",this._replaceNextStep.getChildByName("verificationEditBox").getComponent(cc.EditBox).string=""},close_replaceNextStep:function(){this._replaceNextStep.active=!1},ghsjhm_hqyzm_deb:function(){var e=this._replaceNextStep.getChildByName("authenticationCode").getComponent(cc.Button),t=this._replaceNextStep.getChildByName("phoneEditBox").getComponent(cc.EditBox),n=this._replaceNextStep.getChildByName("countDown").getComponent(cc.Label);if(""!=t.string){var i=60;cc.vv.net.send("get_verify_code",t.string),e.interactable=!1,n.string=i+"s后重新获取";var a=setInterval(function(){i-=1,n.string=i+"s后重新获取",0==i&&(n.string="",e.interactable=!0,clearInterval(a))},1e3)}else this.onSecuritySettingPrompt("请输入手机号码")},btn_ghsjhh_bddeb:function(){var e=this._replaceNextStep.getChildByName("phoneEditBox").getComponent(cc.EditBox),t=this._replaceNextStep.getChildByName("verificationEditBox").getComponent(cc.EditBox);""==e.string?this.onSecuritySettingPrompt("请输入手机号码"):""==t.string&&this.onSecuritySettingPrompt("请输入验证码"),""!=e.string&&""!=t.string&&cc.vv.net.send("change_phone",{phone:e.string,code:t.string})},change_phone_result:function(e){0==e.errcode?(cc.vv.userMgr._phone=e.newphone,cc.vv.hall._bindingCompleted.getChildByName("phoneNumber").getComponent(cc.Label).string="绑定手机号码     "+cc.vv.userMgr._phone,this.close_replaceNextStep(),this.onSecuritySettingPrompt("更换手机号码成功")):10015==e.errcode?this.onSecuritySettingPrompt("验证码错误"):10014==e.errcode&&cc.vv.hall.onSecuritySettingPrompt("手机号已绑定")},btn_qhzh_queding:function(){var e=this._switchAccount.getChildByName("phoneEditBox").getComponent(cc.EditBox),t=this._switchAccount.getChildByName("passwordEditBox").getComponent(cc.EditBox);""==e.string?this.onSecuritySettingPrompt("请输入账号"):""==t.string&&this.onSecuritySettingPrompt("请输入密码"),""!=e.string&&""!=t.string&&cc.vv.net.send("check_pass",{phone:e.string,password:t.string})},check_pass_result:function(e){if(0==e.errcode){var t=this._switchAccount.getChildByName("phoneEditBox").getComponent(cc.EditBox).string,n=this._switchAccount.getChildByName("passwordEditBox").getComponent(cc.EditBox).string;cc.sys.localStorage.setItem("Login_phone",t),cc.sys.localStorage.setItem("Login_password",n),cc.game.restart()}else 10013==e.errcode&&this.onSecuritySettingPrompt("密码错误")},open_resetPassword:function(){this._resetPassword.getChildByName("passwordEditBox").getComponent(cc.EditBox).string="",this._resetPassword.getChildByName("verificationEditBox").getComponent(cc.EditBox).string="",this._resetPassword.active=!0},close_resetPassword:function(){this._resetPassword.active=!1},btn_forgotPassword:function(){this._resetPassword.getChildByName("phoneNumber").getComponent(cc.EditBox).string="",null!=cc.vv.userMgr._phone&&""!=cc.vv.userMgr._phone&&(this._resetPassword.getChildByName("phoneNumber").getComponent(cc.EditBox).string=cc.vv.userMgr._phone),this.open_resetPassword()},czmm_hqyzm:function(){var e=this._resetPassword.getChildByName("phoneNumber").getComponent(cc.EditBox);if(""!=e.string&&null!=e.string){var t=this._resetPassword.getChildByName("authenticationCode").getComponent(cc.Button),n=this._resetPassword.getChildByName("countDown").getComponent(cc.Label),i=60;cc.vv.net.send("get_verify_code",e.string),t.interactable=!1,n.string=i+"s后重新获取";var a=setInterval(function(){i-=1,n.string=i+"s后重新获取",0==i&&(n.string="",t.interactable=!0,clearInterval(a))},1e3)}else this.onSecuritySettingPrompt("请输入手机号码")},czmm_queding:function(){var e=this._resetPassword.getChildByName("phoneNumber").getComponent(cc.EditBox),t=this._resetPassword.getChildByName("passwordEditBox").getComponent(cc.EditBox),n=this._resetPassword.getChildByName("verificationEditBox").getComponent(cc.EditBox);""==e.string?this.onSecuritySettingPrompt("请输入手机号码"):""==t.string?this.onSecuritySettingPrompt("请输入密码"):""==n.string&&this.onSecuritySettingPrompt("请输入验证码"),""!=t.string&&""!=n.string&&""!=e.string&&cc.vv.net.send("change_password",{password:t.string,code:n.string,phone:e.string})},change_password_result:function(e){0==e.errcode?(cc.sys.localStorage.setItem("Login_password",e.newpassword),this.onSecuritySettingPrompt("密码修改成功"),this._resetPassword.active=!1,this._securitySetting.getChildByName("leixingxuanze").getChildByName("xgmm_btn").getComponent("RadioButton").checked?(this._modifyPassword.getChildByName("oldPasswordEditBox").getComponent(cc.EditBox).string="",this._modifyPassword.getChildByName("newPasswordEditBox").getComponent(cc.EditBox).string="",this._modifyPassword.getChildByName("confirmationPasswordEditBox").getComponent(cc.EditBox).string=""):(this._resetPassword.getChildByName("passwordEditBox").getComponent(cc.EditBox).string="",this._resetPassword.getChildByName("verificationEditBox").getComponent(cc.EditBox).string="")):10015==e.errcode&&this.onSecuritySettingPrompt("验证码错误")},xgmm_btn:function(){var e=this._modifyPassword.getChildByName("oldPasswordEditBox").getComponent(cc.EditBox),t=this._modifyPassword.getChildByName("newPasswordEditBox").getComponent(cc.EditBox),n=this._modifyPassword.getChildByName("confirmationPasswordEditBox").getComponent(cc.EditBox);""==e.string?this.onSecuritySettingPrompt("请输入旧密码"):t.string&&this.onSecuritySettingPrompt("请输入新密码"),t.string===n.string?""!=e.string&&""!=t.string&&""!=n.string&&cc.vv.net.send("change_password",{password:e.string,newpassword:t.string}):this.onSecuritySettingPrompt("两次密码不一致")},set_head_result:function(e){console.log("图片地址"+e),cc.vv.userMgr._headimg=e,this.sprHeadImg.node.getComponent("ImageLoader").setUserID(cc.vv.userMgr.userId,cc.vv.userMgr._headimg);var t=this.node.getChildByName("userinfo").getChildByName("icon").getComponent(cc.Sprite);cc.vv.userMgr._headimg&&cc.loader.load(cc.vv.userMgr._headimg,function(e,n){if(null!=n){var i=new cc.SpriteFrame(n,cc.Rect(0,0,n.width,n.height));t.spriteFrame=i}}),""!=cc.vv.userMgr._headimg&&null!=cc.vv.userMgr._headimg&&(this.node.getChildByName("userinfo").getChildByName("reward_Label").active=!1)},hallIntroduceExplain:function(){for(n=0;n<this._introduceExplain.children.length;n++)this._introduceExplain.children[n].active=!1;for(var e=this._help.getChildByName("leixingxuanze"),t=0,n=0;n<e.childrenCount;++n)if(null!=(c=e.children[n].getComponent("RadioButton"))&&c.checked){t=n;break}for(var i=this._help.getChildByName("leixing_ruleandsettlement"),a=0,n=0;n<i.childrenCount;++n){var c=i.children[n].getComponent("RadioButton");if(null!=c&&c.checked){a=n;break}}0==t?0==a?this._introduceExplain.children[0].active=!0:1==a&&(this._introduceExplain.children[3].active=!0):1==t?0==a?this._introduceExplain.children[1].active=!0:1==a&&(this._introduceExplain.children[4].active=!0):2==t&&(0==a?this._introduceExplain.children[2].active=!0:1==a&&(this._introduceExplain.children[5].active=!0))},WebView_shiyan:function(e,t){t===cc.WebView.EventType.LOADED?console.log("WebView:网页加载已经完毕"):t===cc.WebView.EventType.LOADING?console.log("WebView:网页正在加载过程中"):t===cc.WebView.EventType.ERROR&&console.log("WebView:网页加载出错了")},huodong_click:function(){this.onBtnHottestBulletin(),this._eventsAndAnnouncements.active=!0},XLCH_ZuiDaPaiXin:function(){var e=cc.vv.userMgr._XLCH_ZDF_PX;if(e.maxFan>0){this._NoData.active=!1,this._card_Type.getChildByName("winningProbability").getComponent(cc.Label).string="胜率："+e.shenglv+"%",this._card_Type.getChildByName("zuidafan").getComponent(cc.Label).string="最大番："+e.maxFan;var t="";"normal"==e.maxPaixing?t="平胡":"duidui"==e.maxPaixing?t="对对胡":"qingyise"==e.maxPaixing?t="清一色":"qidui"==e.maxPaixing?t="七对":"yaojiu"==e.maxPaixing?t="幺九":"jingougou"==e.maxPaixing?t="金钩钩":"qingdui"==e.maxPaixing?t="清对":"qingqidui"==e.maxPaixing?t="清七对":"longqidui"==e.maxPaixing?t="龙七对":"qingyaojiu"==e.maxPaixing?t="清幺九":"qingjingougou"==e.maxPaixing?t="清金钩钩":"jiangjingougou"==e.maxPaixing?t="将金钩钩":"qinglongqidui"==e.maxPaixing&&(t="清龙七对"),this._card_Type.getChildByName("paiXing").getComponent(cc.Label).string="最大牌型："+t,this._card_Type.getChildByName("MJ");for(l=0;l<this._card_Type.getChildByName("MJ").children.length;l++)this._card_Type.getChildByName("MJ").children[l].active=!1;for(l=0;l<this._card_Type.getChildByName("pengAndGang").children.length;l++)this._card_Type.getChildByName("pengAndGang").children[l].active=!1;for(var n=[],i=[],a=[],c=0;c<e.paixingtu.holds.length;c++)e.paixingtu.holds[c]>17?n.push(e.paixingtu.holds[c]):e.paixingtu.holds[c]>8?a.push(e.paixingtu.holds[c]):i.push(e.paixingtu.holds[c]);n.sort(function(e,t){return e>t}),i.sort(function(e,t){return e>t}),a.sort(function(e,t){return e>t});var o=n.concat(i,a);e.paixingtu.holds=o;for(c=0;c<e.paixingtu.holds.length;c++){u=this._card_Type.getChildByName("MJ").children[c].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(u,"B_",e.paixingtu.holds[c]),u.node.active=!0}for(var s=0,c=0;c<e.paixingtu.angang.length;c++){for(var r=this._card_Type.getChildByName("pengAndGang").children[s],l=0;l<r.children.length;l++){if(l==r.children.length-1){u=r.children[l].getComponent(cc.Sprite);cc.vv.mahjongmgr.getEmptySpriteFrame(u,"myself"),u.node.active=!0}u=r.children[l].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(u,"B_",e.paixingtu.angang[c]),u.node.active=!0}r.active=!0,s++}for(c=0;c<e.paixingtu.wangang.length;c++){for(var h=this._card_Type.getChildByName("pengAndGang").children[s],l=0;l<h.children.length;l++){u=h.children[l].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(u,"B_",e.paixingtu.wangang[c]),u.node.active=!0}h.active=!0,s++}for(c=0;c<e.paixingtu.diangang.length;c++){for(var g=this._card_Type.getChildByName("pengAndGang").children[s],l=0;l<g.children.length;l++){u=g.children[l].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(u,"B_",e.paixingtu.diangang[c]),u.node.active=!0}g.active=!0,s++}for(c=0;c<e.paixingtu.peng.length;c++){for(var d=this._card_Type.getChildByName("pengAndGang").children[s],l=0;l<d.children.length;l++)if(l!=d.children.length-1){var u=d.children[l].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(u,"B_",e.paixingtu.peng[c]),u.node.active=!0}else d.children[l].active=!1;d.active=!0,s++}this._card_Type.active=!0}else this._card_Type.active=!1,this._NoData.active=!0},display_horn_Record:function(){this._horn_Record.active=!0},hide_horn_Record:function(){this._horn_Record.active=!1,this._horn_Record.getChildByName("EditBox").getComponent(cc.EditBox).string=""},horn_Record_display:function(e){var t=this.getViewItemChat(this._hornRecord_data_content.childrenCount,this._hornRecord_data_content,this._hornRecordr_data),n=t.getChildByName("chatContent");n.getComponent(cc.RichText).string=e.msgName+": "+e.message,n.height>120&&(t.height=n.height+30);for(var i=0,a=0;a<this._hornRecord_data_content.childrenCount;a++)i+=this._hornRecord_data_content.children[a].height;this._hornRecord_data_content.height=i+20*this._hornRecord_data_content.childrenCount},radioBroadcast:function(){var e=this._horn_Record.getChildByName("EditBox").getComponent(cc.EditBox);""!=e.string&&null!=e.string?(cc.vv.net.send("laba",e.string),this.hide_horn_Record(),e.string=""):this.onSecuritySettingPrompt("请输入内容")},getViewItemChat:function(e,t,n){var i=t;if(i.childrenCount>e)return i.children[e];var a=cc.instantiate(n);return i.addChild(a),a},deleteContentChat:function(e,t){for(;t.childrenCount>e;){var n=t.children[t.childrenCount-1];t.removeChild(n,!0)}},HTTP_pay:function(e,t){cc.vv.anysdkMgr.HTTP_pay(t)},Onlline:function(){cc.vv.net.send("Onlline")},Onlline_result:function(e){this._Onlline_time=e.lingqushijian,this._Onlline_time<=0&&(this._btn_onlineRewards.getChildByName("onlineTime").active=!1,this._btn_onlineRewards.getChildByName("canReceive").active=!0,this._btn_onlineRewards.getComponent(cc.Button).interactable=!0)},update_Onlline_time:function(e){this._Onlline_time-=e,this._Onlline_time<0&&(this._Onlline_time=-1,this._btn_onlineRewards.getChildByName("onlineTime").active=!1,this._btn_onlineRewards.getChildByName("canReceive").active=!0,this._btn_onlineRewards.getComponent(cc.Button).interactable=!0);var t=Math.floor(this._Onlline_time/60/60),n=Math.floor(this._Onlline_time/60-60*t),i=Math.floor(this._Onlline_time-60*n-60*t*60),a="";t>0&&(a+="0"+t+"/"),a+=n>0&&n<10?"0"+n+"/":n>=10?n+"/":"00/",a+=i>0&&i<10?"0"+i:i>=10?i:"00",this._Onlline_time<=0&&(a=""),this._onlineTime_Label.string=a},canReceive_Onlline:function(){cc.vv.net.send("Onlinelgift")},Onlinelgift_result:function(e){this._Onlline_time=e.xiacilingqushijian,this._btn_onlineRewards.getComponent(cc.Button).interactable=!1,this._btn_onlineRewards.getChildByName("canReceive").active=!1,this._btn_onlineRewards.getChildByName("onlineTime").active=!0,5==e.number&&(this._btn_onlineRewards.active=!1)},change_KeFu:function(){var e=new Date,t=e.getFullYear()+e.getMonth()+e.getDate()+"",n=cc.sys.localStorage.getItem("KF_Submit_Time"),i=cc.sys.localStorage.getItem("KF_Submit_Content");null==i&&(i=""),n==t?(this._customer.getChildByName("btn_submit").getComponent(cc.Button).interactable=!1,this._customer.getChildByName("editBox_block").active=!0,this._customer_EditBox.string=i):(this._customer.getChildByName("btn_submit").getComponent(cc.Button).interactable=!0,this._customer.getChildByName("editBox_block").active=!1,this._customer_EditBox.string="",cc.sys.localStorage.setItem("KF_Submit_Content",""))},switch_YouKe:function(){cc.sys.localStorage.clear(),cc.game.restart()},inspect_mailbox:function(){var e=cc.vv.history._mailbox_data_Info;if(e)for(var t=0;t<e.length;t++)0!=e.state&&1!=e.state||!0},yxjjsxjqqd:function(){this.onSecuritySettingPrompt("即将上线，敬请期待！")},cheshi_dingdanhao:function(){cc.vv.anysdkMgr.dingdanyanzhen("12345649879")}}),cc._RF.pop()},{CheckBoxGroupMgr:"CheckBoxGroupMgr",Global:"Global",Net:"Net"}],History:[function(e,t,n){"use strict";cc._RF.push(t,"4d7bci0LUxMT6MJKXJDj89w","History"),cc.Class({extends:cc.Component,properties:{HistoryItemPrefab:{default:null,type:cc.Prefab},_history:null,_viewlist:null,_content:null,_viewitemTemp:null,_historyData:null,_curRoomInfo:null,_emptyTip:null,_fxLayer:null,_mallLayer:null,_ZFLayer:null,_FillingFK:0,_FillingMoney:0,_SClabel:"",_playback:null,_viewlist1:null,_content1:null,_viewitemTemp1:null,_CaiFuNotice:null,_ShoYiNotice:null,_rankcoin:null,_rankcoincharge:null,_signInfo:null,_RankingArrLayer:null,_RankingArr_data_content:null,_RankingArr_data:null,_revenue_ranking:null,_fortune_ranking:null,_xl_revenue_ranking:null,_wrc_revenue_ranking:null,_bzw_revenue_ranking:null,_mailboxLayer:null,_mailbox_data_content:null,_mailbox_data:null,_mailbox_data_Info:null,_mailbox_details:null,_incidental_goods:null,_NoData:null},onLoad:function(){console.log("开始加载 History.js"),cc.vv.history=this,null!=cc.vv.SaveTempHistoryData&&null!=cc.vv.SaveTempRoomInfo&&(this._historyData=cc.vv.SaveTempHistoryData,this.initGameHistoryList(cc.vv.SaveTempRoomInfo.roomInfo,cc.vv.SaveTempRoomInfo.data)),this._CaiFuNotice=this.node.getChildByName("bangdan").getChildByName("CaiFuNotice"),this._ShoYiNotice=this.node.getChildByName("bangdan").getChildByName("ShoYiNotice"),this._rankcoin=this._CaiFuNotice.getChildByName("view").getChildByName("content"),this._rankcoincharge=this._ShoYiNotice.getChildByName("view").getChildByName("content"),this._signInfo=this.node.getChildByName("SevenDaysSign").getChildByName("sign"),this._RankingArrLayer=this.node.getChildByName("rankingInfo"),this._RankingArr_data_content=cc.find("data/view/content",this._RankingArrLayer),this._RankingArr_data=this._RankingArr_data_content.children[0],this._RankingArr_data_content.removeChild(this._RankingArr_data),this._mailboxLayer=this.node.getChildByName("mailbox"),this._mailbox_data_content=cc.find("New ScrollView/view/content",this._mailboxLayer),this._mailbox_data=this._mailbox_data_content.children[0],this._mailbox_data_content.removeChild(this._mailbox_data),this._mailbox_details=this.node.getChildByName("mailbox_details"),this._incidental_goods=this._mailbox_details.getChildByName("incidental_goods"),this._NoData=this._mailboxLayer.getChildByName("NoData"),console.log("加载完成 History.js")},onBtnBackClickedshangcheng:function(){this._SClabel.string="代理招募微信："+cc.vv.userMgr.gemstip.msg,this._mallLayer.active=!0},onBtnBackClickedMallzfEnd:function(){this._ZFLayer.active=!1,cc.vv.hall.refreshInfo()},addClickEvent:function(e,t,n,i){var a=new cc.Component.EventHandler;a.target=t,a.component=n,a.handler=i,e.getComponent(cc.Button).clickEvents.push(a)},onBtnBackClicked:function(){this._historyData=null,this._history.active=!1,cc.vv.SaveTempHistoryData=null,cc.vv.SaveTempRoomInfo=null},onBtnBackClickedShare:function(){this._fxLayer.active=!0},onBtnBackClickedEnd:function(){this._fxLayer.active=!1},onBtnBackClickedCircle:function(){cc.vv.anysdkMgr.share("大呲花麻将","大呲花麻将，包含了多种全国流行麻将玩法，点击下载游戏。",!0)},onBtnBackClickedFriends:function(){cc.vv.anysdkMgr.share("大呲花麻将","大呲花麻将，包含了多种全国流行麻将玩法，点击下载游戏。",!1)},onBtnBackClickedZFBCircle:function(){cc.vv.anysdkMgr.alishare("大呲花麻将","大呲花麻将，包含了多种全国流行麻将玩法，点击下载游戏。",!0)},onBtnBackClickedZFBFriends:function(){cc.vv.anysdkMgr.alishare("大呲花麻将","大呲花麻将，包含了多种全国流行麻将玩法，点击下载游戏。",!1)},onBtnBackClickedCircle_YM:function(){cc.vv.anysdkMgr.share("大呲花麻将","我的Y码："+cc.vv.userMgr.myYcode+"邀请你来玩大呲花麻将，绑定推荐码赠送钻石。",!0)},onBtnBackClickedFriends_YM:function(){cc.vv.anysdkMgr.share("大呲花麻将","我的Y码："+cc.vv.userMgr.myYcode+"邀请你来玩大呲花麻将，绑定推荐码赠送钻石。",!1)},onBtnBackClickedZFBCircle_YM:function(){cc.vv.anysdkMgr.alishare("大呲花麻将","我的Y码："+cc.vv.userMgr.myYcode+"邀请你来玩大呲花麻将，绑定Y码赠送钻石。",!0)},onBtnBackClickedZFBFriends_YM:function(){cc.vv.anysdkMgr.alishare("大呲花麻将","我的Y码："+cc.vv.userMgr.myYcode+"邀请你来玩大呲花麻将，绑定Y码赠送钻石。",!1)},onBtnHistoryClicked:function(){this._history.active=!0;var e=this;cc.vv.userMgr.getHistoryList(function(t){e._historyData=t,cc.vv.SaveTempHistoryData=e._historyData,e.initRoomHistoryList(t)})},dateFormat:function(e){var t=new Date(e),n="{0}-{1}-{2} {3}:{4}:{5}",i=t.getFullYear(),a=t.getMonth()+1;a=a>=10?a:"0"+a;var c=t.getDate();c=c>=10?c:"0"+c;var o=t.getHours();o=o>=10?o:"0"+o;var s=t.getMinutes();s=s>=10?s:"0"+s;var r=t.getSeconds();return r=r>=10?r:"0"+r,n=n.format(i,a,c,o,s,r)},initRoomHistoryList:function(e){for(var t=0;t<e.length;++t){var n=this.getViewItem(t);n.idx=t;for(a=0;a<e[t].seats.length;++a)cc.vv.userMgr.userId==e[t].seats[a].userid&&(e[t].seats[a].score>0?(n.getChildByName("shu").active=!1,n.getChildByName("ying").active=!0):e[t].seats[a].score<=0&&(n.getChildByName("ying").active=!1,n.getChildByName("shu").active=!0));n.getChildByName("roomNo").getComponent(cc.Label).string=e[t].roomno;var i=this.dateFormat(1e3*e[t].begintime);n.getChildByName("time").getComponent(cc.Label).string=i;for(var a=0;a<e[t].seats.length;++a){var c=e[t].seats[a];if(c.name.length>4)o=c.name.substr(0,4)+" : "+c.score;else var o=c.name+" : "+c.score;n.getChildByName("info"+a).getComponent(cc.Label).string=o}}this._emptyTip.active=0==e.length,this.shrinkContent(e.length),this._curRoomInfo=null},initGameHistoryList:function(e,t){t.sort(function(e,t){return e.create_time<t.create_time}),this._history.active=!1;var n=this.node.getChildByName("playback");n.active=!0;for(var i=0;i<e.seats.length;++i)e.seats[i].name.length>4?n.getChildByName("userName"+i).getComponent(cc.Label).string=e.seats[i].name.substr(0,4):n.getChildByName("userName"+i).getComponent(cc.Label).string=e.seats[i].name;for(var a=0;a<t.length;++a){var c=this.getViewItem1(a);c.idx=a+1,c.playback_code=t[a].gameId;var o=""+(a+1);c.getChildByName("title").getComponent(cc.Label).string=o;var s=this.dateFormat(1e3*t[a].beginTime);c.getChildByName("time").getComponent(cc.Label).string=s;for(var r=JSON.parse(t[a].result),l=0;l<e.seats.length;++l){var h=r?r[l]:"";c.getChildByName("info"+l).getComponent(cc.Label).string=h}}this.shrinkContent1(t.length),this._curRoomInfo=e},getViewItem:function(e){var t=this._content;if(t.childrenCount>e)return t.children[e];var n=cc.instantiate(this._viewitemTemp);return t.addChild(n),n},getViewItem1:function(e){var t=this._content1;if(t.childrenCount>e)return t.children[e];var n=cc.instantiate(this._viewitemTemp1);return t.addChild(n),n},shrinkContent:function(e){for(;this._content.childrenCount>e;){var t=this._content.children[this._content.childrenCount-1];this._content.removeChild(t,!0)}},shrinkContent1:function(e){for(;this._content1.childrenCount>e;){var t=this._content1.children[this._content1.childrenCount-1];this._content1.removeChild(t,!0)}},getGameListOfRoom:function(e){var t=this,n=this._historyData[e];cc.vv.userMgr.getGamesOfRoom(n.roomid,function(e){null!=e&&e.length>0&&(t.initGameHistoryList(n,e),cc.vv.SaveTempRoomInfo={roomInfo:n,data:e})})},getDetailOfGame:function(e){if(null==cc.vv.gameNetMgr.roomId){var t=this;this._curRoomInfo.uuid;cc.vv.userMgr.getDetailOfGame(e,function(e){e.initData=JSON.parse(e.initData),e.operations=JSON.parse(e.operations),e.roomConf=JSON.parse(e.roomConf),cc.vv.gameNetMgr.prepareReplay(t._curRoomInfo,e),cc.vv.replayMgr.init(e),"jl_dch_chch"==cc.vv._Gametype&&cc.director.loadScene("dchmjgame")})}else cc.vv.alert.show("","请先解散房间，再点击查看回放!")},onViewItemClicked:function(e){var t=e.target.idx;console.log(t),null==this._curRoomInfo?this.getGameListOfRoom(t):this.getDetailOfGame(t)},onBtnOpClicked:function(e){var t=e.target.parent.idx;if(null==this._curRoomInfo)this.getGameListOfRoom(t);else{var n=e.target.parent.playback_code;this.getDetailOfGame(n)}},onhuifangEnd:function(){this._playback.active=!1,null!=this._historyData&&(this._history.active=!0,this.initRoomHistoryList(this._historyData))},RefreshRankingArrBtn:function(){for(var e=this._RankingArrLayer.getChildByName("leixingxuanze"),t=0,n=0;n<e.childrenCount;++n)if(null!=(c=e.children[n].getComponent("RadioButton"))&&c.checked){t=n;break}for(var i=this._RankingArrLayer.getChildByName("theListLeiXing"),a=0,n=0;n<i.childrenCount;++n){var c=i.children[n].getComponent("RadioButton");if(null!=c&&c.checked){a=n;break}}var o=this._RankingArrLayer.getChildByName("listTitle");0==t?(o.active=!1,i.active=!0,0==a?this.initRankingArrLayer(this._fortune_ranking):this.initRankingArrLayer(this._revenue_ranking)):(o.active=!0,i.active=!1,1==t?this.initRankingArrLayer([]):2==t?this.initRankingArrLayer([]):3==t&&this.initRankingArrLayer([]))},initRankingArrLayer:function(e){for(var t=this,n=this._RankingArr_data.height,i=-1,a=0;a<e.length;a++)e.id==cc.vv.userMgr.userId&&(i=a+1);var c=this._RankingArrLayer.getChildByName("own_info");i>0?(c.getChildByName("name").getComponent(cc.Label).string=e[i-1].name,c.getChildByName("num").getComponent(cc.Label).string=e[i-1].coin,c.getChildByName("position").getComponent(cc.Label).string=i):(c.getChildByName("name").getComponent(cc.Label).string=cc.vv.userMgr.userName,c.getChildByName("num").getComponent(cc.Label).string=cc.vv.userMgr.coins,c.getChildByName("position").getComponent(cc.Label).string="未上榜");for(a=0;a<e.length;a++){var o,s,r,l,h,g;!function(){(o=t.getViewItemRanking(a,t._RankingArr_data_content,t._RankingArr_data)).getChildByName("name").getComponent(cc.Label).string=e[a].name,o.getChildByName("id").getComponent(cc.Label).string=e[a].id,o.getChildByName("score").getComponent(cc.Label).string=t.CalculationCurrency(e[a].coin);var i=o.getChildByName("head").getComponent(cc.Sprite);e[a].headimg&&cc.loader.load(e[a].image,function(e,t){if(null!=t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));i.spriteFrame=n}}),(s=o.getChildByName("one").getComponent(cc.Sprite)).node.active=!1,(r=o.getChildByName("two").getComponent(cc.Sprite)).node.active=!1,(l=o.getChildByName("three").getComponent(cc.Sprite)).node.active=!1,(h=o.getChildByName("after").getComponent(cc.Label)).string="",0==a?s.node.active=!0:1==a?r.node.active=!0:2==a?l.node.active=!0:h.string=a+1,a>0&&(g=t._RankingArr_data_content.children[a-1].y,o.y=g-n)}()}var d=this._RankingArrLayer.getChildByName("nodata");0==e.length?d.active=!0:d.active=!1,e.length>0?this._RankingArr_data_content.height=Math.abs(this._RankingArr_data_content.children[e.length>0?e.length-1:0].y-this._RankingArr_data_content.children[0].y-n):0==e.length&&(this._RankingArr_data_content.height=n),this.deleteContentRanking(e.length,this._RankingArr_data_content)},deleteContentRanking:function(e,t){for(;t.childrenCount>e;){var n=t.children[t.childrenCount-1];t.removeChild(n,!0)}},getViewItemRanking:function(e,t,n){var i=t;if(i.childrenCount>e)return i.children[e];var a=cc.instantiate(n);return i.addChild(a),a},onHfmBtn:function(){if(null==cc.vv.gameNetMgr.roomId){var e=this._history.getChildByName("hfmBg").getComponent(cc.EditBox);if(""!=e.string){var t=this,n={account:cc.vv.userMgr.account,sign:cc.vv.userMgr.sign,userid:cc.vv.userMgr.userId,playbackcode:e.string};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_game_playback",n,function(n){if(0==n.errcode){var i=n.data;i.initdata=JSON.parse(i.initdata),i.operations=JSON.parse(i.operations),i.roomconf=JSON.parse(i.roomconf),cc.vv.gameNetMgr.prepareReplay(t._curRoomInfo,i),cc.vv.replayMgr.init(i),"jl_dch_chch"==cc.vv._Gametype&&cc.director.loadScene("dchmjgame")}else 404==n.errcode?cc.vv.alert.show("提示","输入回放码不存在!"):cc.vv.alert.show("提示","输入回放码有误! 错误码:"+n.errcode);e.string=""})}}else cc.vv.alert.show("","请先解散房间，再点击查看回放!")},onBtnShareHuiFangMa:function(e){cc.vv.anysdkMgr.share("大呲花麻将","玩家【"+cc.vv.userMgr.userName+"】分享了一个回放码："+e.target.parent.playback_code+"，进入大呲花麻将后，打开战绩在输入回放码处输入回放码，点击查询即可查看",!1)},receiveRankcoin:function(e){if(this._fortune_ranking=e,"hall"==cc.director.getScene().name)for(var t=0;t<this._rankcoin.children.length;t++)if(e[t]){this._rankcoin.children[t].getChildByName("name").getComponent(cc.Label).string=e[t].name,this._rankcoin.children[t].getChildByName("number").getComponent(cc.Label).string=this.CalculationCurrency(e[t].coin),this._rankcoin.children[t].getChildByName("id").getComponent(cc.Label).string=e[t].id;this._rankcoin.children[t].getChildByName("head").getComponent(cc.Sprite)}else this._rankcoin.children[t].active=!1},receiveRankcoinCharge:function(e){if(this._revenue_ranking=e,"hall"==cc.director.getScene().name)for(var t=0;t<this._rankcoincharge.children.length;t++)if(e[t]){this._rankcoincharge.children[t].getChildByName("name").getComponent(cc.Label).string=e[t].name,this._rankcoincharge.children[t].getChildByName("number").getComponent(cc.Label).string=this.CalculationCurrency(e[t].coin),this._rankcoincharge.children[t].getChildByName("id").getComponent(cc.Label).string=e[t].id;this._rankcoincharge.children[t].getChildByName("head").getComponent(cc.Sprite)}else this._rankcoincharge.children[t].active=!1},displayUserInfo:function(e){e.target.parent.getChildByName("id").getComponent(cc.Label).string},SevenDaysSign:function(e){e.errcode;for(var t=0;t<this._signInfo.children.length;t++)t<e.signDay?this._signInfo.children[t].getChildByName("alreadyReceived").active=!0:this._signInfo.children[t].getChildByName("alreadyReceived").active=!1;cc.vv.hall._SevenDaysSign.getChildByName("New Label").getComponent(cc.Label).string="累计已签到"+e.signDay+"天，升级获取更多金币",cc.vv.hall._SevenDaysSign.getChildByName("btn_sign").getComponent(cc.Button).interactable=!e.sign},initMailboxLayer:function(e){if(e){e.length<=0?this._NoData.active=!0:this._NoData.active=!1;var t=this._mailbox_data.height;this._mailbox_data_Info=e;for(var n=0;n<e.length;n++){var i=this.getViewItemRanking(n,this._mailbox_data_content,this._mailbox_data);i.getChildByName("id").getComponent(cc.Label).string=e[n].id,i.getChildByName("title").getComponent(cc.Label).string=e[n].title;var a=i.getChildByName("eead");a.active=!1;var c=i.getChildByName("dontread");if(c.active=!1,0==e[n].state?c.active=!0:a.active=!0,n>0){var o=this._mailbox_data_content.children[n-1].y;i.y=o-t}}this._mailbox_data_content.height=Math.abs(this._mailbox_data_content.children[e.length>0?e.length-1:0].y-this._mailbox_data_content.children[0].y-t),this.deleteContentRanking(e.length,this._mailbox_data_content)}else this._NoData.active=!0},initMailbox_details:function(e){this._mailbox_details.getChildByName("mailbox_details_content").getComponent(cc.Label).string=e.content,this._mailbox_details.getChildByName("mailbox_details_time").getComponent(cc.Label).string=e.time,this._mailbox_details.getChildByName("id").getComponent(cc.Label).string=e.id,e.coin>0||e.gems>0||e.laba>0||e.toushika>0?(2==e.state?this._mailbox_details.getChildByName("confirmReceive").getComponent(cc.Button).interactable=!1:this._mailbox_details.getChildByName("confirmReceive").getComponent(cc.Button).interactable=!0,e.coin>0?(this._incidental_goods.getChildByName("card1").active=!0,this._incidental_goods.getChildByName("card1").getChildByName("number").getComponent(cc.Label).string=e.coin):this._incidental_goods.getChildByName("card1").active=!1,e.laba>0?(this._incidental_goods.getChildByName("card2").active=!0,this._incidental_goods.getChildByName("card2").getChildByName("number").getComponent(cc.Label).string=e.laba):this._incidental_goods.getChildByName("card2").active=!1,e.toushika>0?(this._incidental_goods.getChildByName("card3").active=!0,this._incidental_goods.getChildByName("card3").getChildByName("number").getComponent(cc.Label).string=e.toushika):this._incidental_goods.getChildByName("card3").active=!1):this._mailbox_details.getChildByName("confirmReceive").active=!1,this._incidental_goods.getComponent(cc.Layout)._updateLayout(),this._mailbox_details.active=!0},displayMailboxDetails:function(e){var t=e.target.parent.getChildByName("id").getComponent(cc.Label).string,n=this.getMailbox_details(t);this.initMailbox_details(n);var i=this.getMailbox_details(t);0==i.state&&(i.state=1),cc.vv.net.send("mail_read",t),this.initMailboxLayer(this._mailbox_data_Info)},openMailboxInfo:function(){this._mailboxLayer.active=!0},closeMailboxInfo:function(){this._mailboxLayer.active=!1},closeMailbox_Details:function(){this._mailbox_details.active=!1},getMailbox_details:function(e){for(var t=0;t<this._mailbox_data_Info.length;t++)if(this._mailbox_data_Info[t].id==e)return this._mailbox_data_Info[t]},mail_get_item:function(e){var t=e.target.parent.getChildByName("id").getComponent(cc.Label).string;cc.vv.net.send("mail_get_item",t),this._mailbox_details.getChildByName("confirmReceive").getComponent(cc.Button).interactable=!1},mail_delete_item:function(e){var t=e.target.parent.getChildByName("id").getComponent(cc.Label).string,n=this.getMailbox_details(t);2==n.state?cc.vv.net.send("mailremove",t):n.coin>0||n.gems>0||n.laba>0||n.toushika>0?cc.vv.hall.onSecuritySettingPrompt("请先领取物品"):cc.vv.net.send("mailremove",t)},mailremove_result:function(e){var e=this.getMailbox_details(e.id),t=this._mailbox_data_Info.indexOf(e);-1!=t&&this._mailbox_data_Info.splice(t,1),this.initMailboxLayer(this._mailbox_data_Info),this._mailbox_details.active=!1},mail_get_item_result:function(e){this.getMailbox_details(e.id).state=e.state},formatDate:function(e){return e.getYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"   "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},CalculationCurrency:function(e){var t="";return e>=1e8?t+=Math.floor(e/1e8)+"亿":e>=1e7?t+=Math.floor(e/1e4)+"万":t=e,t}}),cc._RF.pop()},{}],HotUpdate:[function(e,t,n){"use strict";cc._RF.push(t,"17141EodNRM/4IpsE04IyCU","HotUpdate");var i=e("HTTP");cc.Class({extends:cc.Component,properties:{updatePanel:{default:null,type:cc.Node},manifestUrl:{default:null,url:cc.RawAsset},percent:{default:null,type:cc.Label},lblErr:{default:null,type:cc.Label},ProgressBar:{default:null,type:cc.Node},newBar:{default:null,type:cc.Node},guangdian:{default:null,type:cc.Node}},checkCb:function(e){switch(console.log("checkCb: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),cc.eventManager.removeListener(this._checkListener);break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),cc.eventManager.removeListener(this._checkListener),cc.director.loadScene("login");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),cc.eventManager.removeListener(this._checkListener),this.lblErr.string+="游戏不需要更新\n",cc.director.loadScene("login");break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this._needUpdate=!0,this.updatePanel.active=!0,this.percent.string="00%",this.newBar.width=0,cc.eventManager.removeListener(this._checkListener);break;case jsb.EventAssetsManager.ERROR_UPDATING:console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage())}this.hotUpdate()},updateCb:function(e){var t=!1,n=!1;switch(console.log("updateCb: "+e.getEventCode()),e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:console.log("No local manifest file found, hot update skipped."),n=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var i=e.getPercent(),a=Math.round(e.getPercentByFile()),c=e.getMessage();c&&console.log(c),console.log(i+" %"),console.log(a+" percentByFile"),this.percent.string=a+"%",this.newBar.width=a/100*660,this.guangdian.x=this.newBar.width-4;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:console.log("Fail to download manifest file, hot update skipped."),n=!0,cc.director.loadScene("login");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:console.log("Already up to date with the latest remote version."),n=!0,cc.director.loadScene("login");break;case jsb.EventAssetsManager.UPDATE_FINISHED:console.log("Update finished. "+e.getMessage()),t=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:console.log("Update failed. "+e.getMessage()),++this._failCount<5?this._am.downloadFailedAssets():(console.log("Reach maximum fail count, exit update process"),this._failCount=0,n=!0);break;case jsb.EventAssetsManager.ERROR_UPDATING:console.log("Asset update error: "+e.getAssetId()+", "+e.getMessage());break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:console.log(e.getMessage())}if(n&&(cc.eventManager.removeListener(this._updateListener),this.updatePanel.active=!1),t){cc.eventManager.removeListener(this._updateListener),this._updateListener=null;var o=jsb.fileUtils.getSearchPaths(),s=this._am.getLocalManifest().getSearchPaths();Array.prototype.unshift(o,s),cc.sys.localStorage.setItem("remote-asset",JSON.stringify(o)),jsb.fileUtils.setSearchPaths(o),this.lblErr.string+="游戏资源更新完毕\n",cc.game.restart()}},hotUpdate:function(){this._am&&this._needUpdate&&(this.lblErr.string+="开始更新游戏资源...\n",this._updateListener=new jsb.EventListenerAssetsManager(this._am,this.updateCb.bind(this)),cc.eventManager.addListener(this._updateListener,1),this._failCount=0,this._am.update())},fneedUpdate:function(e){if(console.log("getServerHotupdate"+JSON.stringify(e)),void 0!=e&&void 0!=e.update)if("1"==e.update){this.lblErr.string+="检查游戏资源...\n";var t=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"remote-asset";console.log("Storage path for remote asset : "+t),this.lblErr.string+=t+"\n",console.log("Local manifest URL : "+this.manifestUrl),this._am=new jsb.AssetsManager(this.manifestUrl,t),this._am.retain(),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this._needUpdate=!1,cc.update.updateVersion=this._am.getLocalManifest().getVersion(),this._am.getLocalManifest().isLoaded()&&(this._checkListener=new jsb.EventListenerAssetsManager(this._am,this.checkCb.bind(this)),cc.eventManager.addListener(this._checkListener,1),this._am.checkUpdate())}else console.log("xionglei fneedUpdate 跳过热更新"),cc.director.loadScene("login");else console.log("xionglei fneedUpdate 跳过热更新"),cc.director.loadScene("login")},onLoad:function(){console.log("开始加载 HotUpdate.js");var e=this;this.initMgr();cc.vv.net.connect(function(){console.log("连接成功"),cc.update={},null==cc.sys.browserType&&cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.OS_ANDROID?(console.log("进入热更新---111"),e.fneedUpdate({update:1})):(console.log("准备加载登陆界面---2"),e.getServerVersion()):(console.log("准备加载登陆界面---1"),e.getServerVersion())},function(){console.log("连接失败"),cc.find("Canvas/alert_timeout").active=!0}),console.log("加载完成 HotUpdate.js")},initMgr:function(){if(!cc.vv){cc.vv={};var t=e("Utils");cc.vv.utils=new t;var n=e("UserMgr");cc.vv.userMgr=new n;var i=e("ReplayMgr");cc.vv.replayMgr=new i,cc.vv.global=e("Global"),cc.vv.net=e("Net");var a=e("GameNetMgr");cc.vv.gameNetMgr=new a,cc.vv.gameNetMgr.initHandlers();var c=e("HallNet");cc.vv.hallNet=new c,cc.vv.hallNet.initHandlers();var o=e("AnysdkMgr");cc.vv.anysdkMgr=new o,cc.vv.anysdkMgr.init();var s=e("VoiceMgr");cc.vv.voiceMgr=new s,cc.vv.voiceMgr.init();var r=e("AudioMgr");cc.vv.audioMgr=new r,cc.vv.audioMgr.init();var l=e("GpsMgr");cc.vv.GpsMgr=new l,cc.vv.GpsMgr.init(),cc.args=this.urlParse(),cc.vv._Gametype=0,cc.vv.pi=-1,cc.vv.lai=-1,cc.vv.tingpaiArr={},cc.vv.SanZhangPai={},cc.vv.QueYiMen={},cc.vv.updateVersion=null,cc.vv.SaveTempHistoryData=null,cc.vv.SaveTempRoomInfo=null,cc.vv.SuffixName=".ogg"}},urlParse:function(){var e={};if(null==window.location)return e;for(var t,n,i=window.location.href,a=i.indexOf("?"),c=(i=i.substr(a+1)).split("&"),o=0;o<c.length;o++)(a=c[o].indexOf("="))>0&&(t=c[o].substring(0,a),n=c[o].substr(a+1),e[t]=n);return e},getServerVersion:function(){return console.log("准备加载登陆界面---3"),console.log("准备加载登陆界面---4"),void cc.director.loadScene("login",function(){})},getServerHotupdate:function(){console.log("getServerHotupdate---111111"),cc.update={};var e="";cc.sys.os==cc.sys.OS_ANDROID?e="android":cc.sys.os==cc.sys.OS_IOS&&(e="ios");var t={myos:e,id:"999"};console.log("getServerHotupdate---222222"),i.sendRequest(i.account_port,"/hot_update",t,this.fneedUpdate.bind(this))},onDestroy:function(){this._am&&this._am.release()},onBtnDownloadClicked:function(){cc.sys.openURL(i.SI.appweb)},onBtnTimeOutOk:function(){cc.game.restart()},End_game:function(){cc.game.end()}}),cc._RF.pop()},{AnysdkMgr:"AnysdkMgr",AudioMgr:"AudioMgr",GameNetMgr:"GameNetMgr",Global:"Global",GpsMgr:"GpsMgr",HTTP:"HTTP",HallNet:"HallNet",Net:"Net",ReplayMgr:"ReplayMgr",UserMgr:"UserMgr",Utils:"Utils",VoiceMgr:"VoiceMgr"}],HuanSanZhang:[function(e,t,n){"use strict";cc._RF.push(t,"9a096oAgU5HwrxX05ZPNYtW","HuanSanZhang"),cc.Class({extends:cc.Component,properties:{_huanpaitip:null,_huanpaiArr:[],_choice_Result:null,_infoTime:null,_kaishihuanpaiTime:0,_huanpaiTeXiao:null},onLoad:function(){console.log("开始加载 HuanSanZhang.js"),cc.vv.HuanSanZhang=this,this._huanpaitip=cc.find("Canvas/huansanzhang"),this._huanpaiTeXiao=this._huanpaitip.getChildByName("huanpai"),this.choice_Result=this._huanpaitip.getChildByName("choice_Result"),this._infoTime=this._huanpaitip.getChildByName("info").getComponent(cc.Label);var e=cc.find("Canvas/huansanzhang/btn_ok");e&&cc.vv.utils.addClickEvent(e,this.node,"HuanSanZhang","onHuanSanZhang");var t=this;this.node.on("game_huanpai",function(e){cc.find("Canvas/game").getChildByName("xianshihuanpai").active=!1,t._huanpaitip.active=!0,t.showHuanpai()}),this.node.on("game_huanpai_finish",function(e){var n=cc.vv.gameNetMgr.getSeatIndexByID(e.detail),i=cc.vv.gameNetMgr.getLocalIndex(n);t.choice_Result.children[i].active=!1,0==i&&(t.Own_HuanPai_Complete(),t._huanpaiTeXiao.children[i].active=!0)}),this.node.on("game_huanpai_result",function(e){cc.vv.gameNetMgr.isHuanSanZhang=!1;for(var n=0;n<t._huanpaiTeXiao.children.length;n++)t._huanpaiTeXiao.children[n].active=!0;setTimeout(function(){t._huanpaiTeXiao.getComponent(cc.Animation).play("huanpai")},500),setTimeout(function(){for(e=0;e<t._huanpaiTeXiao.children.length;e++)t._huanpaiTeXiao.children[e].active=!1;t._huanpaitip.active=!1;for(var e=0;e<t._huanpaiArr.length;++e)t._huanpaiArr[e].node.y=-350;t._huanpaiArr=[],cc.vv.SanZhangPai=[],cc.vv.MJGame.initMahjongs()},2e3)}),this.node.on("mj_clicked",function(e){var n=e.detail,i=t._huanpaiArr.indexOf(n);if(-1!=i)n.node.y=-350,t._huanpaiArr.splice(i,1);else if(t._huanpaiArr.length<3)0==t._huanpaiArr.length?(t._huanpaiArr.push(n),n.node.y=-305):(a=cc.vv.mahjongmgr.getMahjongType(n.node.mjId))==cc.vv.mahjongmgr.getMahjongType(t._huanpaiArr[0].node.mjId)&&(t._huanpaiArr.push(n),n.node.y=-305);else{var a=cc.vv.mahjongmgr.getMahjongType(n.node.mjId);if(a!=cc.vv.mahjongmgr.getMahjongType(t._huanpaiArr[0].node.mjId)){for(var c=0;c<t._huanpaiArr.length;++c)t._huanpaiArr[c].node.y=-350;t._huanpaiArr=[],t._huanpaiArr.push(n),n.node.y=-305}}}),console.log("加载完成 HuanSanZhang.js")},showHuanpai:function(e){e=cc.vv.SanZhangPai,console.log("换三张牌"+e),this._kaishihuanpaiTime=10,this._huanpaitip.getChildByName("btn_ok").getComponent(cc.Button).interactable=!0,this._huanpaitip.getChildByName("fangkaxiaobeijing").active=!0,this._huanpaitip.getChildByName("selectTips").active=!0,this._huanpaitip.getChildByName("btn_ok").active=!0,this._huanpaitip.getChildByName("buttonText").active=!0,this._huanpaitip.getChildByName("info").active=!0,this.choice_Result.children[1].active=!0,this.choice_Result.children[2].active=!0,this.choice_Result.children[3].active=!0,this._huanpaitip.active=!0;for(var t=cc.find("Canvas/game/myself/holds"),n=cc.vv.gameNetMgr.getSeatByID(cc.vv.userMgr.userId),i=this,a=0;a<e.length;a++)for(var c=0;c<n.holds.length;c++){var o=t.children[c].getComponent(cc.Sprite);if(e[a]==o.node.mjId){if(-305==o.node.y)continue;if(-350==o.node.y){o.node.y=-305,i._huanpaiArr.push(o);break}}}},onHuanSanZhang:function(e){if(3==this._huanpaiArr.length){for(var t=null,n=0;n<this._huanpaiArr.length;++n){var i=this._huanpaiArr[n].node.mjId,a=cc.vv.mahjongmgr.getMahjongType(i);if(null==t)t=a;else if(t!=a)return}var c=[this._huanpaiArr[0].node.mjId,this._huanpaiArr[1].node.mjId,this._huanpaiArr[2].node.mjId];this._huanpaitip.getChildByName("btn_ok").getComponent(cc.Button).interactable=!1,cc.vv.net.send("huanpai",c)}},Own_HuanPai_Complete:function(){this._huanpaitip.getChildByName("fangkaxiaobeijing").active=!1,this._huanpaitip.getChildByName("selectTips").active=!1,this._huanpaitip.getChildByName("btn_ok").active=!1,this._huanpaitip.getChildByName("buttonText").active=!1,this._huanpaitip.getChildByName("info").active=!1},update:function(e){for(var t=0;t<this.choice_Result.children.length;++t)if(this.choice_Result.children[t].active){for(var n=1;n<this.choice_Result.children[t].children.length;n++)this.choice_Result.children[t].children[n].active=!1;i=Math.floor(Date.now()/200)%4;this.choice_Result.children[t].children[i].active=!0}if(this._kaishihuanpaiTime>0){this._kaishihuanpaiTime-=e;var i=Math.ceil(this._kaishihuanpaiTime);this._infoTime.string="("+i+")"}}}),cc._RF.pop()},{}],ImageLoader:[function(e,t,n){"use strict";function i(e,t,n){cc.loader.load(e,function(e,i){if(null!=i){console.log("icon:load ok?");var a=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height));n(t,a)}})}cc._RF.push(t,"ed057Bgp8FHlJbGI+ljAN7d","ImageLoader"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("开始加载 ImageLoader.js"),this.setupSpriteFrame(),console.log("加载完成 ImageLoader.js")},setUserID:function(e,t){if(0!=cc.sys.isNative){if(e){var n,a=this;(n={url:t})&&n.url?i(n.url,e,function(e,t){a._spriteFrame=t,a.setupSpriteFrame()}):(cc.sys.isNative||cc.sys.os!=cc.sys.OS_WINDOWS)&&(0==cc.vv.userMgr.sex?this.getComponent(cc.Sprite).spriteFrame.setTexture(cc.url.raw("resources/textures/images/hall/txnan.png")):1==cc.vv.userMgr.sex&&this.getComponent(cc.Sprite).spriteFrame.setTexture(cc.url.raw("resources/textures/images/hall/txnv.png")))}}else console.log("icon:return")},setupSpriteFrame:function(){if(this._spriteFrame){console.log("icon:load ok?111");var e=this.getComponent(cc.Sprite);e&&(e.spriteFrame=this._spriteFrame)}}}),cc._RF.pop()},{}],JoinGameInput:[function(e,t,n){"use strict";cc._RF.push(t,"10a1c8jz95Ju4NnpkOWUfin","JoinGameInput"),cc.Class({extends:cc.Component,properties:{nums:{default:[],type:[cc.Label]},_inputIndex:0},onLoad:function(){},onEnable:function(){this.onResetClicked()},onInputFinished:function(e){cc.vv.userMgr.enterRoom(e,function(t){if(0==t.errcode)this.node.active=!1;else if(2222==t.errcode){n="钻石不足，加入房间失败!";cc.vv.alert.show("",n),this.onResetClicked()}else if(11203==t.errcode){n="房卡不足，加入房间失败!";cc.vv.alert.show("",n),this.onResetClicked()}else if(11208==t.errcode){n="房卡准入金不足!";cc.vv.alert.show("",n),this.onResetClicked()}else if(11207==t.errcode){n="已经在房间内!";cc.vv.alert.show("",n),this.onResetClicked()}else if(4==t.errcode||13001==t.errcode){n="房间["+e+"]已满!";cc.vv.alert.show("",n),this.onResetClicked()}else if(1==t.errcode||2==t.errcode||3==t.errcode||500==t.errcode){var n="房间["+e+"]不存在，请重新输入!";cc.vv.alert.show("",n),this.onResetClicked()}else this.onResetClicked()}.bind(this))},onInput:function(e){if(!(this._inputIndex>=this.nums.length)&&(this.nums[this._inputIndex].string=e,this._inputIndex+=1,this._inputIndex==this.nums.length)){var t=this.parseRoomID();console.log("ok:"+t),this.onInputFinished(t)}},onN0Clicked:function(){this.onInput(0)},onN1Clicked:function(){this.onInput(1)},onN2Clicked:function(){this.onInput(2)},onN3Clicked:function(){this.onInput(3)},onN4Clicked:function(){this.onInput(4)},onN5Clicked:function(){this.onInput(5)},onN6Clicked:function(){this.onInput(6)},onN7Clicked:function(){this.onInput(7)},onN8Clicked:function(){this.onInput(8)},onN9Clicked:function(){this.onInput(9)},onResetClicked:function(){for(var e=0;e<this.nums.length;++e)this.nums[e].string="";this._inputIndex=0},onDelClicked:function(){this._inputIndex>0&&(this._inputIndex-=1,this.nums[this._inputIndex].string="")},onCloseClicked:function(){this.node.active=!1},parseRoomID:function(){for(var e="",t=0;t<this.nums.length;++t)e+=this.nums[t].string;return e}}),cc._RF.pop()},{}],LoadingLogic:[function(e,t,n){"use strict";cc._RF.push(t,"350d3Ry9aVIqJR27fP2H/z1","LoadingLogic"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this,t=this.node.getChildByName("z_loading"),n=cc.fadeIn(2),i=cc.delayTime(1.6),a=cc.fadeOut(1.4),c=cc.sequence(n,i,a);t.runAction(c),setTimeout(function(){e.onLoadComplete()},4500)},onLoadComplete:function(){cc.director.loadScene("update")},update:function(e){}}),cc._RF.pop()},{}],Login:[function(e,t,n){"use strict";cc._RF.push(t,"572a7Qfh69N9ZLXkNthANfi","Login"),cc.Class({extends:cc.Component,properties:{_progress:0,_progressBar:null,_percent:null,_guangdian:null,_whetherToShow:null},onLoad:function(){if(cc.vv){cc.vv.login=this,this._whetherToShow=!0;var e=this.node.getChildByName("update");e.active=!1,this._progressBar=e.getChildByName("new_bar"),this._guangdian=this._progressBar.getChildByName("guangdian"),this._percent=e.getChildByName("percent").getComponent(cc.Label)}else cc.director.loadScene("update")},start:function(){var e=this;cc.loader.loadRes("textures",function(t,n){e.onLoadComplete()}),cc.loader.onProgress=function(t,n,i){e._progress=t/n},cc.loader.onComplete=function(t,n){e.onLoadComplete()}},onBtnQuickStartClicked:function(){cc.vv.userMgr.login()},onBtnWeichatClicked:function(){cc.vv.anysdkMgr.login()},promptInformation:function(e){var t=cc.find("Canvas/promptInformation");if(e&&(t.getChildByName("label").getComponent(cc.Label).string=e),!t.active){var n=cc.scaleTo(.2,2,2),i=cc.scaleTo(.2,1.2,1.2),a=cc.scaleTo(.1,1,1),c=cc.sequence(n,i,a);t.active=!0,t.runAction(c),setTimeout(function(){t.active=!1},2e3)}},onLoadComplete:function(){cc.vv.userMgr.login()},update:function(e){if(this._whetherToShow){1==this._progress&&(this._whetherToShow=!1);var t=this.node.getChildByName("update");t&&(t.active||(t.active=!0)),this._percent.string=Math.floor(100*this._progress)+"%",this._progressBar.width=660*this._progress,this._guangdian.x=this._progressBar.width-4}}}),cc._RF.pop()},{}],MD5:[function(e,t,n){"use strict";cc._RF.push(t,"4056eV/HT9BwavhwOTRz0qi","MD5"),t.exports=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,a,c,o;return a=2147483648&e,c=2147483648&t,n=1073741824&e,i=1073741824&t,o=(1073741823&e)+(1073741823&t),n&i?2147483648^o^a^c:n|i?1073741824&o?3221225472^o^a^c:1073741824^o^a^c:o^a^c}function i(e,t,n){return e&t|~e&n}function a(e,t,n){return e&n|t&~n}function c(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function s(e,a,c,o,s,r,l){return e=n(e,n(n(i(a,c,o),s),l)),n(t(e,r),a)}function r(e,i,c,o,s,r,l){return e=n(e,n(n(a(i,c,o),s),l)),n(t(e,r),i)}function l(e,i,a,o,s,r,l){return e=n(e,n(n(c(i,a,o),s),l)),n(t(e,r),i)}function h(e,i,a,c,s,r,l){return e=n(e,n(n(o(i,a,c),s),l)),n(t(e,r),i)}function g(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var d,u,v,m,p,_,f,y,C,b=Array();for(b=function(e){for(var t,n=e.length,i=n+8,a=16*((i-i%64)/64+1),c=Array(a-1),o=0,s=0;s<n;)o=s%4*8,c[t=(s-s%4)/4]=c[t]|e.charCodeAt(s)<<o,s++;return t=(s-s%4)/4,o=s%4*8,c[t]=c[t]|128<<o,c[a-2]=n<<3,c[a-1]=n>>>29,c}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e)),_=1732584193,f=4023233417,y=2562383102,C=271733878,d=0;d<b.length;d+=16)u=_,v=f,m=y,p=C,f=h(f=h(f=h(f=h(f=l(f=l(f=l(f=l(f=r(f=r(f=r(f=r(f=s(f=s(f=s(f=s(f,y=s(y,C=s(C,_=s(_,f,y,C,b[d+0],7,3614090360),f,y,b[d+1],12,3905402710),_,f,b[d+2],17,606105819),C,_,b[d+3],22,3250441966),y=s(y,C=s(C,_=s(_,f,y,C,b[d+4],7,4118548399),f,y,b[d+5],12,1200080426),_,f,b[d+6],17,2821735955),C,_,b[d+7],22,4249261313),y=s(y,C=s(C,_=s(_,f,y,C,b[d+8],7,1770035416),f,y,b[d+9],12,2336552879),_,f,b[d+10],17,4294925233),C,_,b[d+11],22,2304563134),y=s(y,C=s(C,_=s(_,f,y,C,b[d+12],7,1804603682),f,y,b[d+13],12,4254626195),_,f,b[d+14],17,2792965006),C,_,b[d+15],22,1236535329),y=r(y,C=r(C,_=r(_,f,y,C,b[d+1],5,4129170786),f,y,b[d+6],9,3225465664),_,f,b[d+11],14,643717713),C,_,b[d+0],20,3921069994),y=r(y,C=r(C,_=r(_,f,y,C,b[d+5],5,3593408605),f,y,b[d+10],9,38016083),_,f,b[d+15],14,3634488961),C,_,b[d+4],20,3889429448),y=r(y,C=r(C,_=r(_,f,y,C,b[d+9],5,568446438),f,y,b[d+14],9,3275163606),_,f,b[d+3],14,4107603335),C,_,b[d+8],20,1163531501),y=r(y,C=r(C,_=r(_,f,y,C,b[d+13],5,2850285829),f,y,b[d+2],9,4243563512),_,f,b[d+7],14,1735328473),C,_,b[d+12],20,2368359562),y=l(y,C=l(C,_=l(_,f,y,C,b[d+5],4,4294588738),f,y,b[d+8],11,2272392833),_,f,b[d+11],16,1839030562),C,_,b[d+14],23,4259657740),y=l(y,C=l(C,_=l(_,f,y,C,b[d+1],4,2763975236),f,y,b[d+4],11,1272893353),_,f,b[d+7],16,4139469664),C,_,b[d+10],23,3200236656),y=l(y,C=l(C,_=l(_,f,y,C,b[d+13],4,681279174),f,y,b[d+0],11,3936430074),_,f,b[d+3],16,3572445317),C,_,b[d+6],23,76029189),y=l(y,C=l(C,_=l(_,f,y,C,b[d+9],4,3654602809),f,y,b[d+12],11,3873151461),_,f,b[d+15],16,530742520),C,_,b[d+2],23,3299628645),y=h(y,C=h(C,_=h(_,f,y,C,b[d+0],6,4096336452),f,y,b[d+7],10,1126891415),_,f,b[d+14],15,2878612391),C,_,b[d+5],21,4237533241),y=h(y,C=h(C,_=h(_,f,y,C,b[d+12],6,1700485571),f,y,b[d+3],10,2399980690),_,f,b[d+10],15,4293915773),C,_,b[d+1],21,2240044497),y=h(y,C=h(C,_=h(_,f,y,C,b[d+8],6,1873313359),f,y,b[d+15],10,4264355552),_,f,b[d+6],15,2734768916),C,_,b[d+13],21,1309151649),y=h(y,C=h(C,_=h(_,f,y,C,b[d+4],6,4149444226),f,y,b[d+11],10,3174756917),_,f,b[d+2],15,718787259),C,_,b[d+9],21,3951481745),_=n(_,u),f=n(f,v),y=n(y,m),C=n(C,p);return(g(_)+g(f)+g(y)+g(C)).toLowerCase()},cc._RF.pop()},{}],MJGame:[function(e,t,n){"use strict";cc._RF.push(t,"7fa8fcvrqFOj6lhh6xHzd3c","MJGame"),cc.Class({extends:cc.Component,properties:{gameRoot:{default:null,type:cc.Node},prepareRoot:{default:null,type:cc.Node},seekPlayer:{default:null,type:cc.Node},_myMJArr:[],_options:null,_selectedMJ:null,_chupaiSprite:[],_mjcount:null,_gamecount:null,_hupaiTips:[],_hupaiLists:[],_playEfxs:[],_opts:[],_chupaiClickedStartIP:null,_Holds:null,_tingpaiLayer:null,_IskaipaidongzuoLimit:!1,_IskaipaiCloseHideOptions:!1,whoFight:-1,_seek_player:null,_startAnimation:null,_lower_Animation:null,_right_Animation:null,_upper_Animation:null,_Left_Animation:null,_Whether_play:!0,_kaiju:null,_settlementInfo:null,_settlementNum:null,_quxiaotuoguan:null,_discountRecharge:null,_Help:null,_introduceExplain:null,_startGame:null,_ClickDisplay:null,_preservation_hupaai:null,_duijujieshu:null,_throwInTheTowel:null,_waitRenshu:[],_GangLayer:null,_gang:[],_huPaiTeXiaoArr:[],_return_hall:null,_tuoguanState:!1},onLoad:function(){if(console.log("开始加载 MJGame.js"),cc.vv){cc.vv.MJGame=this,cc.vv.Hu_WhetherPlay=!1,this._preservation_hupaai={},this.addComponent("NoticeTip"),this.addComponent("GameOver"),this.addComponent("DingQue"),this.addComponent("PengGangs"),this.addComponent("MJRoom"),this.addComponent("TimePointer"),this.addComponent("GameResult"),this.addComponent("Chat"),this.addComponent("Folds"),this.addComponent("ReplayCtrl"),this.addComponent("PopupMgr"),this.addComponent("HuanSanZhang"),this.addComponent("ReConnect"),this.addComponent("Voice"),this.addComponent("UserInfoShow"),this.initView(),this.initEventHandlers(),this.gameRoot.active=!1,this.prepareRoot.active=!0,this.seekPlayer.active=!0,this.onGameBeign(cc.is_pure_begin),cc.vv.audioMgr.playBGM("music/xl_bg.mp3"),this.hideTingPaiLayer(),this.hidemyMJArrOftingpaiTag(),this.hidemyMJArrOfzhezhao(),this.SetUpSeek_place_lv(),this.eliminate_settlementInfo(),this.guangbi_waitRenshu();cc.director.getScene();var e=this;this._Holds=cc.find("Canvas/game/myself/holds"),this.node.on(cc.Node.EventType.TOUCH_START,function(t){for(var n=t.getLocation(),i=t.getLocation(),a=0;a<e._myMJArr.length;a++){var c=e._Holds.convertToWorldSpaceAR(e._myMJArr[a].node.getPosition());c.x-=e._myMJArr[a].node.width/2,c.y-=e._myMJArr[a].node.height/2;var o=new cc.Rect(c.x,c.y,e._myMJArr[a].node.width,e._myMJArr[a].node.height),s=new cc.Rect(n.x,n.y,1,1),i=new cc.Rect(i.x,i.y,1,1);if(null!=e._selectedMJ&&i.intersects(function(t){var n=e._Holds.convertToWorldSpaceAR(t.node.getPosition());return n.x-=e._myMJArr[a].node.width/2,n.y-=e._myMJArr[a].node.height/2,new cc.Rect(n.x,n.y,e._myMJArr[a].node.width,e._myMJArr[a].node.height)}(e._selectedMJ)))return e.shoot(e._selectedMJ.node.mjId),e._selectedMJ.node.y=-350,e._selectedMJ=null,e._tingpaiLayer.active=!1,cc.vv.tingpaiArr={},void e.hidemyMJArrOftingpaiTag();if(!e._IskaipaidongzuoLimit&&o.intersects(s)&&0==e._myMJArr[a].node.getChildByName("zhezhao").active)return cc.vv.gameNetMgr.isHuanSanZhang?void e.node.emit("mj_clicked",e._myMJArr[a]):cc.vv.gameNetMgr.turn!=cc.vv.gameNetMgr.seatIndex?void console.log("not your turn."+cc.vv.gameNetMgr.turn):(1==cc.vv.userMgr._djcp_preservation&&e.shoot(e._myMJArr[a].node.mjId),e._chupaiClickedStartIP=n,null!=e._selectedMJ&&(e._selectedMJ.node.y=-350),e._myMJArr[a].node.y=-305,e._selectedMJ=e._myMJArr[a],void(cc.vv.gameNetMgr.getSelfData().hued||e.showTingPaiLayer(e._selectedMJ.node.mjId)))}},cc.node),this.node.on(cc.Node.EventType.TOUCH_END,function(e){},cc.node),console.log("加载完成 MJGame.js")}else cc.director.loadScene("update")},initView:function(){var e=this.node.getChildByName("game");this._mjcount=e.getChildByName("mjcount").getComponent(cc.Label),this._mjcount.string=cc.vv.gameNetMgr.numOfMJ,this._gamecount=e.getChildByName("gamecount").getComponent(cc.Label),this._gamecount.string=cc.vv.gameNetMgr.numOfGames+"/"+cc.vv.gameNetMgr.maxNumOfGames;var t=e.getChildByName("myself"),n=t.getChildByName("holds");this._tingpaiLayer=t.getChildByName("tingpai"),this._GangLayer=e.getChildByName("ops").getChildByName("GangLayer");for(o=0;o<n.children.length;++o){var i=n.children[o].getComponent(cc.Sprite);this._myMJArr.push(i),i.spriteFrame=null}var a=cc.director.getVisibleSize().width;n.scaleX*=a/1920,n.scaleY*=a/1920;for(var c=["myself","right","up","left"],o=0;o<c.length;++o){var s=c[o],r=e.getChildByName(s);this._hupaiTips.push(r.getChildByName("HuPai")),this._hupaiLists.push(r.getChildByName("hupailist")),this._playEfxs.push(r.getChildByName("play_efx").getComponent(cc.Animation)),this._chupaiSprite.push(r.getChildByName("ChuPai"));var l=r.getChildByName("opt");l.active=!1;var h={node:l,sprite:i=l.getChildByName("pai").getComponent(cc.Sprite)};this._opts.push(h),this._waitRenshu.push(r.getChildByName("waitRenshu")),this._huPaiTeXiaoArr.push(r.getChildByName("huPaiTeXiao"))}var g=e.getChildByName("ops");this._options=g,this.hideOptions(),this.hideChupai(),this._seek_player=this.node.getChildByName("seek_player"),this._startAnimation=this.node.getChildByName("startAnimation"),this._lower_Animation=this._startAnimation.getChildByName("benjia"),this._right_Animation=this._startAnimation.getChildByName("xiajia"),this._upper_Animation=this._startAnimation.getChildByName("duijia"),this._Left_Animation=this._startAnimation.getChildByName("shangjia"),this._settlementInfo=this.node.getChildByName("settlementInfo"),this._settlementNum=this.node.getChildByName("btn_settlement").getChildByName("settlementNum").getComponent(cc.Label),this._quxiaotuoguan=this.node.getChildByName("quxiaotuoguan"),this._discountRecharge=this.node.getChildByName("discountRecharge"),this._Help=this.node.getChildByName("Help"),this._introduceExplain=this._Help.getChildByName("introduceExplain"),this._startGame=this.node.getChildByName("startGame"),this._ClickDisplay=this.node.getChildByName("ClickDisplay"),this.ClickDisplay_TingPai(),this.display_Seek_Interface_Info(),this._duijujieshu=e.getChildByName("duijujieshu"),this._throwInTheTowel=this.node.getChildByName("throwInTheTowel"),this.hidGangAdd(),this._return_hall=this.node.getChildByName("return_hall")},hideChupai:function(){for(var e=0;e<this._chupaiSprite.length;++e)this._chupaiSprite[e].children[0].active=!1,this._chupaiSprite[e].children[1].getComponent(cc.Sprite).node.active=!1},hidemyMJArrOftingpaiTag:function(){for(var e=0;e<this._myMJArr.length;e++)this._myMJArr[e].node.getChildByName("tingpaiTag").active=!1},hideTingPaiLayer:function(){for(var e=0;e<this._tingpaiLayer.childrenCount;e++)"BG"==this._tingpaiLayer.children[e].name?this._tingpaiLayer.children[e].active=!1:"MJ"==this._tingpaiLayer.children[e].name&&(this._tingpaiLayer.children[e].active=!1);this._tingpaiLayer.active=!1},isMapEmpty:function(e){for(var t in e)return!0;return!1},showTingPaiLayer:function(e){if(this.isMapEmpty(cc.vv.tingpaiArr)){for(var t in cc.vv.tingpaiArr){var n=Number.parseInt(t),i=cc.vv.tingpaiArr[n];if(n==e){this.hideTingPaiLayer(),this._preservation_hupaai=i,this._tingpaiLayer.active=!0;for(var a=0,c=0;c<i.length;c++){for(8==i.length?(this._tingpaiLayer.width=1890,this._tingpaiLayer.x=-950):(this._tingpaiLayer.width=210*(i.length+1),this._tingpaiLayer.x=-860);"MJ"!=this._tingpaiLayer.children[c+a].name;)this._tingpaiLayer.children[c+a].active=!0,a++;var o=this._tingpaiLayer.children[c+a].getComponent(cc.Sprite);o.node.mjId=i[c].pai,o.node.active=!0,this.setSpriteFrameByMJID("M_",o,i[c].pai),this._tingpaiLayer.children[c+a].getChildByName("zhangshu").getComponent(cc.RichText).string="<color=#FFEA00>"+i[c].num+"</c><color=#00BB8D>  张</color>",this._tingpaiLayer.children[c+a].getChildByName("beishu").getComponent(cc.RichText).string="<color=#FFEA00>"+i[c].fan+"</c><color=#00BB8D> 倍</color>"}}}}},showtingpaiTag:function(){if(this.hidemyMJArrOftingpaiTag(),this.isMapEmpty(cc.vv.tingpaiArr)&&cc.vv.gameNetMgr.turn==cc.vv.gameNetMgr.seatIndex)for(var e in cc.vv.tingpaiArr)for(var t=Number.parseInt(e),e=0;e<this._myMJArr.length;++e){var n=this._myMJArr[e];null!=n.node.mjId&&n.node.mjId==t&&(n.node.getChildByName("tingpaiTag").active=!0)}else if(this.isMapEmpty(cc.vv.tingpaiArr))for(var e in cc.vv.tingpaiArr){var t=Number.parseInt(e),i=cc.vv.tingpaiArr[t];if(-1==t){this._preservation_hupaai=i;for(var a=0,c=0;c<i.length;c++){for(8==i.length?(this._tingpaiLayer.width=1890,this._tingpaiLayer.x=-950):(this._tingpaiLayer.width=210*(i.length+1),this._tingpaiLayer.x=-860);"MJ"!=this._tingpaiLayer.children[c+a].name;)this._tingpaiLayer.children[c+a].active=!0,a++;var o=this._tingpaiLayer.children[c+a].getComponent(cc.Sprite);o.node.mjId=i[c].pai,o.node.active=!0,this.setSpriteFrameByMJID("M_",o,i[c].pai),this._tingpaiLayer.children[c+a].getChildByName("zhangshu").getComponent(cc.RichText).string="<color=#FFEA00>"+i[c].num+"</c><color=#00BB8D>  张</color>",this._tingpaiLayer.children[c+a].getChildByName("beishu").getComponent(cc.RichText).string="<color=#FFEA00>"+i[c].fan+"</c><color=#00BB8D> 倍</color>"}}}},initEventHandlers:function(){cc.vv.gameNetMgr.dataEventHandler=this.node;var e=this;this.node.on("game_holds",function(t){e.initMahjongs()}),this.node.on("game_begin",function(t){cc.vv.audioMgr.playSFX("effect/xlch/xlch_game_start"+cc.vv.SuffixName),setTimeout(function(){e.onGameBeign(!0)},2500)}),this.node.on("game_sync",function(t){cc.vv.MJGame._startAnimation.active=!1,cc.vv.MJGame._seek_player.active=!1,this._Whether_play=!1,e.onGameBeign(!1)}),this.node.on("game_chupai",function(t){t=t.detail,e.hideChupai(),e.checkQueYiMen();var n=cc.vv.gameNetMgr.seatIndex;t.last!=n&&e.initMopai(t.last,null);var i=cc.vv.gameNetMgr.getSelfData().holds,a=i.length;e._ClickDisplay.width=2==a||5==a||8==a||11==a||14==a?120*(i.length-1):120*i.length,t.turn!=n||cc.vv.gameNetMgr.getSelfData().hued?e._ClickDisplay.active=!0:e._ClickDisplay.active=!1,t.turn==n&&cc.vv.gameNetMgr.seats[n].hued&&(e._IsShowtingpaiLayer=!0,console.log("设置自动出牌 ------ 1"),setTimeout(function(){for(var t=!1,n=0;n<e._options.childrenCount;n++){var i=e._options.children[n];"op"==i.name&&1==i.active&&(t=!0)}cc.vv.gameNetMgr._auto_action=t?null:{action:"chupai"},console.log("设置自动出牌 ------ 2")},1200)),cc.vv.replayMgr.isReplay()||t.turn==n||e.initMopai(t.turn,-1),cc.vv.gameNetMgr.getSelfData().hued&&cc.vv.gameNetMgr.seats[n].hued&&(cc.vv.gameNetMgr._zidonghupai=!0)}),this.node.on("game_mopai",function(t){e.hideChupai();var n=(t=t.detail).pai;if(0==cc.vv.gameNetMgr.getLocalIndex(t.seatIndex)){e._myMJArr[13].node.active=!0,e._myMJArr[13].node.y=-350;var i=e._myMJArr[13].node.getChildByName("qipai"),a=i.getChildByName("M_bamboo_1").getComponent(cc.Sprite);setTimeout(function(){e.setSpriteFrameByMJID("M_",a,n),i.getComponent(cc.Animation).play("qipai")},100),setTimeout(function(){var t=e._myMJArr[13];e.setSpriteFrameByMJID("M_",t,n),t.node.mjId=n,setTimeout(function(){e._myMJArr[13].node.getChildByName("qipai").getChildByName("M_bamboo_1").getComponent(cc.Sprite).spriteFrame=null},100),e.checkQueYiMen()},500)}else cc.vv.replayMgr.isReplay()&&e.initMopai(t.seatIndex,n)}),this.node.on("game_action",function(t){e.showAction(t.detail),e.setAutoAction(t.detail)}),this.node.on("hupai",function(t){var t=t.detail;if(e.update_HuPaiNum(t.pai),e.hideOptions(),cc.vv.Hu_WhetherPlay=!0,"XL_MJGame"==cc.vv._Gametype){if(t.yipaoduoxiang)for(s=0;s<t.scoreList.length;s++){var n=t.scoreList[s],i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid),a=cc.vv.gameNetMgr.seats[i];if(n.coin>0){a.hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprHu").active=!0,e.initHupai(c,t.pai,!0),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}else{c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprYiPaoDuoXiang").active=!0}}else if(t.gangshanghua){for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprGangShangKaiHua").active=!0,e.initHupai(c,t.pai),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}}else if(t.haidilao){for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprHu").active=!0,e.initHupai(c,t.pai),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}}else if(t.qiangganghu){for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprHu").active=!0,e.initHupai(c,t.pai),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}}else if(t.gangshangpao||t.hujiaozhuanyi){for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprHuJiaoZhuanYi").active=!0}}else if(t.chahuazhu);else if(t.chadajiao);else if(t.zimo){for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;c=cc.vv.gameNetMgr.getLocalIndex(i);(o=e._hupaiTips[c]).active=!0,o.getChildByName("sprZimo").active=!0,e.initHupai(c,t.pai),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}}else if(t.hu)for(s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).hued=!0;var c=cc.vv.gameNetMgr.getLocalIndex(i),o=e._hupaiTips[c];o.active=!0,o.getChildByName("sprHu").active=!0,e.initHupai(c,t.pai),e.initOtherMahjongs(a),e.boFangHuPaiTeXiao(i,c)}if(e.gengxinjinbi(t.scoreList),t.zimo){for(var s=0;s<t.scoreList.length;s++)if((n=t.scoreList[s]).coin>0){i=cc.vv.gameNetMgr.getSeatIndexByID(n.userid);(a=cc.vv.gameNetMgr.seats[i]).seatindex==cc.vv.gameNetMgr.seatIndex?(a.holds.pop(),e.initMahjongs()):e.initOtherMahjongs(a)}var a=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],r=Math.ceil(10*Math.random());1==a.sex?r>5?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_hu_zimo_0"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_hu_zimo_1"+cc.vv.SuffixName):r>5?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_hu_zimo_0"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_hu_zimo_1"+cc.vv.SuffixName)}else 1==(a=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex]).sex?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_hu_dianpao_0"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_hu_dianpao_0"+cc.vv.SuffixName);setTimeout(function(){for(var t=0;t<e._hupaiTips.length;t++){var n=e._hupaiTips[t];n.getChildByName("sprHu").active=!1,n.getChildByName("sprZimo").active=!1,n.getChildByName("sprYiPaoDuoXiang").active=!1,n.getChildByName("sprGangShangKaiHua").active=!1,n.getChildByName("sprHuJiaoZhuanYi").active=!1}},1800)}}),this.node.on("mj_count",function(t){e._mjcount.string=cc.vv.gameNetMgr.numOfMJ}),this.node.on("game_num",function(t){e._gamecount.string=cc.vv.gameNetMgr.numOfGames+"/"+cc.vv.gameNetMgr.maxNumOfGames}),this.node.on("game_over",function(t){e.hideTingPaiLayer(),e.hidemyMJArrOftingpaiTag(),e.hidemyMJArrOfzhezhao(),e.game_tuoguan_cancel_result(),cc.vv.MJGame._Whether_play=!0,cc.vv.audioMgr.playSFX("effect/xlch/xlch_game_end_enter"+cc.vv.SuffixName),e._duijujieshu.active=!0;var n=cc.scaleTo(.3,1.7,1.7),i=cc.scaleTo(.3,.7,.7),a=cc.scaleTo(.2,1,1),c=cc.delayTime(2.2),o=cc.callFunc(function(){e._duijujieshu.active=!1},this),s=cc.sequence(n,i,a,c,o);e._duijujieshu.runAction(s)}),this.node.on("game_chupai_notify",function(t){e.hideChupai();var n=t.detail.seatData;n.seatindex==cc.vv.gameNetMgr.seatIndex?e.initMahjongs():e.initOtherMahjongs(n),e.checkQueYiMen(),e.showChupai();var i=cc.vv.mahjongmgr.getAudioURLByMJID(t.detail.pai);cc.vv.audioMgr.playSFX(i),e.initMopai(cc.vv.gameNetMgr.turn,null)}),this.node.on("guo_notify",function(t){e.hideChupai(),t.detail.seatindex==cc.vv.gameNetMgr.seatIndex&&e.initMahjongs(),cc.vv.audioMgr.playSFX("give.mp3")}),this.node.on("guo_result",function(t){var n=t.detail.userid;cc.vv.userMgr.userId==n&&e.hideOptions()}),this.node.on("game_dingque_finish",function(t){e.initMahjongs()}),this.node.on("peng_notify",function(t){e.hideChupai();var n=t.detail.seatData;n.seatindex==cc.vv.gameNetMgr.seatIndex?e.initMahjongs():e.initOtherMahjongs(n);var i=e.getLocalIndex(n.seatindex);e.playEfx(i,"play_peng");var a=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],c=Math.ceil(10*Math.random());1==a.sex?c>=2?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_peng_0"+cc.vv.SuffixName):c>=5?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_peng_1"+cc.vv.SuffixName):c>=7?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_peng_2"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_peng_3"+cc.vv.SuffixName):c>=2?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_peng_0"+cc.vv.SuffixName):c>=5?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_peng_1"+cc.vv.SuffixName):c>=7?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_peng_2"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_peng_3"+cc.vv.SuffixName),e.hideOptions()}),this.node.on("gang_notify",function(t){e.hideChupai(),e.hideOptions();var n=(t=t.detail).seatData,i=t.gangtype,a=t.scoreList;n.seatindex==cc.vv.gameNetMgr.seatIndex?(e.initMahjongs(),e._gang=[]):e.initOtherMahjongs(n);var c=e.getLocalIndex(n.seatindex);e.playEfx(c,"play_gang");var o=Math.ceil(10*Math.random()),s=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex];"angang"==i?1==s.sex?o>=3?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_gang_an_0"+cc.vv.SuffixName):o>=6?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_gang_an_1"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_gang_an_2"+cc.vv.SuffixName):o>=3?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_gang_an_0"+cc.vv.SuffixName):o>=6?cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_gang_an_1"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_gang_an_2"+cc.vv.SuffixName):"diangang"==i?1==s.sex?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_gang_ming_0"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_gang_ming_1"+cc.vv.SuffixName):1==s.sex?cc.vv.audioMgr.playSFX("effect/xlch/woman/xlch_gril_gang_ming_1"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/man/xlch_boy_gang_ming_0"+cc.vv.SuffixName),setTimeout(function(){var t=cc.vv.mahjongmgr.getSide(c),n=e.node.getChildByName("game").getChildByName(t),a=Math.ceil(10*Math.random());"angang"==i?(n.getChildByName("xiayu").getComponent(cc.Animation).play("xiayu"),a>5?cc.vv.audioMgr.playSFX("effect/xlch/xlch_xiayu_big"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/xlch_xiayu_small"+cc.vv.SuffixName)):(n.getChildByName("guafeng").getComponent(cc.Animation).play("guafeng"),a>5?cc.vv.audioMgr.playSFX("effect/xlch/xlch_guafeng_big"+cc.vv.SuffixName):cc.vv.audioMgr.playSFX("effect/xlch/xlch_guafeng_small"+cc.vv.SuffixName))},600),e.gengxinjinbi(a)}),this.node.on("hangang_notify",function(t){var t=t.detail,n=e.getLocalIndex(t);e.playEfx(n,"play_gang"),cc.vv.audioMgr.playSFX("nv/gang.mp3"),e.hideOptions()}),this.node.on("game_seat_renshu",function(t){var t=t.detail,n=cc.vv.gameNetMgr.getSeatIndexByID(t),i=cc.vv.gameNetMgr.getLocalIndex(n);n==cc.vv.gameNetMgr.seatIndex?e.display_ThrowInTheTowel():e._waitRenshu[i].getChildByName("chongzhi").active=!0}),this.node.on("game_renshu",function(t){var t=t.detail;e._throwInTheTowel.active=!1;var n=cc.vv.gameNetMgr.getSeatIndexByID(t.userid),i=cc.vv.gameNetMgr.getLocalIndex(n);e._waitRenshu[i].getChildByName("chongzhi").active=!1,t.renshu&&(e._waitRenshu[i].getChildByName("renshu").active=!0)})},getViewInstantiate:function(e,t,n){var i=t,a=cc.instantiate(n);return i.addChild(a),a},deleteRemoveChild:function(e,t){e.removeChild(t,!0)},showChupai:function(){var e=cc.vv.gameNetMgr.chupai;if(e>=0){var t=this.getLocalIndex(cc.vv.gameNetMgr.turn),n=this._chupaiSprite[t].children[1].getComponent(cc.Sprite);n.spriteFrame=null,cc.vv.mahjongmgr.getSpriteFrameByMJID(n,"M_",e),this._chupaiSprite[t].children[0].active=!0,n.node.active=!0,cc.vv.gameNetMgr.chupai=-1}},addOption:function(e,t){cc.vv.gameNetMgr.getSelfData().hued?this._options.getChildByName("btnGuo").active=!1:this._options.getChildByName("btnGuo").active=!0;for(var n=0;n<this._options.childrenCount;++n){var i=this._options.children[n];if("op"==i.name&&0==i.active){i.active=!0;var a=i.getChildByName("opTarget").getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(a,"M_",t);var c=i.getChildByName(e);return c.active=!0,void(c.pai=t)}}},hideOptions:function(e){this._GangLayer.active=!1,this._options.active=!1;for(var t=0;t<this._options.childrenCount;++t){var n=this._options.children[t];"op"==n.name&&(n.active=!1,n.getChildByName("btnPeng").active=!1,n.getChildByName("btnGang").active=!1,n.getChildByName("btnHu").active=!1)}},showAction:function(e){this._options.active&&this.hideOptions(),e&&(e.hu||e.gang||e.peng)&&(this._options.active=!0,e.hu&&this.addOption("btnHu",e.pai),e.peng&&this.addOption("btnPeng",e.pai),e.gang&&(this.addOption("btnGang",-1),this._gang=e.gangpai)),cc.vv.gameNetMgr.curaction=null},setAutoAction:function(e){e&&(e.hu||e.gang)&&(e.hu?console.log("设置自动出牌 ------ 3"):e.gang&&console.log("设置自动出牌 ------ 4"))},initHupai:function(e,t,n){if("XL_MJGame"==cc.vv._Gametype){var i=this._hupaiLists[e];i.active||(i.active=!0);for(var a=!0,c=0;c<i.children.length;++c){var o=i.children[c];if("MahjongBorders"!=o.name){if(0==o.active){var s=cc.vv.mahjongmgr.getFoldPre(e);cc.vv.mahjongmgr.getSpriteFrameByMJID(o.getComponent(cc.Sprite),s,t),o.active=!0,cc.vv.Hu_WhetherPlay&&(o.getChildByName("huPaiTeXiao").active=!0,o.getChildByName("huPaiTeXiao").getComponent(cc.Animation).play("hupaidian")),n&&0!=e&&(o.getChildByName("MJ_character").active=!0);break}}else!o.active&&a&&(o.active=!0,a=!1)}}},playEfx:function(e,t){this._playEfxs[e].node.active=!0,this._playEfxs[e].play(t)},onGameBeign:function(e){if(cc.is_pure_begin=!1,(c=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex]).huanpais){for(i=0;i<c.huanpais.length;i++){cc.find("Canvas/game").getChildByName("xianshihuanpai").active=!0;var t=cc.find("Canvas/game").getChildByName("xianshihuanpai").children[i].getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(t,"M_",c.huanpais[i])}for(var n=cc.find("Canvas/game").getChildByName("xianshihuanpai").getChildByName("zhishi"),i=0;i<n.childrenCount;i++)cc.vv.gameNetMgr._changeBrand==i?n.children[i].active=!0:n.children[i].active=!1}for(i=0;i<this._playEfxs.length;++i)this._playEfxs[i].node.active=!1;for(i=0;i<this._hupaiLists.length;++i){this._hupaiLists[i].active=!1;for(g=0;g<this._hupaiLists[i].childrenCount;++g){this._hupaiLists[i].children[g].active=!1;for(var a=0;a<this._hupaiLists[i].children[g].childrenCount;++a)this._hupaiLists[i].children[g].children[a].active=!1}}for(i=0;i<cc.vv.gameNetMgr.seats.length;++i){var c=cc.vv.gameNetMgr.seats[i],o=cc.vv.gameNetMgr.getLocalIndex(i);if(c.huinfo)for(g=0;g<c.huinfo.length;++g){var s=c.huinfo[g];this.initHupai(o,s)}}this.hideChupai();for(var r=["right","up","left"],l=this.node.getChildByName("game"),i=0;i<r.length;++i)for(var h=l.getChildByName(r[i]).getChildByName("holds"),g=0;g<h.childrenCount;++g){var d=h.children[g];d.active=!0,(t=d.getComponent(cc.Sprite)).spriteFrame=cc.vv.mahjongmgr.holdsEmpty[i]}if(cc.vv.gameNetMgr.curIsDissolve&&(cc.vv.popupMgr.showDissolveNotice(cc.vv.gameNetMgr.curIsDissolve),cc.vv.gameNetMgr.curIsDissolve=null),""!=cc.vv.gameNetMgr.gamestate||0!=cc.vv.replayMgr.isReplay()){this.updateSeatsData();for(var u=cc.vv.gameNetMgr.seats,i=0;i<u.length;i++){c=u[i];0!=(o=cc.vv.gameNetMgr.getLocalIndex(i))&&(this.initOtherMahjongs(c),this.initMopai(i,null))}e?this.initStartAction():(this.initMahjongs(),this.showChupai(),null!=cc.vv.gameNetMgr.curaction&&(this.showAction(cc.vv.gameNetMgr.curaction),this.setAutoAction(cc.vv.gameNetMgr.curaction))),cc.vv.MJRoom.rotate()}},updateSeatsData:function(){this.gameRoot.active=!0,this.prepareRoot.active=!1,cc.vv.MJRoom.initSeats()},initStartAction:function(){var e=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],t=e.holds;if(null!=t){t=this.sortHolds(e);for(var n=this.node.getChildByName("game").getChildByName("myself").getChildByName("holds"),i=0;i<n.childrenCount;i++)n.children[i].active=!1;this._IskaipaidongzuoLimit=!0;var a=this,c=0;!function e(){for(var i=c,o=t.length-i>4?4:t.length-i,s=0;s<o;++s){n.children[i+s].getChildByName("fanpai").getComponent(cc.Animation).play("fanpai");var r=t[i+s];a.showSingleMJ(i+s,r,t,n)}if(c+=o,cc.vv.audioMgr.playSFX("select.mp3"),c>=t.length)return a.initMahjongs(),a.showChupai(),void(a._IskaipaidongzuoLimit=!1);setTimeout(e,1e3)}()}},showSingleMJ:function(e,t,n,i){var a=this._myMJArr[e];a.node.mjId=t,this.setSpriteFrameByMJID("M_",a,t)},shoot:function(e){null!=e&&cc.vv.net.send("chupai",e)},getMJIndex:function(e,t){return"right"==e||"up"==e?13-t:t},initMopai:function(e,t){var n=cc.vv.gameNetMgr.getLocalIndex(e),i=cc.vv.mahjongmgr.getSide(n),a=cc.vv.mahjongmgr.getFoldPre(n),c=this.node.getChildByName("game").getChildByName(i).getChildByName("holds"),o=this.getMJIndex(i,13),s=c.children[o];if(null==t)s.active=!1;else if(t>=0){s.active=!0;r=s.getComponent(cc.Sprite);cc.vv.mahjongmgr.getSpriteFrameByMJID(r,a,t)}else if(null!=t){s.active=!0;var r=s.getComponent(cc.Sprite);cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(r,i)}},initEmptySprites:function(e){for(var t=cc.vv.gameNetMgr.getLocalIndex(e),n=cc.vv.mahjongmgr.getSide(t),i=(cc.vv.mahjongmgr.getFoldPre(t),this.node.getChildByName("game").getChildByName(n).getChildByName("holds")),a=0;a<i.childrenCount;++a){var c=i.children[a].getComponent(cc.Sprite);cc.vv.mahjongmgr.getEmptySpriteFrame(c,n)}},initOtherMahjongs:function(e){var t=this.getLocalIndex(e.seatindex);if(0!=t){var n=cc.vv.mahjongmgr.getSide(t),i=this.node.getChildByName("game").getChildByName(n).getChildByName("holds");if(e.pengs&&e.angangs&&e.diangangs&&e.wangangs){var a=e.pengs.length+e.angangs.length+e.diangangs.length+e.wangangs.length;a*=3;for(h=0;h<a;++h){s=this.getMJIndex(n,h);i.children[s].active=!1}var c=cc.vv.mahjongmgr.getFoldPre(t),o=this.sortHolds(e);if(null!=o&&o.length>0){for(h=0;h<o.length;++h){var s=this.getMJIndex(n,h+a),r=i.children[s].getComponent(cc.Sprite);"up"==n&&(r.node.scaleX=.55,r.node.scaleY=.55),r.node.active=!0,cc.vv.mahjongmgr.getSpriteFrameByMJID(r,c,o[h])}if(o.length+a==13){var l=this.getMJIndex(n,13);i.children[l].active=!1}}else if(e.hued)for(h=a;h<13;++h){var s=this.getMJIndex(n,h),r=(g=i.children[s]).getComponent(cc.Sprite);"up"==n&&(r.node.scaleX=.55,r.node.scaleY=.55),cc.vv.mahjongmgr.getEmptySpriteFrame(r,n)}else if(!e.hued)for(var h=a;h<13;++h){var s=this.getMJIndex(n,h),g=i.children[s],r=g.getComponent(cc.Sprite);"up"==n&&(r.node.scaleX=1,r.node.scaleY=1),cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(r,n)}}}},sortHolds:function(e){var t=e.holds;if(null==t)return null;var n=null,i=t.length;2!=i&&5!=i&&8!=i&&11!=i&&14!=i||(n=t.pop());for(var a=e.dingque,c=[],o=[],s=[],r=0;r<t.length;r++)t[r]>17?c.push(t[r]):t[r]>8?s.push(t[r]):o.push(t[r]);cc.vv.mahjongmgr.sortMJ(c),cc.vv.mahjongmgr.sortMJ(s),cc.vv.mahjongmgr.sortMJ(o);var l=[];return c.concat(o,s),l=0==a?c.concat(s,o):1==a?c.concat(o,s):2==a?o.concat(s,c):c.concat(o,s),t=l,null!=n&&t.push(n),e.holds=t,t},initMahjongs:function(e){var t=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],n=t.holds;console.log("麻将排序前：initMahjongs:"+n),e||(n=this.sortHolds(t)),console.log("麻将排序后：initMahjongs:"+n);var i=0;if(t.pengs&&t.angangs&&t.diangangs&&t.wangangs){i=3*(t.pengs.length+t.angangs.length+t.diangangs.length+t.wangangs.length);for(c=0;c<n.length;++c){var a=n[c];(o=this._myMJArr[c+i]).node.mjId=a,o.node.y=-350,this.setSpriteFrameByMJID("M_",o,a)}for(var c=0;c<i;++c)(o=this._myMJArr[c]).node.mjId=null,o.spriteFrame=null,o.node.active=!1;if(i+n.length==13){var o=this._myMJArr[13];o.node.mjId=null,o.spriteFrame=null}}},setSpriteFrameByMJID:function(e,t,n){cc.vv.mahjongmgr.getSpriteFrameByMJID(t,e,n),t.node.active=!0},checkQueYiMen:function(){this.hidemyMJArrOfzhezhao();cc.vv.gameNetMgr.seats;if(this._tuoguanState)for(i=0;i<this._myMJArr.length;++i)(e=this._myMJArr[i]).node.y=-350,null!=e.node.mjId&&(e.node.getChildByName("zhezhao").active=!0);else if(cc.vv.gameNetMgr.getSelfData().hued)if(cc.vv.gameNetMgr.seatIndex==cc.vv.gameNetMgr.turn)for(i=0;i<14;++i)(e=this._myMJArr[i]).node.y=-350,1==e.node.active&&(e.node.getChildByName("zhezhao").active=13!=i);else for(i=0;i<14;++i){var e=this._myMJArr[i];e.node.y=-350,1==e.node.active&&(e.node.getChildByName("zhezhao").active=!1)}else{var t=cc.vv.gameNetMgr.dingque,n=!1;if(cc.vv.gameNetMgr.seatIndex==cc.vv.gameNetMgr.turn)for(i=0;i<this._myMJArr.length;++i)if((e=this._myMJArr[i]).node.y=-350,null!=e.node.mjId&&(a=cc.vv.mahjongmgr.getMahjongType(e.node.mjId))==t){n=!0;break}for(var i=0;i<this._myMJArr.length;++i)if((e=this._myMJArr[i]).node.y=-350,null!=e.node.mjId){var a=cc.vv.mahjongmgr.getMahjongType(e.node.mjId);e.node.getChildByName("zhezhao").active=!(!n||a==t)}}},hidemyMJArrOfzhezhao:function(){for(var e=0;e<this._myMJArr.length;e++)this._myMJArr[e].node.getChildByName("zhezhao").active=!1},getLocalIndex:function(e){return(e-cc.vv.gameNetMgr.seatIndex+4)%4},onOptionClicked:function(e){if(console.log(e.target.pai),"btnPeng"==e.target.name)cc.vv.net.send("peng");else if("btnGang"==e.target.name){if(1==this._gang.length)return void cc.vv.net.send("gang",this._gang[0]);var t=0;if(this._options.active)for(a=0;a<this._options.childrenCount;++a){var n=this._options.children[a];if("op"==n.name&&n.getChildByName("btnGang").active){!0,t=a;break}}1==t?this._GangLayer.x=400:2==t?this._GangLayer.x=110:3==t?this._GangLayer.x=-180:4==t&&(this._GangLayer.x=-470);var i=this._GangLayer;i.active=!0;for(var a=0;a<this._gang.length;a++){i.children[a].active=!0;var c=i.children[a].getChildByName("card").getComponent(cc.Sprite);this.setSpriteFrameByMJID("M_",c,this._gang[a]);var o=cc.scaleTo(.2,1.2,1.2),s=cc.scaleTo(.2,.8,.8),r=cc.scaleTo(.1,1,1),l=cc.sequence(o,s,r);i.children[a].runAction(l)}cc.vv.net.send("gang",e.target.pai)}else"btnHu"==e.target.name?cc.vv.net.send("hu"):"btnGuo"==e.target.name&&cc.vv.net.send("guo")},GangLayerBtn:function(e,t){cc.vv.net.send("gang",this._gang[parseInt(t)]),this.hidGangAdd()},hidGangAdd:function(){for(var e=0;e<this._GangLayer.childrenCount;e++)this._GangLayer.children[e].active=!1,this._GangLayer.children[e].scaleX=.1,this._GangLayer.children[e].scaleY=.1},update:function(e){this.showtingpaiTag(),this.updateAutoAction(e),this.IskaipaiHideOptions()},IskaipaiHideOptions:function(){this._IskaipaidongzuoLimit&&this._options.active?(this._IskaipaiCloseHideOptions=!0,this._options.active=!1):!this._IskaipaiCloseHideOptions||this._IskaipaidongzuoLimit||this._options.active||(this._IskaipaiCloseHideOptions=!1,this._options.active=!0)},huazhu:function(){if(null==cc.vv.gameNetMgr.conf||"xlch_ych"!=cc.vv.gameNetMgr.conf.type||!cc.vv.gameNetMgr.getSelfData().hued){var e=!1,t=!1,n=!1,i=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],a=i.holds,c=i.pengs,o=i.angangs,s=i.diangangs,r=i.wangangs,l=[];if(c.length>0)for(h=0;h<c.length;++h)l.push(c[h]);if(o.length>0)for(h=0;h<o.length;++h)l.push(o[h]);if(s.length>0)for(h=0;h<s.length;++h)l.push(s[h]);if(r.length>0)for(h=0;h<r.length;++h)l.push(r[h]);if(a.length>0)for(h=0;h<a.length;++h)l.push(a[h]);for(var h=0;h<l.length;++h)l[h]>=0&&l[h]<=8?e=!0:l[h]>=9&&l[h]<=17?t=!0:l[h]>=18&&l[h]<=26&&(n=!0);this.node.getChildByName("game").getChildByName("huazhu").active=!!(e&&t&&n)}},updateCrownInfo:function(e){for(var t=0;t<e.length;++t){var n=cc.vv.gameNetMgr.getSeatIndexByID(e.winerid),i=cc.vv.gameNetMgr.getLocalIndex(n),a=cc.vv.mahjongmgr.getSide(i);self.node.getChildByName("game").getChildByName(a).getChildByName("crown").active=e.winerid}},updateAutoAction:function(e){if(cc.vv.gameNetMgr._zidonghupai&&cc.vv.gameNetMgr._auto_action){var t=this;switch(cc.vv.gameNetMgr._auto_action.action){case"chupai":t.shoot(t._myMJArr[13].node.mjId);break;case"gang":cc.vv.net.send("gang",t._myMJArr[13].node.mjId);break;case"hu":cc.vv.net.send("hu")}cc.vv.gameNetMgr._auto_action=null,console.log("设置自动出牌 ------ 5")}},yidongjuli:function(){if(this._Whether_play){this._Whether_play=!1,this._startAnimation.active=!0;var e=cc.moveTo(.3,cc.p(0,0)),t=cc.moveTo(.3,cc.p(0,0)),n=cc.moveTo(.3,cc.p(0,0)),i=cc.moveTo(.3,cc.p(0,0));this._lower_Animation.runAction(e),this._right_Animation.runAction(t),this._upper_Animation.runAction(n),this._Left_Animation.runAction(i);var a=this;setTimeout(function(){c()},300),setTimeout(function(){o()},600),setTimeout(function(){s(),r()},1300),setTimeout(function(){l()},2e3);var c=function(){var e=cc.scaleTo(.3,1,1);a._kaiju.active=!0,a._kaiju.runAction(e)},o=function(){var e=cc.scaleTo(.1,1.05,1.05),t=cc.scaleTo(.1,.95,.95),n=cc.scaleTo(.1,1,1),i=cc.sequence(e,t,n);a._startAnimation.runAction(i)},s=function(){a._seek_player.active=!1;var e=cc.scaleTo(.3,5,5);a._kaiju.runAction(e)},r=function(){var e=cc.moveTo(.3,cc.p(0,-540)),t=cc.moveTo(.3,cc.p(960,0)),n=cc.moveTo(.3,cc.p(0,540)),i=cc.moveTo(.3,cc.p(-960,0));a._lower_Animation.runAction(e),a._right_Animation.runAction(t),a._upper_Animation.runAction(n),a._Left_Animation.runAction(i)},l=function(){a._startAnimation.active=!1,a._seek_player.active=!1}}},SetUpSeek_place_lv:function(){for(var e=this._seek_player.getChildByName("place_lv"),t=this.node.getChildByName("bg"),n=0;n<e.children.length;n++)e.children[n].active=!1;for(var i=0;i<t.children.length;i++)t.children[i].active=!1;1==cc.vv.gameNetMgr.choice_place_lv?(e.children[0].active=!0,t.children[0].active=!0):2==cc.vv.gameNetMgr.choice_place_lv?(e.children[1].active=!0,t.children[1].active=!0):3==cc.vv.gameNetMgr.choice_place_lv&&(e.children[2].active=!0,t.children[2].active=!0)},display_Seek_Interface_Info:function(){for(var e=0;e<cc.vv.gameNetMgr.seats.length;e++){var t=cc.vv.gameNetMgr.seats[e],n=cc.vv.gameNetMgr.getLocalIndex(t.seatindex);if(0==n){var i=this._seek_player.getChildByName("seat_M");if(null==t.name||""==t.name){i.active=!1;continue}i.active=!0;u=i.getChildByName("icon").getComponent(cc.Sprite);(v=i.getChildByName("name").getComponent(cc.Label)).string=t.name;var a=this._lower_Animation.getChildByName("icon").getComponent(cc.Sprite);t.heading&&cc.loader.load(t.heading,function(e,t){if(null!=t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));u.spriteFrame=n,a.spriteFrame=n}})}else if(1==n){var c=this._seek_player.getChildByName("seat_R");if(null==t.name||""==t.name){c.active=!1;continue}c.scaleX=0,c.scaleY=0,c.active=!0;var o=cc.scaleTo(0,0,0),s=cc.scaleTo(.35,1,1),r=cc.sequence(o,s);c.runAction(r);u=c.getChildByName("icon").getComponent(cc.Sprite);(v=c.getChildByName("name").getComponent(cc.Label)).string=t.name;var l=this._right_Animation.getChildByName("icon").getComponent(cc.Sprite);t.heading&&cc.loader.load(t.heading,function(e,t){if(null!=t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));u.spriteFrame=n,l.spriteFrame=n}})}else if(2==n){var h=this._seek_player.getChildByName("seat_U");if(null==t.name||""==t.name){h.active=!1;continue}h.scaleX=0,h.scaleY=0,h.active=!0;var o=cc.scaleTo(0,0,0),s=cc.scaleTo(.35,1,1),r=cc.sequence(o,s);h.runAction(r);u=h.getChildByName("icon").getComponent(cc.Sprite);(v=h.getChildByName("name").getComponent(cc.Label)).string=t.name;var g=this._upper_Animation.getChildByName("icon").getComponent(cc.Sprite);t.heading&&cc.loader.load(t.heading,function(e,t){if(null!=t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));u.spriteFrame=n,g.spriteFrame=n}})}else if(3==n){var d=this._seek_player.getChildByName("seat_L");if(null==t.name||""==t.name){d.active=!1;continue}d.scaleX=0,d.scaleY=0,d.active=!0;var o=cc.scaleTo(0,0,0),s=cc.scaleTo(.35,1,1),r=cc.sequence(o,s);d.runAction(r);var u=d.getChildByName("icon").getComponent(cc.Sprite),v=d.getChildByName("name").getComponent(cc.Label);v.string=t.name;var m=this._Left_Animation.getChildByName("icon").getComponent(cc.Sprite);t.heading&&cc.loader.load(t.heading,function(e,t){if(null!=t){var n=new cc.SpriteFrame(t,cc.Rect(0,0,t.width,t.height));u.spriteFrame=n,m.spriteFrame=n}})}}for(var p,_=0;_<cc.vv.gameNetMgr.seats.length;_++){if(null==(t=cc.vv.gameNetMgr.seats[_]).name||""==t.name){p=!1;break}p=!0}var f=this;setTimeout(function(){p&&cc.vv.MJGame._Whether_play&&(f._startAnimation.active=!0,f._startAnimation.getComponent(cc.Animation).play("kaiju"),f._seek_player.active=!1)},500)},settlementInfo_guanbi:function(){this._settlementInfo.active=!1},settlementInfo_dakai:function(){this._settlementInfo.active=!0},settlementInfo_display:function(e){var t=this._settlementInfo.getChildByName("winOrLose_Explain").getChildByName("win_score"),n=this._settlementInfo.getChildByName("winOrLose_Explain").getChildByName("lose_score");t.active=!1,n.active=!1;var i=parseInt(this._settlementNum.string);i+=e.score,this._settlementNum.string=i,i>0?(t.active=!0,t.getComponent(cc.Label).string="+"+i):i<0?(n.active=!0,n.getComponent(cc.Label).string=i):(t.active=!0,t.getComponent(cc.Label).string=0);for(var a=this._settlementInfo.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),c=0,o=0;o<a.children.length;o++)a.children[o].active&&c++;a.height=130*(c+1);var s=a.children[c],r=e;s.getChildByName("beishu").getComponent(cc.Label).string=r.fan+"倍";var l=r.score;r.score>0?(l="+"+l,s.getChildByName("fenshu").color=new cc.Color(204,42,3)):r.score<0&&(s.getChildByName("fenshu").color=new cc.Color(0,187,141)),s.getChildByName("fenshu").getComponent(cc.Label).string=l;var h="",g=cc.vv.gameNetMgr.getSeatIndexByID(r.userId),d=cc.vv.gameNetMgr.getLocalIndex(g);0==d?h="三家":1==d?h="下家":2==d?h="对家":3==d&&(h="上家"),s.getChildByName("weizhi").getComponent(cc.Label).string=h;var u="";"normal"==r.paixing?u="平胡":"duidui"==r.paixing?u="对对胡":"qingyise"==r.paixing?u="清一色":"qidui"==r.paixing?u="七对":"yaojiu"==r.paixing?u="幺九":"jingougou"==r.paixing?u="金钩钩":"qingdui"==r.paixing?u="清对":"qingqidui"==r.paixing?u="清七对":"longqidui"==r.paixing?u="龙七对":"qingyaojiu"==r.paixing?u="清幺九":"qingjingougou"==r.paixing?u="清金钩钩":"jiangjingougou"==r.paixing?u="将金钩钩":"qinglongqidui"==r.paixing&&(u="清龙七对");var v="";r.tuishui?(v=r.score>0?"退税":"被退税",s.getChildByName("hufa").getComponent(cc.Label).string=v):r.hujiaozhuanyi&&!r.hu?(v=r.score>0?"呼叫转移":"被呼叫转移",s.getChildByName("hufa").getComponent(cc.Label).string=v):r.chadajiao||r.chahuazhu?(r.chadajiao&&(v=r.score>0?"查大叫":"被查大叫"),r.chahuazhu&&(v=r.score>0?"查花猪":"被查花猪"),s.getChildByName("hufa").getComponent(cc.Label).string=v):r.isgang?("angang"==r.gangtype?v=r.userId==cc.vv.userMgr.userId?"下雨":"被下雨":"wangang"==r.gangtype?v=r.userId==cc.vv.userMgr.userId?"刮风":"被刮风":"diangang"==r.gangtype&&(v=r.score>0?"刮风":"被刮风"),s.getChildByName("hufa").getComponent(cc.Label).string=v):(r.zimo?v=r.userId==cc.vv.userMgr.userId?"自摸":"被自摸":r.hu&&(v=r.score>0?"胡":"点炮"),v=v+"("+u,r.gangshanghua&&(v+=",杠上花"),r.hujiaozhuanyi&&(v+=",杠上炮"),r.qiangganghu&&(v+=",抢杠胡"),r.haidilao&&(v+=",海底捞月"),r.gang>0&&(v+=","+r.gang+"杠"),r.gen>0&&(v+=","+r.gen+"根"),s.getChildByName("hufa").getComponent(cc.Label).string=v+")"),s.active=!0},eliminate_settlementInfo:function(){this._settlementInfo.active=!1,this._settlementNum.string=0,this._settlementInfo.getChildByName("winOrLose_Explain").getChildByName("win_score").getComponent(cc.Label).string=0;var e=this._settlementInfo.getChildByName("winOrLose_Explain").getChildByName("lose_score");e.active=!1,e.getComponent(cc.Label).string="";for(var t=this._settlementInfo.getChildByName("ScrollView").getChildByName("view").getChildByName("content"),n=0;n<t.children.length;n++)t.children[n].active=!1},gengxinjinbi:function(e){for(var t=this,n=0;n<e.length;n++){var i=e[n],a=cc.vv.gameNetMgr.getSeatIndexByID(i.userid),c=cc.vv.gameNetMgr.getLocalIndex(a),o=cc.vv.mahjongmgr.getSide(c),s=t.node.getChildByName("game");if("myself"==o){var r,l=s.getChildByName(o).getChildByName("fractionalVariation"),h=l.getChildByName("increase_Fraction"),g=l.getChildByName("reduce_Fraction"),d="";if(i.coin>0)r=t.getViewInstantiate(0,l,h),d="+"+i.coin,setTimeout(function(){cc.vv.audioMgr.playSFX("effect/xlch/xlch_huazhu_add_gold"+cc.vv.SuffixName)},400);else{if(!(i.coin<0))continue;r=t.getViewInstantiate(0,l,g),d=i.coin,setTimeout(function(){cc.vv.audioMgr.playSFX("effect/xlch/xlch_huazhu_sub_gold"+cc.vv.SuffixName)},400)}r.active=!0;var u=cc.delayTime(.4),v=cc.callFunc(function(){r.getComponent(cc.Label).string=d},this),m=cc.callFunc(function(){t.deleteRemoveChild(l,r)},this),p=cc.delayTime(1.4),_=cc.sequence(u,v,p,m);r.runAction(_)}else if("right"==o){var f=s.getChildByName(o).getChildByName("fractionalVariation"),y=f.getChildByName("increase_Fraction"),C=f.getChildByName("reduce_Fraction");if(i.coin>0)y.getComponent(cc.Label).string="+"+i.coin;else{if(!(i.coin<0))continue;C.getComponent(cc.Label).string=i.coin}setTimeout(function(){y.active=!0,C.active=!0},400)}else if("up"==o){var b=s.getChildByName(o).getChildByName("fractionalVariation"),N=b.getChildByName("increase_Fraction"),B=b.getChildByName("reduce_Fraction");i.coin>0?N.getComponent(cc.Label).string="+"+i.coin:i.coin<0&&(B.getComponent(cc.Label).string=i.coin),setTimeout(function(){N.active=!0,B.active=!0},400)}else if("left"==o){var x=s.getChildByName(o).getChildByName("fractionalVariation"),M=x.getChildByName("increase_Fraction"),S=x.getChildByName("reduce_Fraction");i.coin>0?M.getComponent(cc.Label).string="+"+i.coin:i.coin<0&&(S.getComponent(cc.Label).string=i.coin),setTimeout(function(){M.active=!0,S.active=!0},400)}}var k=function(){for(var e=["myself","right","up","left"],n=0;n<e.length;++n){var i=e[n],a=t.node.getChildByName("game").getChildByName(i).getChildByName("fractionalVariation");a.getChildByName("increase_Fraction").active=!1,a.getChildByName("increase_Fraction").getComponent(cc.Label).string="",a.getChildByName("reduce_Fraction").active=!1,a.getChildByName("reduce_Fraction").getComponent(cc.Label).string=""}};setTimeout(function(){k()},1800)},game_tuoguan:function(){cc.vv.net.send("game_tuoguan")},game_tuoguan_result:function(){this._quxiaotuoguan.active=!0,this._tuoguanState=!0},game_tuoguan_cancel:function(){cc.vv.net.send("game_tuoguan_cancel")},game_tuoguan_cancel_result:function(){this._quxiaotuoguan.active=!1,this._tuoguanState=!1},display_discountRecharge:function(){this._discountRecharge.active=!0},hide_discountRecharge:function(){this._discountRecharge.active=!1},display_Help:function(){this._Help.active=!0},hide_Help:function(){this._Help.active=!1},ClickDisplay_TingPai:function(){var e=this;this._ClickDisplay.on(cc.Node.EventType.TOUCH_START,function(t){e._preservation_hupaai.length>0&&(e._tingpaiLayer.active=!0,console.log("TOUCH_START"))},cc.node),this._ClickDisplay.on(cc.Node.EventType.TOUCH_END,function(t){console.log("TOUCH_END"),e._tingpaiLayer.active=!1},cc.node),this._ClickDisplay.on(cc.Node.EventType.TOUCH_CANCEL,function(t){console.log("TOUCH_CANCEL"),e._tingpaiLayer.active=!1},cc.node)},update_HuPaiNum:function(e){var t=0;if(this._preservation_hupaai)for(var n=0;n<this._preservation_hupaai.length;n++){for(;"MJ"!=this._tingpaiLayer.children[n+t].name;)this._tingpaiLayer.children[n+t].active=!0,t++;if(this._preservation_hupaai[n].pai==e){if(this._preservation_hupaai[n].num=this._preservation_hupaai[n].num-1,this._preservation_hupaai[n].num<0)return void(this._preservation_hupaai[n].num=0);this._tingpaiLayer.children[n+t].getChildByName("zhangshu").getComponent(cc.RichText).string="<color=#FFEA00>"+this._preservation_hupaai[n].num+"</c><color=#00BB8D>  张</color>"}}},return_hall:function(){cc.vv.net.send("exit_room"),cc.vv.userMgr._XLCH_Record=!0},display_ThrowInTheTowel:function(){this._throwInTheTowel.active=!0},hide_ThrowInTheTowel:function(){cc.vv.net.send("game_check_renshu"),this._throwInTheTowel.active=!1},boFangHuPaiTeXiao:function(e,t){var n=cc.vv.gameNetMgr.seats[e],i=this._huPaiTeXiaoArr[t],a=3*(n.pengs.length+n.angangs.length+n.diangangs.length+n.wangangs.length);0==t?12==a?(i.children[0].getChildByName("shandian1").width=125,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao")):9==a?(i.children[0].getChildByName("shandian1").width=485,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao")):6==a?(i.children[0].getChildByName("shandian1").width=485,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[1].getComponent(cc.Animation).play("hupaidiantexiao")):3==a?(i.children[0].getChildByName("shandian1").width=485,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[1].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[2].getComponent(cc.Animation).play("hupaidiantexiao")):0==a&&(i.children[0].getChildByName("shandian1").width=485,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[1].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[2].getComponent(cc.Animation).play("hupaidiantexiao"),i.children[3].getComponent(cc.Animation).play("hupaidiantexiao")):1==t||3==t?(i.children[0].getChildByName("shandian1").width=640-45*a,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao")):2==t&&(i.children[0].getChildByName("shandian1").width=860-65*a,i.children[0].getComponent(cc.Animation).play("hupaidiantexiao"))},display_return_hall:function(){this._return_hall.active=!0},hide_return_hall:function(){this._return_hall.active=!1},onBtn_return_hall:function(){this._return_hall.active=!1,setTimeout(function(){cc.vv.net.send("exit_room")},100)},btn_renshu:function(){cc.vv.net.send("game_check_renshu")},btn_chongzhi:function(){this.display_discountRecharge()},guangbi_waitRenshu:function(){for(var e=0;e<this._waitRenshu.length;e++)this._waitRenshu[e].getChildByName("renshu").active=!1,this._waitRenshu[e].getChildByName("chongzhi").active=!1},HTTP_pay:function(e,t){cc.vv.anysdkMgr.HTTP_pay(t)},hallIntroduceExplain:function(){for(n=0;n<this._introduceExplain.children.length;n++)this._introduceExplain.children[n].active=!1;for(var e=this._Help.getChildByName("leixingxuanze"),t=0,n=0;n<e.childrenCount;++n)if(null!=(c=e.children[n].getComponent("RadioButton"))&&c.checked){t=n;break}for(var i=this._Help.getChildByName("leixing_ruleandsettlement"),a=0,n=0;n<i.childrenCount;++n){var c=i.children[n].getComponent("RadioButton");if(null!=c&&c.checked){a=n;break}}0==t?0==a?this._introduceExplain.children[0].active=!0:1==a&&(this._introduceExplain.children[3].active=!0):1==t?0==a?this._introduceExplain.children[1].active=!0:1==a&&(this._introduceExplain.children[4].active=!0):2==t&&(0==a?this._introduceExplain.children[2].active=!0:1==a&&(this._introduceExplain.children[5].active=!0))},onSecuritySettingPrompt:function(e){var t=cc.find("Canvas/prompt");if(t&&(t.getChildByName("promptLabel").getComponent(cc.Label).string=e,!t.active)){var n=cc.scaleTo(.2,1.5,1.5),i=cc.scaleTo(.2,1.2,1.2),a=cc.scaleTo(.1,1,1),c=cc.sequence(n,i,a);t.active=!0,t.runAction(c),setTimeout(function(){t.active=!1},2e3)}},onDestroy:function(){console.log("onDestroy"),cc.vv&&cc.vv.gameNetMgr.clear()}}),cc._RF.pop()},{}],MJRoom:[function(e,t,n){"use strict";cc._RF.push(t,"921dfQJZddJ+5GFUXqxmMmT","MJRoom"),cc.Class({extends:cc.Component,properties:{lblRoomNo:{default:null,type:cc.Label},_seats:[],_seats2:[],_timeLabel:null,_voiceMsgQueue:[],_lastPlayingSeat:null,_playingSeat:null,_lastPlayTime:null,_btnxz:null,_gamebtnxz:null,_wanfazhiyinLayer:null,_btnDispress:null,_btnExit:null,_btnWeichat:null,_btnrd:null,_netHeartbeat:null,_signalLayer:null,_signalLayerSprite:null,_signalLayerLabel:null,_signalTimeStart:0,_signalTimeMiddle:0,_SendHeartNum:0,_battery:null,__batteryStatus:null,__batteryContent:null,_BatteryRefreshTime:null,_btn_bg_subordinate:null},onLoad:function(){console.log("开始加载 MJRoom.js"),this.ANDROID_API="com/yueyou/gamecs/WXAPI",null!=cc.vv&&(cc.vv.MJRoom=this,this.initView(),this.initSeats(),this.initEventHandlers(),cc.vv.replayMgr.isReplay(),this.rotate(),console.log("开始加载 MJRoom.js"))},initView:function(){for(var e=this.node.getChildByName("prepare").getChildByName("seats"),t=0;t<e.children.length;++t)this._seats.push(e.children[t].getComponent("Seat"));this.refreshBtns();for(var n=this.node.getChildByName("game"),i=["myself","right","up","left"],t=0;t<i.length;++t){var a=n.getChildByName(i[t]).getChildByName("seat");a.getComponent("Seat").onLoad(),this._seats2.push(a.getComponent("Seat"))}this._signalLayer=this.node.getChildByName("signal"),this._signalLayerSprite=this._signalLayer.getChildByName("sprite").getComponent(cc.Sprite),this._signalLayerLabel=this._signalLayer.getChildByName("label").getComponent(cc.Label);var c=new Date;this._BatteryRefreshTime=c.getTime(),this._battery=this.node.getChildByName("battery"),this._batteryStatus=this._battery.getChildByName("status"),this._batteryContent=this._battery.getChildByName("content").getComponent(cc.Sprite),this._gamebtnxz=cc.find("Canvas/btn_gd"),this._btn_bg_subordinate=cc.find("Canvas/btn_bg_subordinate"),this._gamebtnxz&&cc.vv.utils.addClickEvent(this._gamebtnxz,this.node,"MJRoom","ongameBtnbtngdClicked");for(var o=cc.find("Canvas/typeTitle"),t=0;t<o.children.length;++t)o.children[t].active=!1;if(cc.vv.gameNetMgr.conf){var s=cc.vv.gameNetMgr.conf.type;null!=s&&""!=s||(s=""),o.getChildByName(s).active=!0}},onBtnbtngdClicked:function(){var e=this._btngd.getChildByName("bg");e.active=!e.active,1==e.active&&setTimeout(function(){e.active=!1},4e3)},ongameBtnbtngdClicked:function(){this._btn_bg_subordinate.active=!this._btn_bg_subordinate.active;this._btn_bg_subordinate.active},ongameBtnbtn_gd_guanbiClicked:function(){},refreshBtns:function(){cc.vv.gameNetMgr.numOfGames},hideBtns:function(){for(var e=cc.find("Canvas/prepare/seats"),t=0;t<e.childrenCount;t++)e.children[t].getChildByName("ready").active=!1},initEventHandlers:function(){var e=this;this.node.on("new_user",function(t){e.initSingleSeat(t.detail)}),this.node.on("user_state_changed",function(t){e.initSingleSeat(t.detail)}),this.node.on("game_begin",function(t){e.refreshBtns(),e.initSeats()}),this.node.on("game_num",function(t){e.refreshBtns()}),this.node.on("voice_msg",function(t){var t=t.detail;e._voiceMsgQueue.push(t),e.playVoice()}),this.node.on("chat_push",function(t){if(cc.vv.chat._tanmu_kaiguan){var t=t.detail,n=cc.vv.gameNetMgr.getSeatIndexByID(t.sender),i=null;i=cc.vv.gameNetMgr.getLocalIndex(n),e.node.getChildByName("prepare").active?e._seats[i].chat(t.content):e._seats2[i].chat(t.content),cc.vv.chat.chatRecord_display(1,t.content,t.sender)}}),this.node.on("quick_chat_push",function(t){if(cc.vv.chat._tanmu_kaiguan){var t=t.detail,n=cc.vv.gameNetMgr.getSeatIndexByID(t.sender),i=null;i=cc.vv.gameNetMgr.getLocalIndex(n);var a=t.content,c=cc.vv.chat.getQuickChatInfo(a);e.node.getChildByName("prepare").active?e._seats[i].chat(c.content):e._seats2[i].chat(c.content);var o="";1==cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex].sex?o+="effect/xlch/woman/xlch_girl_chat_txt"+c.sound+cc.vv.SuffixName:o+="effect/xlch/man/xlch_boy_chat"+c.sound+cc.vv.SuffixName,cc.vv.audioMgr.playSFX(o),cc.vv.chat.chatRecord_display(1,c.content,t.sender)}}),this.node.on("emoji_push",function(t){if(cc.vv.chat._tanmu_kaiguan){var t=t.detail,n=cc.vv.gameNetMgr.getSeatIndexByID(t.sender),i=null;i=cc.vv.gameNetMgr.getLocalIndex(n),console.log(t),e.node.getChildByName("prepare").active?e._seats[i].emoji(t.content):e._seats2[i].emoji(t.content),cc.vv.chat.chatRecord_display(2,t.content,t.sender)}})},initSeats:function(){for(var e=cc.vv.gameNetMgr.seats,t=0;t<e.length;++t)this.initSingleSeat(e[t])},initSingleSeat:function(e){var t=cc.vv.gameNetMgr.getLocalIndex(e.seatindex);console.log("isOffline:"+!1),this._seats2[t].setInfo(e.name,e.score),this._seats2[t].setID(e.userid,e.heading),this._seats2[t].voiceMsg(!1),this._seats2[t].setOffline(!1)},onBtnSettingsClicked:function(){cc.vv.popupMgr.showSettings()},onBtnBackClicked:function(){cc.vv.alert.show("","返回大厅房间仍会保留，快去邀请好友来玩吧！",function(){cc.director.loadScene("hall")},!0)},onBtnrdClicked:function(){cc.vv.net.send("ready"),this._btnrd.active=!1},onBtnWeichatClicked:function(){var e="";"jl_dch_chch"==cc.vv.gameNetMgr.conf.type&&(e=cc.vv.gameNetMgr.getwanfaChangchunMJ()),cc.vv.anysdkMgr.share("大呲花麻将","房号:【"+cc.vv.gameNetMgr.roomId+"】 玩法:"+e+"速度来玩，点击下载游戏。")},onBtnDissolveClicked:function(){var e="";e=0==cc.vv.gameNetMgr.numOfGames?"解散房间不扣钻石，是否确定解散？":"是否确定解散？",cc.vv.alert.show("",e,function(){cc.vv.net.send("dismiss_request")},!0)},onBtnExit:function(){cc.vv.net.send("dismiss_request")},PlayMusicFaPai:function(){},playVoice:function(){if(null==this._playingSeat&&this._voiceMsgQueue.length){console.log("playVoice2");var e=this._voiceMsgQueue.shift(),t=cc.vv.gameNetMgr.getSeatIndexByID(e.sender),n=-1;n="kwx"==cc.vv.gameNetMgr.conf.type.substring(0,3)?cc.vv.gameNetMgr.getLocalIndexKWX(t):cc.vv.gameNetMgr.getLocalIndex(t),this._playingSeat=n,this._seats[n].voiceMsg(!0),this._seats2[n].voiceMsg(!0);var i=JSON.parse(e.content);console.log("msginfo length receive = "+i.msg.length),cc.vv.voiceMgr.writeVoice("voicemsg.amr",i.msg),cc.vv.voiceMgr.play("voicemsg.amr"),this._lastPlayTime=Date.now()+i.time}},update:function(e){var t=(n=new Date).getTime();if(t-this._BatteryRefreshTime>=5e3&&(this.ShowBattery(),this._BatteryRefreshTime=t),null!=this._lastPlayTime?Date.now()>this._lastPlayTime+200&&(this.onPlayerOver(),this._lastPlayTime=null):this.playVoice(),this._IsOpenHeartBeat&&++this._HeartBeatEndTime-this._HeartBeatOpenTime>=300){try{cc.vv.net.send("hb_data")}catch(e){cc.vv.MJRoom.closeHeartbeat()}var n=new Date;this._signalTimeStart=n.getTime(),++this._SendHeartNum>=3&&(this._SendHeartNum=0,this.ShowSignal(!1),cc.vv.Reconnect.DisconnectReConnect()),this._HeartBeatOpenTime=this._HeartBeatEndTime}},ShowBattery:function(){var e=-1,t=-1;try{e=cc.vv.anysdkMgr.getBattery(),t=cc.vv.anysdkMgr.getBatteryState()}catch(e){}null!=cc.vv.MJRoom._batteryContent&&(e<=20?cc.vv.MJRoom._batteryContent.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/Battery20.png")):e<=40?cc.vv.MJRoom._batteryContent.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/Battery40.png")):e<=60?cc.vv.MJRoom._batteryContent.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/Battery60.png")):e<=80?cc.vv.MJRoom._batteryContent.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/Battery80.png")):cc.vv.MJRoom._batteryContent.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/Battery100.png")),null!=cc.vv.MJRoom._batteryStatus&&(cc.vv.MJRoom._batteryStatus.active=1===t))},onGameSignal:function(){if(!cc.vv.replayMgr.isReplay()){cc.sys.isNative&&this.ShowSignal(!0,80);var e=new Date;this._HeartBeatOpenTime=e.getTime(),this._HeartBeatEndTime=e.getTime(),this._IsOpenHeartBeat=!0,this._SendHeartNum=0}},closeHeartbeat:function(){this._SendHeartNum=0,this._IsOpenHeartBeat=!1,this._HeartBeatOpenTime=0,this._HeartBeatEndTime=0,this.ShowSignal(!1)},ShowSignal:function(e){if(cc.vv.MJRoom._signalLayerSprite){if(!e)return cc.vv.MJRoom._signalLayerSprite.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/signal4.png")),void(cc.vv.MJRoom._signalLayerLabel.string="");var t=cc.vv.MJRoom._signalTimeMiddle-cc.vv.MJRoom._signalTimeStart;t>500?(cc.vv.MJRoom._signalLayerSprite.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/signal3.png")),cc.vv.MJRoom._signalLayerLabel.node.color=new cc.Color(255,0,0)):t>200?(cc.vv.MJRoom._signalLayerSprite.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/signal2.png")),cc.vv.MJRoom._signalLayerLabel.node.color=new cc.Color(255,255,0)):(cc.vv.MJRoom._signalLayerSprite.spriteFrame.setTexture(cc.url.raw("resources/textures/images/paizhuo/signal1.png")),cc.vv.MJRoom._signalLayerLabel.node.color=new cc.Color(0,255,0)),cc.vv.MJRoom._signalLayerLabel.string=t+"ms"}},onPlayerOver:function(){cc.vv.audioMgr.resumeAll(),console.log("onPlayCallback:"+this._playingSeat);var e=this._playingSeat;this._playingSeat=null,this._seats[e].voiceMsg(!1),this._seats2[e].voiceMsg(!1)},onDestroy:function(){cc.vv.voiceMgr.stop()},ShowNodeTimeout:function(e,t){e.active=!0,setTimeout(function(){e.active=!1},t)},fjwfLabel:function(){this._wanfazhiyinLayer.getChildByName("wanfaLabel").getComponent(cc.Label);var e=this._wanfazhiyinLayer.getChildByName("jushuLabel").getComponent(cc.Label),t=this._wanfazhiyinLayer.getChildByName("moshiLabel").getComponent(cc.Label),n=this.node.getChildByName("game").getChildByName("moshiLabel").getComponent(cc.Label),i=cc.vv.gameNetMgr.conf;if(i){i.type,e.string=i.quanshu+"圈";var a="";0==i.suanfen?a+="一分算法":1==i.zhifu&&(a+="335分算法"),0==i.fengdan?a+="、三风蛋":1==i.zhifu&&(a+="、四风蛋"),i.xiaojifeidan&&(a+="、小鸡飞蛋"),i.bukepinghu&&(a+="、不可平胡"),i.keduanmen&&(a+="、可断门"),i.zhandan&&(a+="、攒蛋"),i.dianpaopeifu&&(a+="、点炮包三家"),i.zhanli&&(a+="、下蛋算站立"),t.string=a,n.string="【长春麻将】"+a}},ReplaceSingletonSpriteFrame:function(e,t){null!=e&&cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){e||(t.spriteFrame=n)})},rotate:function(){if(-1!=cc.vv.gameNetMgr.button){var e=cc.find("Canvas/game/arrow"),t=cc.vv.gameNetMgr.getLocalIndex(cc.vv.gameNetMgr.button),n=cc.vv.mahjongmgr.getSide(t);"left"==n&&(e.rotation=90,e.getChildByName("lblTime").rotation=-90),"up"==n&&(e.rotation=180,e.getChildByName("lblTime").rotation=-180),"right"==n&&(e.rotation=270,e.getChildByName("lblTime").rotation=-270),"myself"==n&&(e.rotation=0,e.getChildByName("lblTime").rotation=0)}},onwanfaBtn:function(){this._wanfazhiyinLayer.active=!0},onwanfaEnd:function(){this._wanfazhiyinLayer.active=!1}}),cc._RF.pop()},{}],MahjongMgr:[function(e,t,n){"use strict";cc._RF.push(t,"0ecea6X+IFIK5XFdJe38hXa","MahjongMgr");var i=[];cc.Class({extends:cc.Component,properties:{pengPrefabSelf:{default:null,type:cc.Prefab},pengPrefabLeft:{default:null,type:cc.Prefab},pilaiPrefabSelf:{default:null,type:cc.Prefab},pilaiPrefabLeft:{default:null,type:cc.Prefab},holdsEmpty:{default:[],type:[cc.SpriteFrame]},_sides:null,_pres:null,_foldPres:null},onLoad:function(){if(console.log("开始加载 MahjongMgr.js"),null!=cc.vv){this._sides=["myself","right","up","left"],this._pres=["M_","R_","B_","L_"],this._foldPres=["B_","R_","B_","L_"],cc.vv.mahjongmgr=this;for(e=1;e<10;++e)i.push("dot_"+e);for(e=1;e<10;++e)i.push("bamboo_"+e);for(var e=1;e<10;++e)i.push("character_"+e);console.log("加载完成 MahjongMgr.js")}},getMahjongSpriteByID:function(e){return 27==e?"red":29==e?"green":31==e?"white":33==e?"wind_east":37==e?"wind_west":35==e?"wind_south":39==e?"wind_north":i[e]},getMahjongType:function(e){return e>=0&&e<9?0:e>=9&&e<18?1:e>=18&&e<27?2:e>=27&&e<34?3:void 0},setSpriteFrameCustom:function(e,t){null!=e&&null!=t&&cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})},getSpriteFrameByMJID:function(e,t,n){if(null!=n){var i=this.getMahjongSpriteByID(n);i=t+i;var a=null;"M_"==t?a="textures/MJ/my/"+i:"B_"==t?a="textures/MJ/bottom/"+i:"L_"==t?a="textures/MJ/left/"+i:"R_"==t&&(a="textures/MJ/right/"+i),null!=a&&cc.loader.loadRes(a,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})}},getSpriteFrameScore:function(e,t){if(null!=t){for(var n=0;n<e.childrenCount;n++)e.children[n].getComponent(cc.Sprite).spriteFrame=null;var i="textures/digital/",a="",c=e.getChildByName("addAndsub").getComponent(cc.Sprite);c.SpriteFrame=null,t>0?(this.ReplaceSpriteFrame(i+"gold_num_add",c),a="gold_num_"):(this.ReplaceSpriteFrame(i+"gray_num_sub",c),a="gray_num_");var o=Math.floor(Math.abs(t%10)),s=Math.floor(Math.abs(t%100/10)),r=Math.floor(Math.abs(t%1e3/100)),l=Math.floor(Math.abs(t%1e4/1e3)),h=1;if(0!=l&&((g=e.getChildByName("num"+h).getComponent(cc.Sprite)).spriteFrame=null,this.ReplaceSpriteFrame(i+a+l,g),h++),0!=r&&((g=e.getChildByName("num"+h).getComponent(cc.Sprite)).spriteFrame=null,this.ReplaceSpriteFrame(i+a+r,g),h++),0!=s&&((g=e.getChildByName("num"+h).getComponent(cc.Sprite)).spriteFrame=null,this.ReplaceSpriteFrame(i+a+s,g),h++),0!=o){var g=e.getChildByName("num"+h).getComponent(cc.Sprite);g.spriteFrame=null,this.ReplaceSpriteFrame(i+a+o,g)}}},ReplaceSpriteFrame:function(e,t){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){e||(t.spriteFrame=n)})},getBuFenLiangPaiSpriteFrameByMJID:function(e,t,n){var i=t+"mj_"+n,a=null;"left"!=n&&"right"!=n||(a="textures/MJ/qita/"+i),null!=a&&cc.loader.loadRes(a,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})},getSpriteFrameCHI:function(e,t,n){if(null!=n){var i="textures/MJ/my/"+t+n;null!=i&&cc.loader.loadRes(i,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})}},getAudioURLByMJID:function(e){var t=0;e>=0&&e<9?t=e+21:e>=9&&e<18?t=e+2:e>=18&&e<27?t=e-17:27==e?t=71:29==e?t=81:31==e?t=91:33==e?t=31:37==e?t=41:35==e?t=51:39==e&&(t=61),t<10&&(t="0"+t);var n=cc.vv.gameNetMgr.seats[cc.vv.gameNetMgr.seatIndex],i=Math.ceil(10*Math.random());return 1==n.sex?i>5?"effect/xlch/woman/xlch_card_"+t+"_girl_0"+cc.vv.SuffixName:"effect/xlch/woman/xlch_card_"+t+"_girl_1"+cc.vv.SuffixName:i>5?"effect/xlch/man/xlch_card_"+t+"_boy_0"+cc.vv.SuffixName:"effect/xlch/man/xlch_card_"+t+"_boy_1"+cc.vv.SuffixName},getEmptySpriteFrame:function(e,t){var n=null;"up"==t?n="textures/MJ/qita/e_mj_b_up":"myself"==t?n="textures/MJ/qita/e_mj_b_bottom":"left"==t?n="textures/MJ/qita/e_mj_b_left":"right"==t&&(n="textures/MJ/qita/e_mj_b_right"),null!=n&&cc.loader.loadRes(n,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})},getHoldsEmptySpriteFrame:function(e,t){var n=null;"up"==t?n="textures/MJ/qita/e_mj_up":"left"==t?n="textures/MJ/qita/e_mj_left":"right"==t&&(n="textures/MJ/qita/e_mj_right"),null!=n&&cc.loader.loadRes(n,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)})},sortMJ:function(e,t){var n=this;e.sort(function(e,i){if(t>=0){var a=n.getMahjongType(e),c=n.getMahjongType(i);if(a!=c){if(t==a)return 1;if(t==c)return-1}}return e-i})},sortPiLai:function(e,t,n){e.sort(function(e,i){return e==t?-1:i==t?1:e==n?-1:i==n?1:e-i})},sortKWX:function(e,t,n,i,a){e.sort(function(e,c){return t&&e==t?-1:t&&c==t?1:n&&e==n?-1:n&&c==n?1:i&&e==i?-1:i&&c==i?1:a&&e==a?-1:a&&c==a?1:e-c})},getSide:function(e){return this._sides[e]},getPre:function(e){return this._pres[e]},getFoldPre:function(e){return this._foldPres[e]}}),cc._RF.pop()},{}],Net:[function(e,t,n){"use strict";cc._RF.push(t,"b1cc9yRd15CXqFg0vTGKZUk","Net");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};null==window.io&&(window.io=e("socket-io"));cc.Class({extends:cc.Component,statics:{ip:"120.79.182.116:15101",sio:null,handlers:{},shuijishu:-1,addHandler:function(e,t){if(this.handlers[e])console.log("event:"+e+"' handler has been registered.");else{var n=function(n){if(console.log("Net socket io event:"+e),console.log("接收消息名："+e+" ; 内容："+n),"disconnect"!=e&&"string"==typeof n)try{n=JSON.parse(n),console.log("接收消息名-1："+e+" ; 内容："+n),"string"==typeof n&&(n=JSON.parse(n)),console.log("接收消息名-2："+e+" ; 内容："+n)}catch(e){}t(n)};this.handlers[e]=n,this.sio&&(console.log("register:function "+e),this.sio.on(e,n))}},connect:function(e,t){var n={reconnection:!1,timeout:3e3};this.sio=null,this.sio=window.io.connect(this.ip,n),this.sio.on("reconnect",function(){console.log("reconnection")});var i=this;this.sio.on("connect",function(){console.log("connect:开始连接"),console.log("connect:开始连接-IP:"+i.ip),i._Isdisconnect=!0,e(),e=function(){},t=function(){}}),this.sio.on("connect_error",function(){console.log("Net connect_error"),t(),e=function(){},t=function(){}}),this.sio.on("error",function(){console.log("Net error"),t(),e=function(){},t=function(){}});for(var a in this.handlers){var c=this.handlers[a];"function"==typeof c&&(console.log("register:function "+a),this.sio.on(a,c))}},send:function(e,t){if(this.sio&&this._Isdisconnect){null!=t&&"object"==(void 0===t?"undefined":i(t))&&(t=JSON.stringify(t));for(var n=(new Date).getTime(),a=Math.ceil(1e4*Math.random());this.shuijishu==a;)a=Math.ceil(1e4*Math.random());this.shuijishu=a,n+=a,null==t&&(t="");var c={t:n,v:cc.MD5(n+"12bhbh*12hb&*34bU82"+t),data:t};t=JSON.stringify(c),this.sio.emit(e,t),console.log("发送消息名："+e+" ; 内容："+t)}},close:function(){delete this.handlers,this.handlers={},delete this.sio,this.sio=null}}});cc._RF.pop()},{"socket-io":"socket-io"}],NoticeTip:[function(e,t,n){"use strict";cc._RF.push(t,"df61b4+FzFDvbpO5g8UNVIM","NoticeTip"),cc.Class({extends:cc.Component,properties:{_guohu:null,_info:null,_guohuTime:-1},onLoad:function(){console.log("开始加载 NoticeTip.js"),this._guohu=cc.find("Canvas/tip_notice"),this._guohu.active=!1,this._info=cc.find("Canvas/tip_notice/info").getComponent(cc.Label);this.node.on("push_notice",function(e){}),console.log("加载完成 NoticeTip.js")},update:function(e){this._guohuTime>0&&(this._guohuTime-=e,this._guohuTime<0&&(this._guohu.active=!1))}}),cc._RF.pop()},{}],OnBack:[function(e,t,n){"use strict";cc._RF.push(t,"6fd982Tyi5NOYJWt/fGY8Lj","OnBack"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("开始加载 OnBack.js");var e=this.node.getChildByName("btn_back");cc.vv.utils.addClickEvent(e,this.node,"OnBack","onBtnClicked"),console.log("加载完成 OnBack.js")},onBtnClicked:function(e){"btn_back"==e.target.name&&(this.node.active=!1)}}),cc._RF.pop()},{}],PengGangs:[function(e,t,n){"use strict";cc._RF.push(t,"279d9pNFGRB3rD/ngr1LIXQ","PengGangs"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(console.log("开始加载 PengGangs.js"),cc.vv){cc.vv.onpenggang=this,cc.vv.Peng_Gang_WhetherPlay=!1;var e=this.node.getChildByName("game").getChildByName("myself").getChildByName("penggangs"),t=cc.director.getVisibleSize().width/1920;e.scaleX*=t,e.scaleY*=t;var n=this;this.node.on("peng_notify",function(e){var e=e.detail.seatData;n.onPengGangChanged(e)}),this.node.on("gang_notify",function(e){var e=e.detail;n.onPengGangChanged(e.seatData)}),this.node.on("liangzan_notify",function(e){var e=e.detail;n.onPengGangChanged(e.seatData)}),this.node.on("chi_notify",function(e){console.log(e.detail),n.onPengGangChanged(e.detail.seatData)}),this.node.on("xiadan_notify",function(e){console.log(e.detail),n.onPengGangChanged(e.detail.seatData)}),this.node.on("budan_notify",function(e){console.log(e.detail),n.onPengGangChanged(e.detail.seatData)}),this.node.on("my_kou_notify",function(e){var e=e.detail;n.onPengGangChanged(e)}),this.node.on("other_kou_notify",function(e){var e=e.detail;n.onPengGangChanged(e)}),this.node.on("quxiaoliang_result",function(e){var e=e.detail;n.onPengGangChanged(e)}),this.node.on("game_begin",function(e){n.onGameBein()});var i=cc.vv.gameNetMgr.seats;for(var a in i)this.onPengGangChanged(i[a]);console.log("加载完成 PengGangs.js")}},onGameBein:function(){this.hideSide("myself"),this.hideSide("right"),this.hideSide("left"),this.hideSide("up")},hideSide:function(e){var t=this.node.getChildByName("game").getChildByName(e).getChildByName("penggangs");if(t)for(var n=0;n<t.childrenCount;++n)t.children[n].active=!1},onPengGangChanged:function(e){if(e.angangs&&e.diangangs&&e.wangangs&&e.pengs){var t=cc.vv.gameNetMgr.getLocalIndex(e.seatindex);"kwx"==cc.vv._Gametype.substring(0,3)&&(t=cc.vv.gameNetMgr.getLocalIndexKWX(e.seatindex));var n=cc.vv.mahjongmgr.getSide(t),i=cc.vv.mahjongmgr.getFoldPre(t),a=this.node.getChildByName("game").getChildByName(n);e.pigang=e.pigang?e.pigang:0,e.laigang=e.laigang?e.laigang:0,this.initPiLaiGangs(a,i,cc.vv.pi,0,e.pigang),this.initPiLaiGangs(a,i,cc.vv.lai,e.pigang,e.laigang);for(var c=0,o=a.getChildByName("penggangs"),s=0;s<o.childrenCount;++s)o.children[s].active=!1;for(var r=e.angangs,s=0;s<r.length;++s){h=r[s];this.initPengAndGangs(o,n,i,c,h,"angang"),c++}for(var r=e.diangangs,s=0;s<r.length;++s){h=r[s];this.initPengAndGangs(o,n,i,c,h,"diangang"),c++}for(var r=e.wangangs,s=0;s<r.length;++s){h=r[s];this.initPengAndGangs(o,n,i,c,h,"wangang"),c++}var l=e.pengs;if(l)for(s=0;s<l.length;++s){var h=l[s];this.initPengAndGangs(o,n,i,c,h,"peng"),c++}}},initPiLaiGangs:function(e,t,n,i,a){if(!(a<=0)){cc.vv.YpelGameJS._reconnection||(cc.vv.YpelGameJS.hidePiLaiGangLayer(),cc.vv.YpelGameJS._reconnection=!0);for(var c=e.getChildByName("PiLaiGangLayer"),o=c.getComponentsInChildren(cc.Sprite),s=0;s<a;++s){c.children[i+s].active=!0;var r=o[i+s];cc.vv.mahjongmgr.getSpriteFrameByMJID(r,t,n)}}},initPengAndGangs:function(e,t,n,i,a,c){var o=null,s=!1;e.childrenCount<=i?(o="left"==t||"right"==t?cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft):cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e.addChild(o),s=!0):(o=e.children[i]).active=!0,"left"==t?o.y=-45*i*3:"right"==t?(o.y=45*i*3,o.setLocalZOrder(-i)):o.x="myself"==t?125*i*3+10*i:-125*i*3,cc.vv.Peng_Gang_WhetherPlay&&s&&(o.getChildByName("PengGangTeXiao").active=!0,o.getChildByName("PengGangTeXiao").getComponent(cc.Animation).play("luopai"));for(var r=0;r<o.children.length;++r){var l=o.children[r].getComponent(cc.Sprite),h=o.children[r];if("PengGangTeXiao"!=l.node.name){if("gang"==l.node.name){var g="angang"==c||"diangang"==c||"wangang"==c||"dxnbgang"==c;l.node.active=g,"angang"==c&&"myself"!=t?cc.vv.mahjongmgr.getEmptySpriteFrame(l,t):cc.vv.mahjongmgr.getSpriteFrameByMJID(l,n,a)}else"angang"==c?cc.vv.mahjongmgr.getEmptySpriteFrame(l,t):cc.vv.mahjongmgr.getSpriteFrameByMJID(l,n,a);"gang"!=o.children[r].name&&(h.getChildByName("piTag").active=!1,h.getChildByName("laiTag").active=!1,h.getChildByName("updateZhang").active=!1,h.getChildByName("kouTag").active=!1)}}},initChi:function(e,t,n,i,a,c){var o=null;e.childrenCount<=i?(o="left"==t||"right"==t?cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft):cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e.addChild(o)):(o=e.children[i]).active=!0;var s=this.intzhangshu(i,e);"left"==t?o.y=-40*s:"right"==t?(s%3!=0&&(s-=1),o.y=40*s):"myself"==t?o.x=40*s+10*i:(s%3!=0&&(s-=1),o.x=-40*s);for(var r=0,l=0;l<o.children.length;++l){var h=o.children[l].getComponent(cc.Sprite),g=o.children[l];"fengDan"!=h.node.name?"gang"==h.node.name?h.node.active=!1:(g.getChildByName("piTag").active=!1,g.getChildByName("laiTag").active=!1,g.getChildByName("updateZhang").active=!1,cc.vv.mahjongmgr.getSpriteFrameByMJID(h,n,a[r++])):h.node.active=!1}},initXiaDan:function(e,t,n,i,a,c){var o=null;e.childrenCount<=i?(o="left"==t||"right"==t?cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft):cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf),e.addChild(o)):(o=e.children[i]).active=!0;var s=this.intzhangshu(i,e);"left"==t?o.y=-40*s:"right"==t?(s%3!=0&&(s-=1),o.y=40*s):"myself"==t?o.x=40*s+10*i:(s%3!=0&&(s-=1),o.x=-40*s);for(var r=0,l=0;l<o.children.length;++l){var h=o.children[l].getComponent(cc.Sprite),g=o.children[l];if("fengDan"==h.node.name&&a.length<4)h.node.active=!1;else if("gang"!=h.node.name){"fengDan"==h.node.name?(cc.vv.mahjongmgr.getSpriteFrameByMJID(h,n,a[r++].pai),h.node.active=!0):cc.vv.mahjongmgr.getSpriteFrameByMJID(h,n,a[r++].pai),"left"==t?(g.getChildByName("updateZhang").rotation=90,g.getChildByName("updateZhang").x=45,g.getChildByName("updateZhang").y=0):"right"==t?(g.getChildByName("updateZhang").rotation=270,g.getChildByName("updateZhang").x=-45,g.getChildByName("updateZhang").y=0):"myself"==t?(g.getChildByName("updateZhang").rotation=0,g.getChildByName("updateZhang").x=0,g.getChildByName("updateZhang").y=50):(g.getChildByName("updateZhang").rotation=0,g.getChildByName("updateZhang").x=0,g.getChildByName("updateZhang").y=-50),g.getChildByName("updateZhang").active=!0;for(var d=0;d<g.getChildByName("updateZhang").children.length;++d)d+2==a[r-1].count?g.getChildByName("updateZhang").children[d].active=!0:g.getChildByName("updateZhang").children[d].active=!1}else h.node.active=!1}},intzhangshu:function(e,t){for(var n=0,i=0;i<e;i++)for(var a=t.children[i],c=0;c<a.children.length;c++){var o=a.children[c].getComponent(cc.Sprite);o.node.active&&"gang"!=o.node.name&&n++}return n}}),cc._RF.pop()},{}],PopupMgr:[function(e,t,n){"use strict";cc._RF.push(t,"bc0d2VLgL1Avo166tHLsjCJ","PopupMgr"),cc.Class({extends:cc.Component,properties:{_popuproot:null,_settings:null,_dissolveNotice:null,_endTime:-1,_extraInfo:null,_noticeLabel:null,_jiesanBtn:null,_dengdaiBG:null,_btnAgree:null,_btnReject:null,_time:null},onLoad:function(){if(console.log("开始加载 PopupMgr.js"),null!=cc.vv){cc.vv.popupMgr=this,this._popuproot=cc.find("Canvas/popups"),this._settings=cc.find("Canvas/popups/settings"),this._dissolveNotice=cc.find("Canvas/popups/dissolve_notice"),this._noticeLabel=this._dissolveNotice.getChildByName("info").getComponent(cc.Label),this._time=this._dissolveNotice.getChildByName("time").getComponent(cc.Label),this._dengdaiBG=this._dissolveNotice.getChildByName("dengdaiBG"),this._btnAgree=this._dissolveNotice.getChildByName("btn_agree"),this._btnReject=this._dissolveNotice.getChildByName("btn_reject"),this._jiesanBtn=cc.find("Canvas/btn_bg_subordinate/btnBack"),this.addClickEvent(this._jiesanBtn,this.node,"PopupMgr","onBtnClicked"),this.closeAll(),this.addBtnHandler("settings/btn_close"),this.addBtnHandler("settings/btn_sqjsfj"),this.addBtnHandler("dissolve_notice/btn_agree"),this.addBtnHandler("dissolve_notice/btn_reject"),this.addBtnHandler("dissolve_notice/btn_ok");var e=this;this.node.on("dissolve_notice",function(t){var n=t.detail;e.showDissolveNotice(n)}),this.node.on("dissolve_cancel",function(t){e.closeAll()}),console.log("加载完成 PopupMgr.js")}},addBtnHandler:function(e){var t=cc.find("Canvas/popups/"+e);this.addClickEvent(t,this.node,"PopupMgr","onBtnClicked")},addClickEvent:function(e,t,n,i){var a=new cc.Component.EventHandler;a.target=t,a.component=n,a.handler=i,e.getComponent(cc.Button).clickEvents.push(a)},onBtnClicked:function(e){this.closeAll();var t=e.target.name;"btn_agree"==t?cc.vv.net.send("dismiss_respond",1):"btn_reject"==t?cc.vv.net.send("dismiss_respond",0):"btnBack"==t&&cc.vv.MJGame.display_return_hall()},closeAll:function(){this._popuproot.active=!1,this._settings.active=!1,this._dissolveNotice.active=!1},showSettings:function(){this.closeAll(),this._popuproot.active=!0,this._settings.active=!0},showDissolveRequest:function(){this.closeAll(),this._popuproot.active=!0},showDissolveNotice:function(e){this._endTime=Date.now()/1e3+e.time/1e3,this._extraInfo="";for(var t=0;t<cc.vv.gameNetMgr.seats.length;++t){var n=e.states[cc.vv.gameNetMgr.seats[t].userid],i=cc.vv.gameNetMgr.seats[t].name;n?""!=this._extraInfo?this._extraInfo+="\n[已同意] "+i:this._extraInfo+="[已同意] "+i:""!=this._extraInfo?this._extraInfo+="\n[待确认] "+i:this._extraInfo+="[待确认] "+i}this.closeAll(),this._popuproot.active=!0,this._dissolveNotice.active=!0,this._dengdaiBG.active=!1,this._btnAgree.active=!1,this._btnReject.active=!1,e.states[cc.vv.userMgr.userId]?this._dengdaiBG.active=!0:(this._btnAgree.active=!0,this._btnReject.active=!0)},update:function(e){if(this._endTime>0){var t=this._endTime-Date.now()/1e3;t<0&&(this._endTime=-1);var n=Math.floor(t/60),i=Math.ceil(t-60*n),a="";n>0?(a+=n+"分",this._time.string=a+i+"秒后房间将自动解散"):this._time.string=i>0?i+"秒后房间将自动解散":"房间将自动解散",this._noticeLabel.string=this._extraInfo}}}),cc._RF.pop()},{}],RadioButton:[function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"8d571y2U+9AiKntO+TSf0Fb","RadioButton");var a,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class((a={extends:cc.Component,properties:{target:cc.Node,sprite:cc.SpriteFrame,checkedSprite:cc.SpriteFrame,checked:!1,groupId:-1},onLoad:function(){if(console.log("开始加载 RadioButton.js"),null!=cc.vv){if(null==cc.vv.radiogroupmgr){var t=e("RadioGroupMgr");cc.vv.radiogroupmgr=new t,cc.vv.radiogroupmgr.init()}console.log(c(cc.vv.radiogroupmgr.add)),cc.vv.radiogroupmgr.add(this),cc.vv.RadioButton=this,this.refresh(),console.log("加载完成 RadioButton.js")}},refresh:function(){var e=this.target.getComponent(cc.Sprite);this.checked?e.spriteFrame=this.checkedSprite:e.spriteFrame=this.sprite},check:function(e){this.checked=e,this.refresh()},onClickedChangChun:function(){this.hideRoomArrDate(),this.IsHideESChooseLayer(!0),cc.vv.radiogroupmgr.check(this)},onClickedXZDD:function(){this.hideRoomArrDate(),this.IsHideXZDDChooseLayer(!0),cc.vv.radiogroupmgr.check(this)},onClickedXLCH:function(){this.hideRoomArrDate(),this.IsHideXLCHChooseLayer(!0),cc.vv.radiogroupmgr.check(this)},onClickedKWX:function(){this.IsHideKWXleixingxuanze(!0),cc.vv.radiogroupmgr.check(this)},IsHideKWXleixingxuanze:function(e){this.hideRoomArrDate();var t=cc.find("Canvas/CreateRoom"),n=t.getChildByName("KWXleixingxuanze");n.active=e;var i=this.KWXleixingCheckedWhere(n);0==i?this.Kwx_xiangyang(t,e):1==i?this.Kwx_shiyan(t,e):2==i?this.Kwx_suizhou(t,e):3==i?this.Kwx_xiaogan(t,e):4==i&&this.Kwx_tongyong(t,e)},hideRoomArrDate:function(){for(var e=cc.find("Canvas/CreateRoom"),t=0;t<e.childrenCount;t++)"btn_back"!=e.children[t].name&&"btn_ok"!=e.children[t].name&&"bg"!=e.children[t].name&&"leixingxuanze"!=e.children[t].name&&(e.children[t].active=!1)},KWXleixingCheckedWhere:function(e){for(var t=0;t<e.childrenCount;t++)if(e.children[t].getComponent("RadioButton").checked)return t},Kwx_xiangyang:function(e,t){var n=cc.sys.localStorage.getItem("playtype"),i=cc.sys.localStorage.getItem("gametype");e.getChildByName("creatroom10").active=t,e.getChildByName("KWXyouxifanshu").active=t;var a=cc.sys.localStorage.getItem("fanshu");cc.vv.createRoom._KWXyouxifanshu&&0==n&&0==i&&cc.vv.createRoom._KWXyouxifanshu[a]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXyouxifanshu[a]),e.getChildByName("creatroom20").active=t,e.getChildByName("KWXshujuxuanze").active=t;var c=cc.sys.localStorage.getItem("jushu");cc.vv.createRoom._KWXshujuxuanze&&0==n&&0==i&&cc.vv.createRoom._KWXshujuxuanze[c]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXshujuxuanze[c]),e.getChildByName("creatroom21").active=t,e.getChildByName("KWXfangkakouchu").active=t;var o=cc.sys.localStorage.getItem("zhifu");cc.vv.createRoom._KWX_fukuanfangshi&&0==n&&0==i&&cc.vv.createRoom._KWX_fukuanfangshi[o]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_fukuanfangshi[o]),e.getChildByName("creatroom22").active=t,e.getChildByName("KWXwanfapindao").active=t;var s=cc.sys.localStorage.getItem("wanfapindao");cc.vv.createRoom._KWXwanfapindao&&0==n&&0==i&&cc.vv.createRoom._KWXwanfapindao[s]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXwanfapindao[s]),e.getChildByName("KWXzimomaima").active=t;var r=cc.sys.localStorage.getItem("zimomaima");cc.vv.createRoom._KWXzimomaima&&0==n&&0==i&&r>=1&&cc.vv.createRoom._KWXzimomaima[r-1]&&(cc.vv.createRoom._KWXzimomaima[r-1].checked=!1,cc.vv.createRoom._KWXzimomaima[r-1].onClicked(),cc.vv.createRoom._KWXzimomaima[r-1].refresh()),e.getChildByName("KWXpaoqiamoba").active=t,"true"==cc.sys.localStorage.getItem("paoqiamoba")&&0==n&&0==i&&cc.vv.createRoom._KWXpaoqiamoba[0]&&(cc.vv.createRoom._KWXpaoqiamoba[0].checked=!0,cc.vv.createRoom._KWXpaoqiamoba[0].refresh())},Kwx_shiyan:function(e,t){var n=cc.sys.localStorage.getItem("playtype");e.getChildByName("creatroom10").active=t,e.getChildByName("KWX_SYyouxifanshu").active=t;var i=cc.sys.localStorage.getItem("fanshu");cc.vv.createRoom._KWX_SYfanshuxuanze&&1==n&&cc.vv.createRoom._KWX_SYfanshuxuanze[i]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_SYfanshuxuanze[i]),e.getChildByName("creatroom20").active=t,e.getChildByName("KWXshujuxuanze").active=t;var a=cc.sys.localStorage.getItem("jushu");cc.vv.createRoom._KWXshujuxuanze&&1==n&&cc.vv.createRoom._KWXshujuxuanze[a]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXshujuxuanze[a]),e.getChildByName("creatroom21").active=t,e.getChildByName("KWXfangkakouchu").active=t;var c=cc.sys.localStorage.getItem("zhifu");cc.vv.createRoom._KWX_fukuanfangshi&&1==n&&cc.vv.createRoom._KWX_fukuanfangshi[c]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_fukuanfangshi[c]),e.getChildByName("creatroom22").active=t,e.getChildByName("KWXwanfapindao").active=t;var o=cc.sys.localStorage.getItem("wanfapindao");cc.vv.createRoom._KWXwanfapindao&&1==n&&cc.vv.createRoom._KWXwanfapindao[o]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXwanfapindao[o]),e.getChildByName("KWXzimomaima").active=t;var s=cc.sys.localStorage.getItem("zimomaima");cc.vv.createRoom._KWXzimomaima&&1==n&&s>=1&&cc.vv.createRoom._KWXzimomaima[s-1]&&(cc.vv.createRoom._KWXzimomaima[s-1].checked=!1,cc.vv.createRoom._KWXzimomaima[s-1].onClicked(),cc.vv.createRoom._KWXzimomaima[s-1].refresh()),e.getChildByName("KWXshanglouchajiao").active=t,"true"==cc.sys.localStorage.getItem("chajiao")&&1==n&&cc.vv.createRoom._KWXshanglouchajiao[1]&&(cc.vv.createRoom._KWXshanglouchajiao[1].checked=!0,cc.vv.createRoom._KWXshanglouchajiao[1].refresh())},Kwx_suizhou:function(e,t){var n=cc.sys.localStorage.getItem("playtype");e.getChildByName("creatroom10").active=t,e.getChildByName("KWX_SZyouxifanshu").active=t;var i=cc.sys.localStorage.getItem("fanshu");cc.vv.createRoom._KWX_SZyouxifanshu&&2==n&&cc.vv.createRoom._KWX_SZyouxifanshu[i]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_SZyouxifanshu[i]),e.getChildByName("creatroom20").active=t,e.getChildByName("KWXshujuxuanze").active=t;var a=cc.sys.localStorage.getItem("jushu");cc.vv.createRoom._KWXshujuxuanze&&2==n&&cc.vv.createRoom._KWXshujuxuanze[a]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXshujuxuanze[a]),e.getChildByName("creatroom21").active=t,e.getChildByName("KWXfangkakouchu").active=t;var c=cc.sys.localStorage.getItem("zhifu");cc.vv.createRoom._KWX_fukuanfangshi&&2==n&&cc.vv.createRoom._KWX_fukuanfangshi[c]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_fukuanfangshi[c]),e.getChildByName("creatroom22").active=t,e.getChildByName("KWXzimomaima").active=t;var o=cc.sys.localStorage.getItem("zimomaima");cc.vv.createRoom._KWXzimomaima&&2==n&&o>=1&&cc.vv.createRoom._KWXzimomaima[o-1]&&(cc.vv.createRoom._KWXzimomaima[o-1].checked=!1,cc.vv.createRoom._KWXzimomaima[o-1].onClicked(),cc.vv.createRoom._KWXzimomaima[o-1].refresh()),e.getChildByName("KWX_SZbufenliang").active=t;var s=cc.sys.localStorage.getItem("bufenliang");cc.log("bufenglaing"+s),"true"==s&&2==n&&(cc.log("bufenglaing  into"+s),cc.vv.createRoom._KWX_SZbufenliang[0]&&(cc.vv.createRoom._KWX_SZbufenliang[0].checked=!0,cc.vv.createRoom._KWX_SZbufenliang[0].refresh()))},Kwx_xiaogan:function(e,t){var n=cc.sys.localStorage.getItem("playtype");e.getChildByName("creatroom10").active=t,e.getChildByName("KWX_XGyouxifanshu").active=t;var i=cc.sys.localStorage.getItem("fanshu");cc.vv.createRoom._KWX_XGyouxifanshu&&3==n&&cc.vv.createRoom._KWX_XGyouxifanshu[i]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_XGyouxifanshu[i]),e.getChildByName("creatroom20").active=t,e.getChildByName("KWXshujuxuanze").active=t;var a=cc.sys.localStorage.getItem("jushu");cc.vv.createRoom._KWXshujuxuanze&&3==n&&cc.vv.createRoom._KWXshujuxuanze[a]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWXshujuxuanze[a]),e.getChildByName("creatroom21").active=t,e.getChildByName("KWXfangkakouchu").active=t;var c=cc.sys.localStorage.getItem("zhifu");cc.vv.createRoom._KWX_fukuanfangshi&&3==n&&cc.vv.createRoom._KWX_fukuanfangshi[c]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_fukuanfangshi[c]),e.getChildByName("creatroom22").active=t,e.getChildByName("KWXzimomaima").active=t;var o=cc.sys.localStorage.getItem("zimomaima");cc.vv.createRoom._KWXzimomaima&&3==n&&o>=1&&cc.vv.createRoom._KWXzimomaima[o-1]&&(cc.vv.createRoom._KWXzimomaima[o-1].checked=!1,cc.vv.createRoom._KWXzimomaima[o-1].onClicked(),cc.vv.createRoom._KWXzimomaima[o-1].refresh()),e.getChildByName("KWX_XGshukan").active=t,"true"==cc.sys.localStorage.getItem("shukan")&&3==n?cc.vv.createRoom._KWX_XGshukan[0]&&(cc.vv.createRoom._KWX_XGshukan[0].checked=!0,cc.vv.createRoom._KWX_XGshukan[0].refresh()):cc.vv.createRoom._KWX_XGshukan[0]&&(cc.vv.createRoom._KWX_XGshukan[0].checked=!1,cc.vv.createRoom._KWX_XGshukan[0].refresh()),"true"==cc.sys.localStorage.getItem("buliangxy12")&&3==n?cc.vv.createRoom._KWX_XGshukan[1]&&(cc.vv.createRoom._KWX_XGshukan[1].checked=!0,cc.vv.createRoom._KWX_XGshukan[1].refresh()):cc.vv.createRoom._KWX_XGshukan[1]&&(cc.vv.createRoom._KWX_XGshukan[1].checked=!1,cc.vv.createRoom._KWX_XGshukan[1].refresh())},Kwx_tongyong:function(e,t){var n=cc.sys.localStorage.getItem("playtype");e.getChildByName("creatroom10").active=t,e.getChildByName("KWX_TYyouxifanshu").active=t;var i=cc.sys.localStorage.getItem("fanshu");cc.vv.createRoom._KWX_TYyouxifanshu&&4==n&&cc.vv.createRoom._KWX_TYyouxifanshu[i]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_TYyouxifanshu[i]),e.getChildByName("creatroom24").active=t,e.getChildByName("KWX_TYshujuxuanze").active=t;var a=cc.sys.localStorage.getItem("jushu");cc.vv.createRoom._KWX_TYshujuxuanze&&4==n&&cc.vv.createRoom._KWX_TYshujuxuanze[a]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_TYshujuxuanze[a]),e.getChildByName("creatroom25").active=t,e.getChildByName("KWX_TYfangkakouchu").active=t;var c=cc.sys.localStorage.getItem("zhifu");cc.vv.createRoom._KWX_TYzhifufangshi&&4==n&&cc.vv.createRoom._KWX_TYzhifufangshi[c]&&cc.vv.radiogroupmgr.check(cc.vv.createRoom._KWX_TYzhifufangshi[c])},IsHideESChooseLayer:function(e){var t=cc.find("Canvas/CreateRoom");t.getChildByName("jushu").active=e,t.getChildByName("dchmj_kaifangmoshi").active=e,t.getChildByName("suanfen").active=e,t.getChildByName("dchmj_kaifangsuanfen").active=e,t.getChildByName("wanfa").active=e,t.getChildByName("dchmj_wanfaxuanze").active=e},IsHideXLCHChooseLayer:function(e){var t=cc.find("Canvas/CreateRoom");t.getChildByName("yichangwanfa").active=e,t.getChildByName("creatroom9").active=e,t.getChildByName("xuanzejushu").active=e,t.getChildByName("creatroom23").active=e,t.getChildByName("daipiaoxuanze").active=e,t.getChildByName("creatroom21").active=e,t.getChildByName("fangkakouchu").active=e},IsHideXZDDChooseLayer:function(e){var t=cc.find("Canvas/CreateRoom");t.getChildByName("creatroom9").active=e,t.getChildByName("xuanzejushu").active=e,t.getChildByName("creatroom19").active=e,t.getChildByName("zuidafanshu").active=e,t.getChildByName("creatroom15").active=e,t.getChildByName("wanfaxuanze").active=e,t.getChildByName("zimojiacheng").active=e,t.getChildByName("dianganghua").active=e},onClicked:function(e,t){cc.vv.radiogroupmgr.check(this),cc.vv.chat.onTabClicked(e)},onClickedES:function(){cc.vv.radiogroupmgr.check(this)},onDestroy:function(){cc.vv&&cc.vv.radiogroupmgr&&cc.vv.radiogroupmgr.del(this)},hideHelpLabelArr:function(){for(var e=cc.find("Canvas/help/PopupScene3/LabelArr"),t=0;t<e.childrenCount;t++)e.children[t].active=!1},onClickedHelp:function(e,t){this.hideHelpLabelArr(),cc.vv.radiogroupmgr.check(this),"kwxbtn"==t?this.wanfa_kwx():"xlchbtn"==t?this.wanfa_xlch():"ypelbtn"==t&&this.wanfa_ypel()},wanfa_kwx:function(){cc.find("Canvas/help/PopupScene3/LabelArr/CC_wanfa").active=!0},wanfa_xlch:function(){cc.find("Canvas/help/PopupScene3/LabelArr/XLCH_wanfa").active=!0},wanfa_xzdd:function(){cc.find("Canvas/help/PopupScene3/LabelArr/XZDD_wanfa").active=!0},wanfa_ypel:function(){cc.find("Canvas/help/PopupScene3/LabelArr/YPEL_wanfa").active=!0},onClickedDaiLi:function(){cc.vv.radiogroupmgr.check(this),cc.vv.hall._tuijianmaLayer.active=!1,cc.vv.hall._dlrjieshaoLayer.active=!1,cc.vv.hall._BindSucceed.active=!1,cc.vv.hall._shojiBindSucceed.active=!1,cc.vv.hall._sjbdfLayer.active=!1,cc.vv.hall._yCodeBindSucceed.active=!1,cc.vv.hall._yCodeLayer.active=!1,cc.vv.hall._yCodePaySucceed.active=!1,"bdtjm_btn"==this.node.name?cc.vv.userMgr.code?cc.vv.hall._BindSucceed.active=!0:cc.vv.hall._tuijianmaLayer.active=!0:"dlrjs_btn"==this.node.name?cc.vv.hall._dlrjieshaoLayer.active=!0:"bdsj_btn"==this.node.name?cc.vv.userMgr.phone?cc.vv.hall._shojiBindSucceed.active=!0:(cc.vv.hall._lebButton=111,cc.vv.hall._sjbdfLayer.active=!0):"ym_btn"==this.node.name&&(cc.vv.userMgr.myYcode?cc.vv.hall._yCodePaySucceed.active=!0:cc.vv.userMgr.Yma?cc.vv.hall._yCodeBindSucceed.active=!0:cc.vv.hall._yCodeLayer.active=!0)},onClickedsys:function(){cc.vv.radiogroupmgr.check(this),cc.vv.hall._SystemNoticeLayer.active=!1,cc.vv.hall._ActivityNoticeLayer.active=!1,"sys_btn"==this.node.name?cc.vv.hall._SystemNoticeLayer.active=!0:"act_btn"==this.node.name&&(cc.vv.hall._ActivityNoticeLayer.active=!0)},onTaskReward:function(){cc.vv.radiogroupmgr.check(this),cc.vv.hall._everyDay_info.active=!1,cc.vv.hall._achievement_info.active=!1,"everyday_btn"==this.node.name?cc.vv.hall._everyDay_info.active=!0:"achievement_btn"==this.node.name&&(cc.vv.hall._achievement_info.active=!0)},onClickedRankingArr:function(){cc.vv.radiogroupmgr.check(this),cc.vv.history.RefreshRankingArrBtn()},onClickedShoppingMall:function(){cc.vv.radiogroupmgr.check(this),cc.vv.hall._BuyGoldCoins.active=!1,cc.vv.hall._ExchangeProps.active=!1,"gmjb_btn"==this.node.name?cc.vv.hall._BuyGoldCoins.active=!0:"dhdj_btn"==this.node.name&&(cc.vv.hall._ExchangeProps.active=!0)},onClickedDiscountRecharge:function(){cc.vv.hall._diamonds.active=!1,cc.vv.hall._currency.active=!1,"czjb_btn"==this.node.name?cc.vv.hall._diamonds.active=!0:"cjzs_btn"==this.node.name&&(cc.vv.hall._currency.active=!0),cc.vv.radiogroupmgr.check(this)}},i(a,"onClickedHelp",function(){cc.vv.radiogroupmgr.check(this),cc.vv.hall.hallIntroduceExplain()}),i(a,"onClickedMJHelp",function(){cc.vv.radiogroupmgr.check(this),cc.vv.MJGame.hallIntroduceExplain()}),i(a,"onClickedSecuritySetting",function(){cc.vv.userMgr._phone||"xgmm_btn"!=this.node.name?(cc.vv.hall._bindMobilePhone.active=!1,cc.vv.hall._bindingCompleted.active=!1,cc.vv.hall._modifyPassword.active=!1,cc.vv.hall._switchAccount.active=!1,"bdsj_btn"==this.node.name?cc.vv.userMgr._phone?(cc.vv.hall._bindingCompleted.getChildByName("phoneNumber").getComponent(cc.Label).string="绑定手机号码     "+cc.vv.userMgr._phone,cc.vv.hall._bindingCompleted.active=!0):cc.vv.hall._bindMobilePhone.active=!0:"xgmm_btn"==this.node.name?(cc.vv.hall._modifyPassword.getChildByName("oldPasswordEditBox").getComponent(cc.EditBox).string="",cc.vv.hall._modifyPassword.getChildByName("newPasswordEditBox").getComponent(cc.EditBox).string="",cc.vv.hall._modifyPassword.getChildByName("confirmationPasswordEditBox").getComponent(cc.EditBox).string="",cc.vv.hall._modifyPassword.active=!0):"zhqh_btn"==this.node.name&&(cc.vv.hall._switchAccount.getChildByName("phoneEditBox").getComponent(cc.EditBox).string="",cc.vv.hall._switchAccount.getChildByName("passwordEditBox").getComponent(cc.EditBox).string="",cc.vv.hall._switchAccount.active=!0),cc.vv.radiogroupmgr.check(this)):cc.vv.hall.onSecuritySettingPrompt("请先绑定手机")}),i(a,"onactivePageReward",function(){cc.vv.hall._mrsbffl_Interface.active=!1,cc.vv.hall._yjldzn_Interface.active=!1,"mrsbffl_btn"==this.node.name?cc.vv.hall._mrsbffl_Interface.active=!0:"jldzn_btn"==this.node.name&&(cc.vv.hall._yjldzn_Interface.active=!0),cc.vv.radiogroupmgr.check(this)}),i(a,"onClic_CaiFu_ShoYi",function(){cc.vv.history._ShoYiNotice.active=!1,cc.vv.history._CaiFuNotice.active=!1,"btn_caifu"==this.node.name?cc.vv.history._CaiFuNotice.active=!0:"btn_shoyi"==this.node.name&&(cc.vv.history._ShoYiNotice.active=!0),cc.vv.radiogroupmgr.check(this)}),i(a,"onClicked_sex_xz",function(){cc.vv.radiogroupmgr.check(this)}),a)),cc._RF.pop()},{RadioGroupMgr:"RadioGroupMgr"}],RadioGroupMgr:[function(e,t,n){"use strict";cc._RF.push(t,"824eapeRYNKY4RJzg2Z4YA2","RadioGroupMgr"),cc.Class({extends:cc.Component,properties:{_groups:null},init:function(){this._groups={}},add:function(e){var t=e.groupId,n=this._groups[t];null==n&&(n=[],this._groups[t]=n),n.push(e)},del:function(e){var t=e.groupId,n=this._groups[t];if(null!=n){var i=n.indexOf(e);-1!=i&&n.splice(i,1),0==n.length&&delete this._groups[t]}},check:function(e){var t=e.groupId,n=this._groups[t];if(null!=n)for(var i=0;i<n.length;++i){var a=n[i];a==e?a.check(!0):a.check(!1)}}}),cc._RF.pop()},{}],ReConnect:[function(e,t,n){"use strict";cc._RF.push(t,"7f553G0boRH6KrTE7wACaXx","ReConnect"),cc.Class({extends:cc.Component,properties:{_reconnect:null,_GameDisconnect:null,_IsDisconnect:!1,_DisconnectNum:0,_SocketCheck:!1,_startTime:0,_endTime:0},onLoad:function(){console.log("开始加载 ReConnect.js"),cc.vv.Reconnect=this,this._reconnect=cc.find("Canvas/reconnect"),this._GameDisconnect=cc.find("Canvas/GameDisconnect");var e=cc.find("Canvas/reconnect/btn_ok");e&&cc.vv.utils.addClickEvent(e,this.node,"ReConnect","onBtnOK"),this.resetSocket(),console.log("加载完成 ReConnect.js")},DisconnectReConnect:function(){console.log("断开连接------DisconnectReConnect");cc.vv.MJRoom.closeHeartbeat(),cc.vv.net.close(),this.openSocket()},openSocket:function(){this._IsDisconnect=!0;var e=new Date;this._startTime=e.getTime(),this._endTime=e.getTime(),this._DisconnectNum=0,this._SocketCheck=!0},resetSocket:function(){this._startTime=0,this._endTime=0,this._DisconnectNum=0,this._SocketCheck=!1},SocketCheck:function(){if(0!=this._SocketCheck&&!(++this._endTime-this._startTime<200)){this._startTime=this._endTime;var e=this,t=function(){if(!cc.vv.gameNetMgr._token)return e._IsDisconnect=!1,void(e._reconnect.active=!0);setTimeout(function(){cc.vv.net.send("reconnect_1",cc.vv.gameNetMgr._token),cc.sys.isNative&&cc.vv.gameNetMgr.initHandlers(),cc.vv.MJRoom.onGameSignal(),e._IsDisconnect=!1,e._reconnect.active=!1},1e3)},n=function(){e.AgainDisconnectReConnect()};cc.vv.http.sendRequest(cc.vv.http.account_port,"/get_version",null,function(i){"0"==i.errcode?(e.resetSocket(),cc.vv.net.connect(t,n)):(++e._DisconnectNum,e._DisconnectNum>=10&&(e.resetSocket(),e.showDisconnectReConnect()))})}},showDisconnectReConnect:function(){this._IsDisconnect=!1,this._reconnect.active=!0},AgainDisconnectReConnect:function(){this.resetSocket(),this.showDisconnectReConnect()},onBtnOK:function(){cc.director.loadScene("update")},update:function(e){if(this._IsDisconnect){this._GameDisconnect.active=!0;var t=this._GameDisconnect.getChildByName("sprite2");t.rotation=t.rotation-300*e}else!this._IsDisconnect&&this._GameDisconnect.active&&(this._GameDisconnect.active=!1);this.SocketCheck()}}),cc._RF.pop()},{}],ReplayCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"21e6a+ajGNDTJwDHbV3A72m","ReplayCtrl"),cc.Class({extends:cc.Component,properties:{_nextPlayTime:1,_replay:null,_isPlaying:!0},onLoad:function(){if(console.log("开始加载 ReplayCtrl.js"),null!=cc.vv){this._replay=cc.find("Canvas/replay"),this._replay.active=cc.vv.replayMgr.isReplay();e=cc.find("Canvas/replay/btn_back");cc.vv.utils.addClickEvent(e,this.node,"ReplayCtrl","onBtnBackClicked");e=cc.find("Canvas/replay/btn_pause");cc.vv.utils.addClickEvent(e,this.node,"ReplayCtrl","onBtnPauseClicked");var e=cc.find("Canvas/replay/btn_play");cc.vv.utils.addClickEvent(e,this.node,"ReplayCtrl","onBtnPlayClicked"),console.log("加载完成 ReplayCtrl.js")}},onBtnPauseClicked:function(){this._isPlaying=!1},onBtnPlayClicked:function(){this._isPlaying=!0},onBtnBackClicked:function(){cc.vv.replayMgr.clear(),cc.vv.gameNetMgr.reset(),cc.vv.gameNetMgr.roomId=null,cc.vv.pi=-1,cc.vv.lai=-1,cc.director.loadScene("hall")},update:function(e){cc.vv&&this._isPlaying&&1==cc.vv.replayMgr.isReplay()&&this._nextPlayTime>0&&(this._nextPlayTime-=e,this._nextPlayTime<0&&(this._nextPlayTime=cc.vv.replayMgr.takeAction()))}}),cc._RF.pop()},{}],ReplayMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1a6a1p86NFL6KZEZCnbu7tt","ReplayMgr");cc.Class({extends:cc.Component,properties:{_lastAction:null,_actionRecords:null,_currentIndex:0},onLoad:function(){},clear:function(){this._lastAction=null,this._actionRecords=null,this._currentIndex=0},init:function(e){this._actionRecords=e.operations,null==this._actionRecords&&(this._actionRecords={}),this._currentIndex=0,this._lastAction=null},isReplay:function(){return null!=this._actionRecords},getNextAction:function(){if(this._currentIndex>=this._actionRecords.length)return null;var e=this._actionRecords[this._currentIndex++],t=this._actionRecords[this._currentIndex++],n=this._actionRecords[this._currentIndex++];if(this._currentIndex>=483&&this._currentIndex<=488&&console.log("看看当前动作"),2==t)return{si:e,type:t,pai:n,pai1:i=this._actionRecords[this._currentIndex++],pai2:a=this._actionRecords[this._currentIndex++]};if(10==t)return{si:e,type:t,pai:n,pai1:i=this._actionRecords[this._currentIndex++],pai2:a=this._actionRecords[this._currentIndex++]};if(11==t){var i=this._actionRecords[this._currentIndex++],a=this._actionRecords[this._currentIndex++];return{si:e,type:t,pai:n,pai1:i,pai2:a,pai3:this._actionRecords[this._currentIndex++]}}if(23==t){for(var c=[],o=0;o<cc.vv.gameNetMgr.seats.length;o++){var s={si:this._actionRecords[this._currentIndex++],action:this._actionRecords[this._currentIndex++],pai:this._actionRecords[this._currentIndex++]};c.push(s)}return{si:e,type:t,pai:n,fzPai:c}}return{si:e,type:t,pai:n}},takeAction:function(){var e=this.getNextAction();if(null!=this._lastAction&&1==this._lastAction.type&&null!=e&&3!=e.type&&4!=e.type&&5!=e.type&&2!=e.type&&23!=e.type&&cc.vv.gameNetMgr.doGuo(this._lastAction.si,this._lastAction.pai),this._lastAction=e,null==e)return-1;if(1==e.type)return cc.vv.gameNetMgr.doChupai(e.si,e.pai),1;if(0==e.type)return cc.vv.gameNetMgr.doMopai(e.si,e.pai),cc.vv.gameNetMgr.seats[e.si].seatindex!=cc.vv.gameNetMgr.turn&&cc.vv.gameNetMgr.doTurnChange(e.si),1;if(3==e.type)return cc.vv.gameNetMgr.doPeng(e.si,e.pai),cc.vv.gameNetMgr.doTurnChange(e.si),1;if(4==e.type)return cc.vv.gameNetMgr.dispatchEvent("hangang_notify",e.si),cc.vv.gameNetMgr.doGang(e.si,e.pai),cc.vv.gameNetMgr.doTurnChange(e.si),1;if(5==e.type){n=cc.vv.gameNetMgr.seats[e.si];return cc.vv.gameNetMgr.doHu({userid:n.userid,hupai:e.pai,hutype:0}),1.5}if(6==e.type){n=cc.vv.gameNetMgr.seats[e.si];return cc.vv.gameNetMgr.doHu({userid:n.userid,hupai:e.pai,hutype:1}),1.5}if(2==e.type)return cc.vv.gameNetMgr.doChi(e.si,e.pai,e.pai1,e.pai2),cc.vv.gameNetMgr.doTurnChange(e.si),1;if(16==e.type)return cc.vv.gameNetMgr.doting(e.si),cc.vv.gameNetMgr.doChupai(e.si,e.pai),1;if(23==e.type){cc.vv.gameNetMgr.dofenzhang();for(var t=0;t<e.fzPai.length;t++)cc.vv.gameNetMgr.doMopai(e.fzPai[t].si,e.fzPai[t].pai);return 1}if(19==e.type)return cc.vv.DCHMJGame.isShowbaopaiLayer(e.pai),2;if(21==e.type){n=cc.vv.gameNetMgr.seats[e.si];return cc.vv.gameNetMgr.doHu({userid:n.userid,hupai:e.pai,hutype:2}),2}if(22==e.type){var n=cc.vv.gameNetMgr.seats[e.si];return cc.vv.gameNetMgr.doHu({userid:n.userid,hupai:e.pai,hutype:3}),2}return 10==e.type?(cc.vv.gameNetMgr.doHuiFangXiaDan(e.si,e.pai,e.pai1,e.pai2,-1),cc.vv.gameNetMgr.doTurnChange(e.si),1):11==e.type?(cc.vv.gameNetMgr.doHuiFangXiaDan(e.si,e.pai,e.pai1,e.pai2,e.pai3),cc.vv.gameNetMgr.doTurnChange(e.si),1):12==e.type?(cc.vv.gameNetMgr.doHuiFangBuDan(e.si,e.pai),cc.vv.gameNetMgr.doTurnChange(e.si),1):13==e.type?(cc.vv.gameNetMgr.doHuiFangYaoJiDan(e.si,e.pai),cc.vv.gameNetMgr.doTurnChange(e.si),1):void 0}}),cc._RF.pop()},{}],Seat:[function(e,t,n){"use strict";cc._RF.push(t,"820870ltMZNDYlvzr+qCDEJ","Seat"),cc.Class({extends:cc.Component,properties:{_sprIcon:null,_zhuang:null,_ready:null,_wait:null,_offline:null,_lblName:null,_lblScore:null,_scoreBg:null,_nddayingjia:null,_voicemsg:null,_crown:null,_kou:null,_dong:null,_chatBubble:null,_emoji:null,_lastChatTime:-1,_userName:"",_score:0,_dayingjia:!1,_isOffline:!1,_isReady:!1,_isZhuang:!1,_isCrown:!1,_userId:null,_Isting:!1,_Isdong:!1,_heading:null},onLoad:function(){console.log("开始加载 Seat.js"),null!=cc.vv&&(this._sprIcon=this.node.getChildByName("icon").getComponent("ImageLoader"),this._lblName=this.node.getChildByName("name").getComponent(cc.Label),this.node.getChildByName("score")&&(this._lblScore=this.node.getChildByName("score").getComponent(cc.Label)),this._voicemsg=this.node.getChildByName("voicemsg"),this._voicemsg&&(this._voicemsg.active=!1),this._sprIcon&&this._sprIcon.getComponent(cc.Button)&&cc.vv.utils.addClickEvent(this._sprIcon,this.node,"Seat","onIconClicked"),this._offline=this.node.getChildByName("offline"),this._ready=this.node.getChildByName("ready"),this._wait=this.node.getChildByName("wait"),this._zhuang=this.node.getChildByName("zhuang"),this._scoreBg=this.node.getChildByName("Z_money_frame"),this._nddayingjia=this.node.getChildByName("dayingjia"),this._crown=this.node.getChildByName("crown"),this._chatBubble=this.node.getChildByName("ChatBubble"),null!=this._chatBubble&&(this._chatBubble.active=!1),this._emoji=this.node.getChildByName("emoji"),null!=this._emoji&&(this._emoji.active=!1),this._sprIcon&&this._userId&&this._sprIcon.setUserID(this._userId,this._heading),this._kou=this.node.getChildByName("kou"),null!=this._kou&&(this._kou.active=!1),this.refresh(),console.log("加载完成 Seat.js"))},onIconClicked:function(){this._sprIcon.node.getComponent(cc.Sprite);if(null!=this._userId&&this._userId>0){cc.vv.gameNetMgr.getSeatByID(this._userId);if(cc.vv.baseInfoMap){var e=cc.vv.baseInfoMap[this._userId];e&&e.sex}}},refresh:function(){null!=this._lblName&&(this._lblName.string=this._userName),null!=this._lblScore&&(this._lblScore.string=this._score),null!=this._nddayingjia&&(this._nddayingjia.active=1==this._dayingjia),this._offline&&(this._offline.active=this._isOffline&&""!=this._userName),this._ready&&(this._ready.active=this._isReady),this._zhuang&&(this._zhuang.active=this._isZhuang),this._crown&&(this._crown.active=this._isCrown),this._kou&&(this._kou.active=this._Isting),this._dong&&(this._dong.active=this._Isdong),this.node.active=null!=this._userName&&""!=this._userName},setInfo:function(e,t,n){this._userName=e,this._score=t,t>=1e8?this._score=parseInt(t/1e8)+"亿":t>=1e6&&(this._score=parseInt(t/1e4)+"万"),null==this._score&&(this._score=0),this._dayingjia=n,null!=this._scoreBg&&(this._scoreBg.active=null!=this._score),null!=this._lblScore&&(this._lblScore.node.active=null!=this._score),this.refresh()},getScore:function(){return this._lblScore.string},setDong:function(e){this._Isdong=e,this.refresh()},setkouTag:function(e){this._Isting=e,null==this._Isting&&(this._Isting=!1),this.refresh()},setScore:function(e){this._score=e,e>=1e8?this._score=parseInt(e/1e8)+"亿":e>=1e6&&(this._score=parseInt(e/1e4)+"万"),null==this._score&&(this._score=0),this.refresh()},setZhuang:function(e){this._isZhuang=e,this._zhuang&&(this._zhuang.active=e)},setCrown:function(e){this._isCrown=e,this._crown&&(this._crown.active=e)},setReady:function(e){this._isReady=e,this.refresh()},setID:function(e,t){var n=this.node.getChildByName("id");n&&(n.getComponent(cc.Label).string="ID:"+e),this._userId=e,this._heading=t,this._sprIcon&&this._sprIcon.setUserID(e,t)},setOffline:function(e){this._isOffline=e,this._offline&&(this._offline.active=this._isOffline&&""!=this._userName)},chat:function(e){null!=this._chatBubble&&null!=this._emoji&&(this._emoji.active=!1,this._chatBubble.active=!0,this._chatBubble.getChildByName("New Label").getComponent(cc.Label).string=e,this._lastChatTime=3)},emoji:function(e){null!=this._emoji&&null!=this._emoji&&(console.log(e),this._chatBubble.active=!1,this._emoji.active=!0,this._emoji.getComponent(cc.Animation).play(e),this._lastChatTime=3)},voiceMsg:function(e){this._voicemsg&&(this._voicemsg.active=e)},update:function(e){this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this._chatBubble.active=!1,this._emoji.active=!1,this._emoji.getComponent(cc.Animation).stop()))},hide_Seat_Node:function(){this.node.active=!1}}),cc._RF.pop()},{}],SequenceActionFunction:[function(e,t,n){"use strict";cc._RF.push(t,"20954EWSp1Ek6K8EsVDoGFO","SequenceActionFunction"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},maimaPlayComplete:function(){cc.vv.KwxGame._zimomaimamj.node.active=!0,cc.vv.KwxGame._zimomaimascore.node.active=!0,this.node.active=!1},baoPlayComplete:function(){cc.vv.DCHMJGame._baopaiSprite.active=!0,this.node.active=!1},dingzhuang:function(){cc.vv.DCHMJGame.hidedingzhuang(),cc.vv.gameNetMgr.doChangeRollingSaiZi(cc.vv.gameNetMgr._dingzhuang)},SubsequentChangeRollingSaiZi:function(){cc.vv.DCHMJGame.hidedingzhuang(),cc.vv.gameNetMgr.doSubsequentChangeRollingSaiZi(cc.vv.gameNetMgr._Subsequentdingzhuang)},saiziPlayComplete1:function(){var e=cc.vv.DCHMJGame.gameRoot.getChildByName("SaiZiAction1").getChildByName("Sprite").getComponent(cc.Sprite),t=cc.vv.DCHMJGame._CurSaiZiParameter.dice1;if(null!=t&&t>=1&&t<=6){var n="textures/sai/"+t;cc.vv.MJRoom.ReplaceSingletonSpriteFrame(n,e),e.node.active=!0}else cc.vv.DCHMJGame.playSaizi(!1)},saiziPlayComplete2:function(){var e=cc.vv.DCHMJGame.gameRoot.getChildByName("SaiZiAction2").getChildByName("Sprite").getComponent(cc.Sprite),t=cc.vv.DCHMJGame._CurSaiZiParameter.dice2;if(null!=t&&t>=1&&t<=6){var n="textures/sai/"+t;cc.vv.MJRoom.ReplaceSingletonSpriteFrame(n,e),e.node.active=!0,setTimeout(function(){cc.vv.DCHMJGame.playSaizi(!1)},3e3)}else cc.vv.DCHMJGame.playSaizi(!1)}}),cc._RF.pop()},{}],Settings:[function(e,t,n){"use strict";cc._RF.push(t,"4c04fyd89JAZY7qGjvubi+f","Settings"),cc.Class({extends:cc.Component,properties:{_btnYXOpen:null,_btnYXClose:null,_btnYYOpen:null,_btnYYClose:null,_btn_djcp_open:null,_btn_djcp_close:null,_btn_voice_close:null,_btn_voice_open:null,_btn_horn_open:null,_btn_horn_close:null},onLoad:function(){console.log("开始加载 Settings.js"),null!=cc.vv&&(this._btnYXOpen=this.node.getChildByName("yinxiao_and_yinyue").getChildByName("btn_yx_open"),this._btnYXClose=this.node.getChildByName("yinxiao_and_yinyue").getChildByName("btn_yx_close"),this._btnYYOpen=this.node.getChildByName("yinxiao_and_yinyue").getChildByName("btn_yy_open"),this._btnYYClose=this.node.getChildByName("yinxiao_and_yinyue").getChildByName("btn_yy_close"),this._btn_djcp_open=this.node.getChildByName("game_sz").getChildByName("btn_djcp_open"),this._btn_djcp_close=this.node.getChildByName("game_sz").getChildByName("btn_djcp_close"),this._btn_voice_close=this.node.getChildByName("game_sz").getChildByName("btn_voice_close"),this._btn_voice_open=this.node.getChildByName("game_sz").getChildByName("btn_voice_open"),this._btn_horn_open=this.node.getChildByName("game_sz").getChildByName("btn_horn_open"),this._btn_horn_close=this.node.getChildByName("game_sz").getChildByName("btn_horn_close"),this.initButtonHandler(this.node.getChildByName("btn_close")),this.initButtonHandler(this._btnYXOpen),this.initButtonHandler(this._btnYXClose),this.initButtonHandler(this._btnYYOpen),this.initButtonHandler(this._btnYYClose),this.initButtonHandler(this._btn_djcp_open),this.initButtonHandler(this._btn_djcp_close),this.initButtonHandler(this._btn_voice_close),this.initButtonHandler(this._btn_voice_open),this.initButtonHandler(this._btn_horn_open),this.initButtonHandler(this._btn_horn_close),this.refreshVolume(),console.log("加载完成 Settings.js"))},onSlided:function(e){"yinxiao"==e.node.parent.name?cc.vv.audioMgr.setSFXVolume(e.progress):"yinyue"==e.node.parent.name&&cc.vv.audioMgr.setBGMVolume(e.progress),this.refreshVolume()},initButtonHandler:function(e){cc.vv.utils.addClickEvent(e,this.node,"Settings","onBtnClicked")},refreshVolume:function(){this._btnYXClose.active=cc.vv.audioMgr.sfxVolume>0,this._btnYXOpen.active=!this._btnYXClose.active,this._btnYYClose.active=cc.vv.audioMgr.bgmVolume>0,this._btnYYOpen.active=!this._btnYYClose.active,this._btn_djcp_open.active=!cc.vv.userMgr._djcp_preservation,this._btn_djcp_close.active=cc.vv.userMgr._djcp_preservation,this._btn_voice_open.active=!cc.vv.userMgr._voice_preservation,this._btn_voice_close.active=cc.vv.userMgr._voice_preservation,this._btn_horn_open.active=!cc.vv.userMgr._horm_preservation,this._btn_horn_close.active=cc.vv.userMgr._horm_preservation},onBtnClicked:function(e){"btn_close"==e.target.name?this.node.active=!1:"btn_yx_open"==e.target.name?(cc.vv.audioMgr.setSFXVolume(.5),this.refreshVolume()):"btn_yx_close"==e.target.name?(cc.vv.audioMgr.setSFXVolume(0),this.refreshVolume()):"btn_yy_open"==e.target.name?(cc.vv.audioMgr.setBGMVolume(.5),this.refreshVolume()):"btn_yy_close"==e.target.name?(cc.vv.audioMgr.setBGMVolume(0),this.refreshVolume()):"btn_djcp_open"==e.target.name?(cc.vv.userMgr._djcp_preservation=!0,this.refreshVolume()):"btn_djcp_close"==e.target.name?(cc.vv.userMgr._djcp_preservation=!1,this.refreshVolume()):"btn_voice_close"==e.target.name?(cc.vv.userMgr._voice_preservation=!1,this.refreshVolume()):"btn_voice_open"==e.target.name?(cc.vv.userMgr._voice_preservation=!0,this.refreshVolume()):"btn_horn_open"==e.target.name?(cc.vv.userMgr._horm_preservation=!0,this.refreshVolume()):"btn_horn_close"==e.target.name&&(cc.vv.userMgr._horm_preservation=!1,this.refreshVolume())}}),cc._RF.pop()},{}],TimePointer:[function(e,t,n){"use strict";cc._RF.push(t,"5b586erPK1H5bFfrMKWs+Y6","TimePointer"),cc.Class({extends:cc.Component,properties:{_arrow:null,_pointer:null,_timeLabel:null,_time:-1,_alertTime:-1,_timeNode:null,_daojishi_TeXiao:null},onLoad:function(){console.log("开始加载 TimePointer.js"),cc.vv.TimePointer=this;var e=this.node.getChildByName("game");this._arrow=e.getChildByName("arrow"),this._pointer=this._arrow.getChildByName("pointer"),this._daojishi_TeXiao=e.getChildByName("daojishi_TeXiao"),this.initPointer(),this._timeLabel=this._arrow.getChildByName("lblTime").getComponent(cc.Label),this._timeNode=this._arrow.getChildByName("lblTime");var t=this;t._pointer.active=!1,t._timeNode.getChildByName("num2").active=!1,t._timeNode.getChildByName("num1").active=!1,this.node.on("game_begin",function(e){}),this.node.on("game_over",function(e){t._pointer.active=!1,t._daojishi_TeXiao.active=!1,t._timeNode.getChildByName("num2").active=!1,t._timeNode.getChildByName("num1").active=!1,t._time=-1,t._alertTime=-1}),this.node.on("game_chupai",function(e){t._pointer.active=!0,t._daojishi_TeXiao.active=!0,t._timeNode.getChildByName("num2").active=!0,t._timeNode.getChildByName("num1").active=!0,t.initPointer(),t._time=10,t._alertTime=3}),this.node.on("game_sync",function(e){t._pointer.active=!0,t._daojishi_TeXiao.active=!0,t._timeNode.getChildByName("num2").active=!0,t._timeNode.getChildByName("num1").active=!0,t.initPointer(),t._time=10,t._alertTime=3}),console.log("加载完成 TimePointer.js")},initPointer:function(){if(null!=cc.vv){var e=cc.vv.gameNetMgr.turn,t=cc.vv.gameNetMgr.getLocalIndex(e);if(-1!=cc.vv.gameNetMgr.button){var n=cc.vv.gameNetMgr.getLocalIndex(cc.vv.gameNetMgr.button),i=cc.vv.mahjongmgr.getSide(n);"right"==i&&(4==(t+=3)&&(t=0),5==t&&(t=1),6==t&&(t=2)),"up"==i&&(4==(t+=2)&&(t=0),5==t&&(t=1)),"left"==i&&4==(t+=1)&&(t=0)}for(var a=0;a<this._pointer.children.length;++a)this._pointer.children[a].active=a==t,this._daojishi_TeXiao.children[a].active=!1;if(-1!=cc.vv.gameNetMgr.turn){t=cc.vv.gameNetMgr.getLocalIndex(e);this._daojishi_TeXiao.children[t].active=!0,this._daojishi_TeXiao.children[t].getComponent(cc.Animation).play("daojishi")}}},update:function(e){if(this._time>0){this._time-=e,this._alertTime>0&&this._time<this._alertTime&&(cc.vv.audioMgr.playSFX("timeup_alarm.mp3"),this._alertTime=-1);this._time<0&&(this._time=0);var t=Math.ceil(this._time);t<10&&"0",this.getSpriteFrameScore(this._timeNode,t)}},getSpriteFrameScore:function(e,t){if(null!=t){var n="textures/digital/",i=Math.floor(Math.abs(t%10)),a=Math.floor(Math.abs(t%100/10)),c=(Math.floor(Math.abs(t%1e3/100)),Math.floor(Math.abs(t%1e4/1e3)),2),o=e.getChildByName("num"+c).getComponent(cc.Sprite);cc.vv.mahjongmgr.ReplaceSpriteFrame(n+"room_"+a,o),c--;o=e.getChildByName("num"+c).getComponent(cc.Sprite);cc.vv.mahjongmgr.ReplaceSpriteFrame(n+"room_"+i,o)}}}),cc._RF.pop()},{}],UserInfoShow:[function(e,t,n){"use strict";cc._RF.push(t,"fe4f16CAmpBlZphnpsH1ETv","UserInfoShow"),cc.Class({extends:cc.Component,properties:{_userinfo:null},onLoad:function(){console.log("开始加载 UserInfoShow.js"),null!=cc.vv&&(this._userinfo=cc.find("Canvas/userinfo"),this._userinfo.active=!1,cc.vv.userinfoShow=this,console.log("加载完成 UserInfoShow.js"))},show:function(e,t,n,i,a,c,o,s,r){null!=t&&t>0&&(""!=cc.vv.userMgr._headimg&&null!=cc.vv.userMgr._headimg&&(this._userinfo.getChildByName("reward_Label").active=!1),this._userinfo.active=!0,this._userinfo.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=n.spriteFrame,this._userinfo.getChildByName("name").getComponent(cc.Label).string=e,this._userinfo.getChildByName("id").getComponent(cc.Label).string="ID:"+t,this._userinfo.getChildByName("sex_Label").getComponent(cc.Label).string=0==i?"男":"女",null!=a&&(this._userinfo.getChildByName("gold_num").getComponent(cc.Label).string=a),null!=c&&(this._userinfo.getChildByName("diamonds_num").getComponent(cc.Label).string=c),null!=o&&(this._userinfo.getChildByName("perspective_num").getComponent(cc.Label).string=o),null!=s&&(this._userinfo.getChildByName("horn_num").getComponent(cc.Label).string=s),null!=r&&(this._userinfo.getChildByName("autograph_info").getComponent(cc.Label).string=r))},onClicked:function(){this._userinfo.active=!1}}),cc._RF.pop()},{}],UserMgr:[function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"74d78JBqHdDKY6hckY2YuL+","UserMgr");var a;cc.Class({extends:cc.Component,properties:(a={account:null,userId:null,userName:null,lv:0,exp:0,coins:0,gems:0,sign:0,ip:"",sex:0,code:null,own_y_m:null,roomData:null,oldRoomId:null,javaaddRoomId:0,deviceBrand:"",systemModel:"",systemVersion:"",IMEI:"",IMSI:"",_djcp_preservation:!1,_voice_preservation:!0,_horm_preservation:!1,toushika:0,laba:0},i(a,"sign",""),i(a,"vip",-1),i(a,"_phone",""),i(a,"_headimg",null),i(a,"_XLCH_Record",!1),i(a,"_laba_SpeakingRecord",[]),i(a,"_horn_TextRecord",[]),i(a,"_XLCH_ZDF_PX",null),a),login:function(){var e=null,t=null,n=null;t=cc.sys.localStorage.getItem("Login_phone"),n=cc.sys.localStorage.getItem("Login_password");var i=cc.args.account,a={account:e=null!=i?i:cc.sys.localStorage.getItem("Login_account"),phone:t,password:n,os:cc.sys.os,deviceBrand:this.deviceBrand,systemModel:this.systemModel,systemVersion:this.systemVersion,IMEI:this.IMEI,IMSI:this.IMSI,appid:cc.vv.anysdkMgr.appid};cc.vv.net.send("login",a)},onLogin:function(e){if(10013==e.errcode)cc.vv.login.promptInformation("密码错误"),cc.sys.localStorage.clear(),cc.game.restart();else if(0==e.errcode)if(e.userid){console.log(e),this.userId=e.userid,this.userName=e.name,this.lv=e.lv,this.exp=e.exp,this.coins=e.coins,this._phone=e.phone,this.gems=e.gems,this.roomData=e.room,this.sex=e.sex,this.ip=e.ip,this.toushika=e.toushika,this.laba=e.laba,e.sign?this.sign=e.sign:this.sign="",this._headimg=e.headimg;var t={maxFan:e.maxFan,maxPaixing:e.maxPaixing,shenglv:e.shenglv,paixingtu:e.paixingtu};e.paixingtu&&(t.paixingtu=JSON.parse(e.paixingtu)),this._XLCH_ZDF_PX=t,cc.director.loadScene("hall")}else cc.director.loadScene("createrole");else cc.director.loadScene("update")},create:function(e){var t={account:cc.args.account,name:e};cc.sys.isNative&&cc.sys.os!=cc.sys.OS_WINDOWS?t.name=this.systemModel:t.name=e,cc.vv.net.send("create_user",t),cc.vv.wc.show("正在创建用户")},onCreate:function(e){0!==e.errcode?console.log(e.errmsg):(cc.sys.localStorage.setItem("Login_account",e.account),this.login())},enterRoom:function(e,t){var n={account:cc.vv.userMgr.account,roomid:e};cc.vv.wc.show("正在进入房间"),cc.vv.http.sendRequest(cc.vv.http.hall_port,"/enter_private_room",n,function(e){null!=t&&t(e),0!==e.errcode?cc.vv.wc.hide():cc.vv.gameNetMgr.connectGameServer(e)})},getHistoryList:function(e){var t={account:cc.vv.userMgr.account};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_history_list",t,function(t){t&&(0!==t.errcode?console.log(t.errmsg):(console.log(t.history),null!=e&&e(t.history)))})},getGamesOfRoom:function(e,t){var n={account:cc.vv.userMgr.account,roomid:e};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_games_of_room",n,function(e){0!==e.errcode?console.log(e.errmsg):(console.log(e.games),t(e.games))})},getDetailOfGame:function(e,t){var n={account:cc.vv.userMgr.account,gameid:e};cc.vv.http.sendRequest(cc.vv.http.hall_port,"/get_detail_of_game",n,function(e){0!==e.errcode?console.log(e.errmsg):(console.log(e.record),t(e.record))})}}),cc._RF.pop()},{}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"b717fzww0hNzIqvNbb1t9wx","Utils"),cc.Class({extends:cc.Component,properties:{},addClickEvent:function(e,t,n,i){console.log(n+":"+i);var a=new cc.Component.EventHandler;a.target=t,a.component=n,a.handler=i,e.getComponent(cc.Button).clickEvents.push(a)},addSlideEvent:function(e,t,n,i){var a=new cc.Component.EventHandler;a.target=t,a.component=n,a.handler=i,e.getComponent(cc.Slider).slideEvents.push(a)},objKeySortedClone:function(e){for(var t=Object.keys(e).sort(),n={},i=0;i<t.length;i++)n[t[i]]=e[t[i]];return n},number2ipv4:function(e){return"number"!=typeof e?null:((4278190080&e)>>>24)+"."+((16711680&e)>>>16)+"."+((65280&e)>>>8)+"."+((255&e)>>>0)},customDecryptIP:function(e,t){if("number"!=typeof t||"number"!=typeof e)return null;var n=(e^t)>>>0;return this.number2ipv4(n)}}),cc._RF.pop()},{}],VoiceMgr:[function(e,t,n){"use strict";function i(e){var t="",n=e.length,i=n>>16&255,a=n>>8&255,c=255&n;t+=r[n>>24&255],t+=r[i],t+=r[a],t+=r[c];for(var o=0;o<e.length;++o)t+=r[e[o]];return t}function a(e,t){var n=e.charCodeAt(t);return n=n>=s?e.charAt(t)+e.charAt(t+1):e.charAt(t)}function c(e){for(var t=0,n=0,i=0;i<4;++i)t+=(s=a(e,t)).length,n|=l[s]<<8*(3-i);for(var c=new Uint8Array(n),o=0;t<e.length;){var s=a(e,t);t+=s.length,c[o]=l[s],o++}return c}cc._RF.push(t,"1f066RbLAxKGJZtkDFO2kq/","VoiceMgr");for(var o=12,s=128-o,r={},l={},h=0;h<256;++h){var g=null,d=h+1;g=d>=s?function(e){e-=s;var t=Math.floor(e/o)+s,n=e%o+s;return String.fromCharCode(t)+String.fromCharCode(n)}(d):String.fromCharCode(d),r[h]=g,l[g]=h}cc.Class({extends:cc.Component,properties:{onPlayCallback:null,_voiceMediaPath:null},init:function(){cc.sys.isNative&&(this._voiceMediaPath=jsb.fileUtils.getWritablePath()+"/voicemsgs/",this.setStorageDir(this._voiceMediaPath),console.log("_voiceMediaPath= "+this._voiceMediaPath))},prepare:function(e){cc.sys.isNative&&(cc.vv.audioMgr.pauseAll(),this.clearCache(e),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoiceRecorder","prepare","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","prepareRecord:",e))},release:function(){cc.sys.isNative&&(cc.vv.audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoiceRecorder","release","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","finishRecord"))},cancel:function(){cc.sys.isNative&&(cc.vv.audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoiceRecorder","cancel","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","cancelRecord"))},writeVoice:function(e,t){if(cc.sys.isNative&&t&&t.length>0){var n=c(t),i=this._voiceMediaPath+e;this.clearCache(e),jsb.fileUtils.writeDataToFile(n,i)}},clearCache:function(e){if(cc.sys.isNative){var t=this._voiceMediaPath+e;jsb.fileUtils.isFileExist(t)&&jsb.fileUtils.removeFile(t),jsb.fileUtils.isFileExist(t+".wav")&&jsb.fileUtils.removeFile(t+".wav")}},play:function(e){cc.sys.isNative&&(cc.vv.audioMgr.pauseAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoicePlayer","play","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","play:",e))},stop:function(){cc.sys.isNative&&(cc.vv.audioMgr.resumeAll(),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoicePlayer","stop","()V"):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("VoiceSDK","stopPlay"))},getVoiceLevel:function(e){return Math.floor(Math.random()*e+1)},getVoiceData:function(e){if(cc.sys.isNative){var t=this._voiceMediaPath+e;console.log("getVoiceData:"+t);var n=jsb.fileUtils.getDataFromFile(t);if(n)return i(n)}return""},download:function(){},setStorageDir:function(e){cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/yueyou/voicesdk/VoiceRecorder","setStorageDir","(Ljava/lang/String;)V",e):cc.sys.os==cc.sys.OS_IOS&&(jsb.reflection.callStaticMethod("VoiceSDK","setStorageDir:",e),jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e)))}}),cc._RF.pop()},{}],Voice:[function(e,t,n){"use strict";cc._RF.push(t,"f6db9z0CxdEzpRVgU569dDu","Voice"),cc.Class({extends:cc.Component,properties:{_lastTouchTime:null,_voice:null,_volume:null,_voice_failed:null,_lastCheckTime:-1,_timeBar:null,MAX_TIME:15e3},onLoad:function(){console.log("开始加载 Voice.js"),this._voice=cc.find("Canvas/voice"),this._voice.active=!1,this._voice_failed=cc.find("Canvas/voice/voice_failed"),this._voice_failed.active=!1,this._timeBar=cc.find("Canvas/voice/time"),this._timeBar.scaleX=0,this._volume=cc.find("Canvas/voice/volume");for(var e=1;e<this._volume.children.length;++e)this._volume.children[e].active=!1;var t=cc.find("Canvas/voice/voice_failed/btn_ok");t&&cc.vv.utils.addClickEvent(t,this.node,"Voice","onBtnOKClicked");var n=this;(t=cc.find("Canvas/btn_voice"))&&(t.on(cc.Node.EventType.TOUCH_START,function(){console.log("cc.Node.EventType.TOUCH_START"),cc.vv.voiceMgr.prepare("record.amr"),n._lastTouchTime=Date.now();n.scheduleOnce(function(){n._voice.active=!0},.5),n._voice_failed.active=!1}),t.on(cc.Node.EventType.TOUCH_MOVE,function(){console.log("cc.Node.EventType.TOUCH_MOVE")}),t.on(cc.Node.EventType.TOUCH_END,function(){console.log("cc.Node.EventType.TOUCH_END"),Date.now()-n._lastTouchTime<1e3?(n._voice_failed.active=!0,cc.vv.voiceMgr.cancel()):n.onVoiceOK(),n._lastTouchTime=null}),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){console.log("cc.Node.EventType.TOUCH_CANCEL"),cc.vv.voiceMgr.cancel(),n._lastTouchTime=null,n._voice.active=!1})),console.log("加载完成 Voice.js")},onVoiceOK:function(){if(null!=this._lastTouchTime){cc.vv.voiceMgr.release();var e=Date.now()-this._lastTouchTime,t=cc.vv.voiceMgr.getVoiceData("record.amr");console.log("msginfo length send = "+t.length),cc.vv.net.send("voice_msg",{msg:t,time:e})}this._voice.active=!1},onBtnOKClicked:function(){this._voice.active=!1},update:function(e){if(1==this._voice.active&&0==this._voice_failed.active&&Date.now()-this._lastCheckTime>300){for(var t=0;t<this._volume.children.length;++t)this._volume.children[t].active=!1;var n=cc.vv.voiceMgr.getVoiceLevel(7);n>=1&&n<=7&&(this._volume.children[n-1].active=!0),this._lastCheckTime=Date.now()}if(this._lastTouchTime){var i=Date.now()-this._lastTouchTime;if(i>=this.MAX_TIME)this.onVoiceOK(),this._lastTouchTime=null;else{var a=i/this.MAX_TIME;this._timeBar.scaleX=1-a}}}}),cc._RF.pop()},{}],WaitingConnection:[function(e,t,n){"use strict";cc._RF.push(t,"10e32jDstpLhIGHWrQEq2vN","WaitingConnection"),cc.Class({extends:cc.Component,properties:{target:cc.Node,_isShow:!1,lblContent:cc.Label},onLoad:function(){if(console.log("开始加载 WaitingConnection.js"),null==cc.vv)return null;cc.vv.wc=this,this.node.active=this._isShow,console.log("加载完成 WaitingConnection.js")},update:function(e){this.target.rotation=this.target.rotation-300*e},show:function(e){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==e&&(e=""),this.lblContent.string=e)},hide:function(){this._isShow=!1,this.node&&(this.node.active=this._isShow)}}),cc._RF.pop()},{}],"socket-io":[function(e,t,n){(function(i){"use strict";cc._RF.push(t,"393290vPc1IIYfh8FrmxcNZ","socket-io");var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.sys.isNative||function(e){if("object"===(void 0===n?"undefined":a(n))&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this).io=e()}}(function(){return function t(n,i,a){function c(s,r){if(!i[s]){if(!n[s]){var l="function"==typeof e&&e;if(!r&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var g=i[s]={exports:{}};n[s][0].call(g.exports,function(e){var t=n[s][1][e];return c(t||e)},g,g.exports,t,n,i,a)}return i[s].exports}for(var o="function"==typeof e&&e,s=0;s<a.length;s++)c(a[s]);return c}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":a(e))&&(t=e,e=null),e?(e=g(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=g(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized;var c="object"==(void 0===n?"undefined":a(n))&&n;c.global===c&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function c(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),s=e("component-emitter"),r=e("debug")("engine.io-client:socket"),l=e("indexof"),h=e("engine.io-parser"),g=e("parseuri"),d=e("parsejson"),u=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=h.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){r('creating transport "%s"',e);var t=c(this.query);return t.EIO=h.protocol,t.transport=e,this.id&&(t.sid=this.id),new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){r("setting transport %s",e.name);var t=this;this.transport&&(r("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;g=g||t}g||(r('probe transport "%s" opened',e),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(t){if(!g)if("pong"==t.type&&"probe"==t.data){if(r('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",h),!h)return;i.priorWebsocketSuccess="websocket"==h.name,r('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){g||"closed"!=d.readyState&&(r("changing transport and sending upgrade packet"),l(),d.setTransport(h),h.send([{type:"upgrade"}]),d.emit("upgrade",h),h=null,d.upgrading=!1,d.flush())})}else{r('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=h.name,d.emit("upgradeError",n)}}))}function n(){g||(g=!0,l(),h.close(),h=null)}function a(t){var i=new Error("probe error: "+t);i.transport=h.name,n(),r('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",i)}function c(){a("transport closed")}function o(){a("socket closed")}function s(e){h&&e.name!=h.name&&(r('"%s" works - aborting "%s"',e.name,h.name),n())}function l(){h.removeListener("open",t),h.removeListener("error",a),h.removeListener("close",c),d.removeListener("close",o),d.removeListener("upgrading",s)}r('probing transport "%s"',e);var h=this.createTransport(e,{probe:1}),g=!1,d=this;i.priorWebsocketSuccess=!1,h.once("open",t),h.once("error",a),h.once("close",c),this.once("close",o),this.once("upgrading",s),h.open()},i.prototype.onOpen=function(){if(r("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){r("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(r('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else r('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){r("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(r("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},i.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emit("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),r("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){r("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){r('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var a=e("engine.io-parser"),c=e("component-emitter");t.exports=i,c(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=a.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(e,t,n){(function(t){var i=e("xmlhttprequest-ssl"),a=e("./polling-xhr"),c=e("./polling-jsonp"),o=e("./websocket");n.polling=function(e){var n=!1,o=!1,s=!1!==e.jsonp;if(t.location){var r="https:"==location.protocol,l=location.port;l||(l=r?443:80),n=e.hostname!=location.hostname||l!=e.port,o=e.secure!=r}if(e.xdomain=n,e.xscheme=o,"open"in new i(e)&&!e.forceJSONP)return new a(e);if(!s)throw new Error("JSONP disabled");return new c(e)},n.websocket=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,n){(function(n){function i(){}function a(e){c.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var c=e("./polling"),o=e("component-inherit");t.exports=a;var s,r=/\n/g,l=/\\n/g;o(a,c),a.prototype.supportsBinary=!1,a.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),c.prototype.doClose.call(this)},a.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},a.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(e){a.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+a.iframeId+'">';c=document.createElement(e)}catch(e){(c=document.createElement("iframe")).name=a.iframeId,c.src="javascript:0"}c.id=a.iframeId,a.form.appendChild(c),a.iframe=c}var a=this;if(!this.form){var c,o=document.createElement("form"),s=document.createElement("textarea"),h=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=h,o.method="POST",o.setAttribute("accept-charset","utf-8"),s.name="d",o.appendChild(s),document.body.appendChild(o),this.form=o,this.area=s}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(r,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==a.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling":8,"component-inherit":16}],7:[function(e,t,n){(function(n){function i(){}function a(e){if(r.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function o(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}var s=e("xmlhttprequest-ssl"),r=e("./polling"),l=e("component-emitter"),h=e("component-inherit"),g=e("debug")("engine.io-client:polling-xhr");t.exports=a,t.exports.Request=c,h(a,r),a.prototype.supportsBinary=!0,a.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new c(e)},a.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),a=this;i.on("success",t),i.on("error",function(e){a.onError("xhr post error",e)}),this.sendXhr=i},a.prototype.doPoll=function(){g("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(c.prototype),c.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),i=this;try{g("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var a in this.extraHeaders)this.extraHeaders.hasOwnProperty(a)&&t.setRequestHeader(a,this.extraHeaders[a])}}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},g("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}n.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},c.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}n.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),i=[],a=0,c=n.length;a<c;a++)i.push(n[a]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},c.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},n.document&&(c.requestsCount=0,c.requests={},n.attachEvent?n.attachEvent("onunload",o):n.addEventListener&&n.addEventListener("beforeunload",o,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,n){function i(e){var t=e&&e.forceBase64;h&&!t||(this.supportsBinary=!1),a.call(this,e)}var a=e("../transport"),c=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),r=e("yeast"),l=e("debug")("engine.io-client:polling");t.exports=i;var h=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;s(i,a),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,function(e,n,i){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){n=this;this.writable=!1;var t=function(){n.writable=!0,n.emit("drain")},n=this;o.encodePayload(e,this.supportsBinary,function(e){n.doWrite(e,t)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=r()),this.supportsBinary||e.sid||(e.b64=1),e=c.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(e,t,n){(function(n){function i(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,a.call(this,e)}var a=e("../transport"),c=e("engine.io-parser"),o=e("parseqs"),s=e("component-inherit"),r=e("yeast"),l=e("debug")("engine.io-client:websocket"),h=n.WebSocket||n.MozWebSocket,g=h;if(!g&&"undefined"==typeof window)try{g=e("ws")}catch(e){}t.exports=i,s(i,a),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=h?new g(e):new g(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){a.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){i.emit("flush"),setTimeout(function(){i.writable=!0,i.emit("drain")},0)}var i=this;this.writable=!1;for(var a=e.length,o=0,s=a;o<s;o++)!function(e){c.encodePacket(e,i.supportsBinary,function(c){if(!h){var o={};e.options&&(o.compress=e.options.compress),i.perMessageDeflate&&("string"==typeof c?n.Buffer.byteLength(c):c.length)<i.perMessageDeflate.threshold&&(o.compress=!1)}try{h?i.ws.send(c):i.ws.send(c,o)}catch(e){l("websocket closed before onclose event")}--a||t()})}(e[o])},i.prototype.onClose=function(){a.prototype.onClose.call(this)},i.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=r()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},i.prototype.check=function(){return!(!g||"__initialize"in g&&this.name===i.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(e,t,n){function i(){}t.exports=function(e,t,n){function a(e,i){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(c=!0,t(e),t=n):0!==a.count||c||t(null,i)}var c=!1;return n=n||i,a.count=e,0===e?t():a}},{}],12:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var a=new Uint8Array(e),c=new Uint8Array(n-t),o=t,s=0;o<n;o++,s++)c[s]=a[o];return c.buffer}},{}],13:[function(e,t,n){!function(e){n.encode=function(t){var n,i=new Uint8Array(t),a=i.length,c="";for(n=0;n<a;n+=3)c+=e[i[n]>>2],c+=e[(3&i[n])<<4|i[n+1]>>4],c+=e[(15&i[n+1])<<2|i[n+2]>>6],c+=e[63&i[n+2]];return a%3==2?c=c.substring(0,c.length-1)+"=":a%3==1&&(c=c.substring(0,c.length-2)+"=="),c},n.decode=function(t){var n,i,a,c,o,s=.75*t.length,r=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var h=new ArrayBuffer(s),g=new Uint8Array(h);for(n=0;n<r;n+=4)i=e.indexOf(t[n]),a=e.indexOf(t[n+1]),c=e.indexOf(t[n+2]),o=e.indexOf(t[n+3]),g[l++]=i<<2|a>>4,g[l++]=(15&a)<<4|c>>2,g[l++]=(3&c)<<6|63&o;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var a=new Uint8Array(n.byteLength);a.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=a.buffer}e[t]=i}}}function i(e,t){t=t||{};var i=new c;n(e);for(var a=0;a<e.length;a++)i.append(e[a]);return t.type?i.getBlob(t.type):i.getBlob()}function a(e,t){return n(e),new Blob(e,t||{})}var c=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=o&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),r=c&&c.prototype.append&&c.prototype.getBlob;t.exports=o?s?e.Blob:a:r?i:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],15:[function(e,t,n){function i(e){if(e)return a(e)}function a(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,a=0;a<n.length;a++)if((i=n[a])===t||i.fn===t){n.splice(a,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,a=(n=n.slice(0)).length;i<a;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],17:[function(e,t,n){function i(){var e;try{e=n.storage.debug}catch(e){}return e}(n=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":a(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color,a=0,c=0;return(e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(a++,"%c"===e&&(c=a))}),e.splice(c,0,i),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=i,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(i())},{"./debug":18}],18:[function(e,t,n){function i(){return n.colors[c++%n.colors.length]}(n=t.exports=function(e){function t(){}function c(){var e=c,t=+new Date,o=t-(a||t);e.diff=o,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var r=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;r++;var a=n.formatters[i];if("function"==typeof a){var c=s[r];t=a.call(e,c),s.splice(r,1),r--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s)),(c.log||n.log||console.log.bind(console)).apply(e,s)}t.enabled=!1,c.enabled=!0;var o=n.enabled(e)?c:t;return o.namespace=e,o}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,a=0;a<i;a++)t[a]&&("-"===(e=t[a].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,c=0},{ms:25}],19:[function(e,t,n){(function(t){function i(e,t){return t("b"+n.packets[e.type]+e.data.data)}function a(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var a=e.data,c=new Uint8Array(a),o=new Uint8Array(1+a.byteLength);o[0]=_[e.type];for(var s=0;s<c.length;s++)o[s+1]=c[s];return i(o.buffer)}function c(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var a=new FileReader;return a.onload=function(){e.data=a.result,n.encodePacket(e,t,!0,i)},a.readAsArrayBuffer(e.data)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(p)return c(e,t,i);var a=new Uint8Array(1);return a[0]=_[e.type],i(new C([a.buffer,e.data]))}function s(e,t,n){for(var i=new Array(e.length),a=d(e.length,n),c=0;c<e.length;c++)!function(e,n,a){t(n,function(t,n){i[e]=n,a(t,i)})}(c,e[c],a)}var r=e("./keys"),l=e("has-binary"),h=e("arraybuffer.slice"),g=e("base64-arraybuffer"),d=e("after"),u=e("utf8"),v=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),p=v||m;n.protocol=3;var _=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=r(_),y={type:"error",data:"parser error"},C=e("blob");n.encodePacket=function(e,n,c,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof c&&(s=c,c=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&r instanceof ArrayBuffer)return a(e,n,s);if(C&&r instanceof t.Blob)return o(e,n,s);if(r&&r.base64)return i(e,s);var l=_[e.type];return void 0!==e.data&&(l+=c?u.encode(String(e.data)):String(e.data)),s(""+l)},n.encodeBase64Packet=function(e,i){var a="b"+n.packets[e.type];if(C&&e.data instanceof t.Blob){var c=new FileReader;return c.onload=function(){var e=c.result.split(",")[1];i(a+e)},c.readAsDataURL(e.data)}var o;try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),r=new Array(s.length),l=0;l<s.length;l++)r[l]=s[l];o=String.fromCharCode.apply(null,r)}return a+=t.btoa(o),i(a)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=u.decode(e)}catch(e){return y}a=e.charAt(0);return Number(a)==a&&f[a]?e.length>1?{type:f[a],data:e.substring(1)}:{type:f[a]}:y}var a=new Uint8Array(e)[0],c=h(e,1);return C&&"blob"===t&&(c=new C([c])),{type:f[a],data:c}},n.decodeBase64Packet=function(e,n){var i=f[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var a=g.decode(e.substr(1));return"blob"===n&&C&&(a=new C([a])),{type:i,data:a}},n.encodePayload=function(e,t,i){function a(e){return e.length+":"+e}"function"==typeof t&&(i=t,t=null);var c=l(e);return t&&c?C&&!p?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,function(e,i){n.encodePacket(e,!!c&&t,!0,function(e){i(null,a(e))})},function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var a;if(""==e)return i(y,0,1);for(var c,o,s="",r=0,l=e.length;r<l;r++){var h=e.charAt(r);if(":"!=h)s+=h;else{if(""==s||s!=(c=Number(s)))return i(y,0,1);if(o=e.substr(r+1,c),s!=o.length)return i(y,0,1);if(o.length){if(a=n.decodePacket(o,t,!0),y.type==a.type&&y.data==a.data)return i(y,0,1);if(!1===i(a,r+c,l))return}r+=c,s=""}}return""!=s?i(y,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));s(e,function(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),a=new Uint8Array(i),c=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);n=i.buffer}a[c++]=t?0:1;for(var s=n.byteLength.toString(),o=0;o<s.length;o++)a[c++]=parseInt(s[o]);a[c++]=255;for(var i=new Uint8Array(n),o=0;o<i.length;o++)a[c++]=i[o]}),t(a.buffer)})},n.encodePayloadAsBlob=function(e,t){s(e,function(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);e=i.buffer,n[0]=0}for(var c=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(c.length+1),a=0;a<c.length;a++)o[a]=parseInt(c[a]);if(o[c.length]=255,C){var s=new C([n.buffer,o.buffer,e]);t(null,s)}})},function(e,n){return t(new C(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var a=e,c=[],o=!1;a.byteLength>0;){for(var s=new Uint8Array(a),r=0===s[0],l="",g=1;255!=s[g];g++){if(l.length>310){o=!0;break}l+=s[g]}if(o)return i(y,0,1);a=h(a,2+l.length),l=parseInt(l);var d=h(a,0,l);if(r)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var u=new Uint8Array(d);d="";for(g=0;g<u.length;g++)d+=String.fromCharCode(u[g])}c.push(d),a=h(a,l)}var v=c.length;c.forEach(function(e,a){i(n.decodePacket(e,t,!0),a,v)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],21:[function(e,t,n){(function(n){var i=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var c=0;c<e.length;c++)if(t(e[c]))return!0}else if(e&&"object"==(void 0===e?"undefined":a(e))){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{isarray:24}],22:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],23:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],24:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,n){function i(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*g;case"days":case"day":case"d":return n*h;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*r;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function a(e){return e>=h?Math.round(e/h)+"d":e>=l?Math.round(e/l)+"h":e>=r?Math.round(e/r)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function c(e){return o(e,h,"day")||o(e,l,"hour")||o(e,r,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,r=60*s,l=60*r,h=24*l,g=365.25*h;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t.long?c(e):a(e)}},{}],26:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g,o=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(o,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(a,"]").replace(c,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],27:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,a=n.length;i<a;i++){var c=n[i].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}},{}],28:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),c=e.indexOf("]");-1!=n&&-1!=c&&(e=e.substring(0,n)+e.substring(n,c).replace(/:/g,";")+e.substring(c,e.length));for(var o=i.exec(e||""),s={},r=14;r--;)s[a[r]]=o[r]||"";return-1!=n&&-1!=c&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],29:[function(e,t,n){(function(e){!function(i){function c(e){for(var t,n,i=[],a=0,c=e.length;a<c;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<c?56320==(64512&(n=e.charCodeAt(a++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),a--):i.push(t);return i}function o(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=f(t);return a}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function r(e,t){return f(e>>t&63|128)}function l(e){if(0==(4294967168&e))return f(e);var t="";return 0==(4294965248&e)?t=f(e>>6&31|192):0==(4294901760&e)?(s(e),t=f(e>>12&15|224),t+=r(e,6)):0==(4292870144&e)&&(t=f(e>>18&7|240),t+=r(e,12),t+=r(e,6)),t+=f(63&e|128)}function h(){if(_>=p)throw Error("Invalid byte index");var e=255&m[_];if(_++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function g(){var e,t,n,i,a;if(_>p)throw Error("Invalid byte index");if(_==p)return!1;if(e=255&m[_],_++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|(t=h()))>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=h(),n=h(),(a=(15&e)<<12|t<<6|n)>=2048)return s(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=h(),n=h(),i=h(),(a=(15&e)<<18|t<<12|n<<6|i)>=65536&&a<=1114111))return a;throw Error("Invalid UTF-8 detected")}var d="object"==(void 0===n?"undefined":a(n))&&n,u="object"==(void 0===t?"undefined":a(t))&&t&&t.exports==d&&t,v="object"==(void 0===e?"undefined":a(e))&&e;v.global!==v&&v.window!==v||(i=v);var m,p,_,f=String.fromCharCode,y={version:"2.0.0",encode:function(e){for(var t=c(e),n=t.length,i=-1,a="";++i<n;)a+=l(t[i]);return a},decode:function(e){m=c(e),p=m.length,_=0;for(var t,n=[];!1!==(t=g());)n.push(t);return o(n)}};if(d&&!d.nodeType)if(u)u.exports=y;else{var C={}.hasOwnProperty;for(var b in y)C.call(y,b)&&(d[b]=y[b])}else i.utf8=y}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],30:[function(e,t,n){function i(e){var t="";do{t=o[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function a(){var e=i(+new Date);return e!==c?(l=0,c=e):e+"."+i(l++)}for(var c,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,r={},l=0,h=0;h<s;h++)r[o[h]]=h;a.encode=i,a.decode=function(e){var t=0;for(h=0;h<e.length;h++)t=t*s+r[e.charAt(h)];return t},t.exports=a},{}],31:[function(e,t,n){function i(e,t){"object"==(void 0===e?"undefined":a(e))&&(t=e,e=void 0),t=t||{};var n,i=c(e),o=i.source,h=i.id,g=i.path,d=l[h]&&g in l[h].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(r("ignoring socket cache for %s",o),n=s(o,t)):(l[h]||(r("new io instance for %s",o),l[h]=s(o,t)),n=l[h]),n.socket(i.path)}var c=e("./url"),o=e("socket.io-parser"),s=e("./manager"),r=e("debug")("socket.io-client");t.exports=n=i;var l=n.managers={};n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);e&&"object"==(void 0===e?"undefined":a(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new u({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var c=e("engine.io-client"),o=e("./socket"),s=e("component-emitter"),r=e("socket.io-parser"),l=e("./on"),h=e("component-bind"),g=e("debug")("socket.io-client:manager"),d=e("indexof"),u=e("backo2"),v=Object.prototype.hasOwnProperty;t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)v.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)v.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e){if(g("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;g("opening %s",this.uri),this.engine=c(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=l(t,"open",function(){n.onopen(),e&&e()}),a=l(t,"error",function(t){if(g("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var o=this._timeout;g("connect attempt will timeout after %d",o);var s=setTimeout(function(){g("connect attempt timed out after %d",o),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",o)},o);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(i),this.subs.push(a),this},i.prototype.onopen=function(){g("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",h(this,"ondata"))),this.subs.push(l(e,"ping",h(this,"onping"))),this.subs.push(l(e,"pong",h(this,"onpong"))),this.subs.push(l(e,"error",h(this,"onerror"))),this.subs.push(l(e,"close",h(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",h(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){g("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){function t(){~d(i.connecting,n)||i.connecting.push(n)}var n=this.nsps[e];if(!n){n=new o(this,e),this.nsps[e]=n;var i=this;n.on("connecting",t),n.on("connect",function(){n.id=i.engine.id}),this.autoConnect&&t()}return n},i.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},i.prototype.packet=function(e){g("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){g("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){g("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){g("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)g("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();g("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(g("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(g("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(g("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],34:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var a=e("socket.io-parser"),c=e("component-emitter"),o=e("to-array"),s=e("./on"),r=e("component-bind"),l=e("debug")("socket.io-client:socket"),h=e("has-binary");t.exports=i;var g={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=c.prototype.emit;c(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",r(this,"onopen")),s(e,"packet",r(this,"onpacket")),s(e,"close",r(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},i.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(g.hasOwnProperty(e))return d.apply(this,arguments),this;var t=o(arguments),n=a.EVENT;h(t)&&(n=a.BINARY_EVENT);var i={type:n,data:t};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:a.CONNECT})},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case a.CONNECT:this.onconnect();break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);l("sending ack %j",i);var c=h(i)?a.BINARY_ACK:a.ACK;t.packet({type:c,id:e,data:i})}}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,n){(function(n){var i=e("parseuri"),a=e("debug")("socket.io-client:url");t.exports=function(e,t){var c=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(a("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),a("parse %s",e),c=i(e)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/";var o=-1!==c.host.indexOf(":")?"["+c.host+"]":c.host;return c.id=c.protocol+"://"+o+":"+c.port,c.href=c.protocol+"://"+o+(t&&t.port==c.port?"":":"+c.port),c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{debug:39,parseuri:45}],36:[function(e,t,n){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],38:[function(e,t,n){function i(e){if(e)return a(e)}function a(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,a=0;a<n.length;a++)if((i=n[a])===t||i.fn===t){n.splice(a,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,a=(n=n.slice(0)).length;i<a;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./debug":40,dup:17}],40:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,ms:44}],41:[function(e,t,n){(function(n){var i=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(i(e)){for(var c=0;c<e.length;c++)if(t(e[c]))return!0}else if(e&&"object"==(void 0===e?"undefined":a(e))){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{isarray:43}],42:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],43:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],44:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],45:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],46:[function(e,t,n){(function(t){var i=e("isarray"),c=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(c(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var s=new Array(e.length),r=0;r<e.length;r++)s[r]=t(e[r]);return s}if("object"==(void 0===e?"undefined":a(e))&&!(e instanceof Date)){s={};for(var l in e)s[l]=t(e[l]);return s}return e}var n=[],o=e.data,s=e;return s.data=t(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder)return t[e.num];if(i(e)){for(var c=0;c<e.length;c++)e[c]=n(e[c]);return e}if(e&&"object"==(void 0===e?"undefined":a(e))){for(var o in e)e[o]=n(e[o]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,l,h){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var g=new FileReader;g.onload=function(){h?h[l]=this.result:r=this.result,--s||n(r)},g.readAsArrayBuffer(e)}else if(i(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if(e&&"object"==(void 0===e?"undefined":a(e))&&!c(e))for(var u in e)o(e[u],u,e)}var s=0,r=e;o(r),s||n(r)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,n){function i(){}function a(e){var t="",i=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=g.stringify(e.data)),h("encoded %j as %s",e,t),t}function c(e,t){u.removeBlobs(e,function(e){var n=u.deconstructPacket(e),i=a(n.packet),c=n.buffers;c.unshift(i),t(c)})}function o(){this.reconstructor=null}function s(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var a="";"-"!=e.charAt(++i)&&(a+=e.charAt(i),i!=e.length););if(a!=Number(a)||"-"!=e.charAt(i))throw new Error("Illegal attachments");t.attachments=Number(a)}if("/"==e.charAt(i+1))for(t.nsp="";++i&&","!=(o=e.charAt(i))&&(t.nsp+=o,i!=e.length););else t.nsp="/";var c=e.charAt(i+1);if(""!==c&&Number(c)==c){for(t.id="";++i;){var o=e.charAt(i);if(null==o||Number(o)!=o){--i;break}if(t.id+=e.charAt(i),i==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=g.parse(e.substr(i))}catch(e){return l()}return h("decoded %s as %j",e,t),t}function r(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:n.ERROR,data:"parser error"}}var h=e("debug")("socket.io-parser"),g=e("json3"),d=(e("isarray"),e("component-emitter")),u=e("./binary"),v=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=o,i.prototype.encode=function(e,t){h("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?c(e,t):t([a(e)])},d(o.prototype),o.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new r(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!v(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},o.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},r.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=u.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},r.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],49:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],50:[function(e,t,n){(function(e){(function(){function i(e,t){function n(e){if(n[e]!==_)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var a,c='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=t.stringify,l="function"==typeof s&&C;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===s(0)&&"0"===s(new o)&&'""'==s(new r)&&s(y)===_&&s(_)===_&&s()===_&&"1"===s(a)&&"[1]"==s([a])&&"[null]"==s([_])&&"null"==s(null)&&"[null,null,null]"==s([_,y,null])&&s({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==c&&"1"===s(null,a)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new h(-1))}catch(e){l=!1}}i=l}if("json-parse"==e){var g=t.parse;if("function"==typeof g)try{if(0===g("0")&&!g(!1)){var d=5==(a=g(c)).a.length&&1===a.a[0];if(d){try{d=!g('"\t"')}catch(e){}if(d)try{d=1!==g("01")}catch(e){}if(d)try{d=1!==g("1.")}catch(e){}}}}catch(e){d=!1}i=d}}return n[e]=!!i}e||(e=s.Object()),t||(t=s.Object());var o=e.Number||s.Number,r=e.String||s.String,l=e.Object||s.Object,h=e.Date||s.Date,g=e.SyntaxError||s.SyntaxError,d=e.TypeError||s.TypeError,u=e.Math||s.Math,v=e.JSON||s.JSON;"object"==(void 0===v?"undefined":a(v))&&v&&(t.stringify=v.stringify,t.parse=v.parse);var m,p,_,f=l.prototype,y=f.toString,C=new h(-0xc782b5b800cec);try{C=-109252==C.getUTCFullYear()&&0===C.getUTCMonth()&&1===C.getUTCDate()&&10==C.getUTCHours()&&37==C.getUTCMinutes()&&6==C.getUTCSeconds()&&708==C.getUTCMilliseconds()}catch(e){}if(!n("json")){var b=n("bug-string-char-index");if(!C)var N=u.floor,B=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return B[t]+365*(e-1970)+N((e-1969+(t=+(t>1)))/4)-N((e-1901+t)/100)+N((e-1601+t)/400)};if((m=f.hasOwnProperty)||(m=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?m=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,m=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,m.call(this,e)}),p=function(e,t){var n,i,o,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(o in i)m.call(i,o)&&s++;return n=i=null,s?p=2==s?function(e,t){var n,i={},a="[object Function]"==y.call(e);for(n in e)a&&"prototype"==n||m.call(i,n)||!(i[n]=1)||!m.call(e,n)||t(n)}:function(e,t){var n,i,a="[object Function]"==y.call(e);for(n in e)a&&"prototype"==n||!m.call(e,n)||(i="constructor"===n)||t(n);(i||m.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(e,t){var n,o,s="[object Function]"==y.call(e),r=!s&&"function"!=typeof e.constructor&&c[a(e.hasOwnProperty)]&&e.hasOwnProperty||m;for(n in e)s&&"prototype"==n||!r.call(e,n)||t(n);for(o=i.length;n=i[--o];r.call(e,n)&&t(n));}),p(e,t)},!n("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S=function(e,t){return("000000"+(t||0)).slice(-e)},k=function(e){for(var t='"',n=0,i=e.length,a=!b||i>10,c=a&&(b?e.split(""):e);n<i;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=M[o];break;default:if(o<32){t+="\\u00"+S(2,o.toString(16));break}t+=a?c[n]:e.charAt(n)}}return t+'"'},I=function e(t,n,i,c,o,s,r){var l,h,g,u,v,f,C,b,B,M,I,w,R,j,L,A;try{l=n[t]}catch(e){}if("object"==(void 0===l?"undefined":a(l))&&l)if("[object Date]"!=(h=y.call(l))||m.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=h&&"[object String]"!=h&&"[object Array]"!=h||m.call(l,"toJSON"))&&(l=l.toJSON(t));else if(l>-1/0&&l<1/0){if(x){for(v=N(l/864e5),g=N(v/365.2425)+1970-1;x(g+1,0)<=v;g++);for(u=N((v-x(g,0))/30.42);x(g,u+1)<=v;u++);v=1+v-x(g,u),C=N((f=(l%864e5+864e5)%864e5)/36e5)%24,b=N(f/6e4)%60,B=N(f/1e3)%60,M=f%1e3}else g=l.getUTCFullYear(),u=l.getUTCMonth(),v=l.getUTCDate(),C=l.getUTCHours(),b=l.getUTCMinutes(),B=l.getUTCSeconds(),M=l.getUTCMilliseconds();l=(g<=0||g>=1e4?(g<0?"-":"+")+S(6,g<0?-g:g):S(4,g))+"-"+S(2,u+1)+"-"+S(2,v)+"T"+S(2,C)+":"+S(2,b)+":"+S(2,B)+"."+S(3,M)+"Z"}else l=null;if(i&&(l=i.call(n,t,l)),null===l)return"null";if("[object Boolean]"==(h=y.call(l)))return""+l;if("[object Number]"==h)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==h)return k(""+l);if("object"==(void 0===l?"undefined":a(l))){for(j=r.length;j--;)if(r[j]===l)throw d();if(r.push(l),I=[],L=s,s+=o,"[object Array]"==h){for(R=0,j=l.length;R<j;R++)w=e(R,l,i,c,o,s,r),I.push(w===_?"null":w);A=I.length?o?"[\n"+s+I.join(",\n"+s)+"\n"+L+"]":"["+I.join(",")+"]":"[]"}else p(c||l,function(t){var n=e(t,l,i,c,o,s,r);n!==_&&I.push(k(t)+":"+(o?" ":"")+n)}),A=I.length?o?"{\n"+s+I.join(",\n"+s)+"\n"+L+"}":"{"+I.join(",")+"}":"{}";return r.pop(),A}};t.stringify=function(e,t,n){var i,o,s,r;if(c[void 0===t?"undefined":a(t)]&&t)if("[object Function]"==(r=y.call(t)))o=t;else if("[object Array]"==r){s={};for(var l,h=0,g=t.length;h<g;l=t[h++],("[object String]"==(r=y.call(l))||"[object Number]"==r)&&(s[l]=1));}if(n)if("[object Number]"==(r=y.call(n))){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else"[object String]"==r&&(i=n.length<=10?n:n.slice(0,10));return I("",(l={},l[""]=e,l),o,s,i,"",[])}}if(!n("json-parse")){var w,R,j=r.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw w=R=null,g()},D=function(){for(var e,t,n,i,a,c=R,o=c.length;w<o;)switch(a=c.charCodeAt(w)){case 9:case 10:case 13:case 32:w++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?c.charAt(w):c[w],w++,e;case 34:for(e="@",w++;w<o;)if((a=c.charCodeAt(w))<32)A();else if(92==a)switch(a=c.charCodeAt(++w)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=L[a],w++;break;case 117:for(t=++w,n=w+4;w<n;w++)(a=c.charCodeAt(w))>=48&&a<=57||a>=97&&a<=102||a>=65&&a<=70||A();e+=j("0x"+c.slice(t,w));break;default:A()}else{if(34==a)break;for(a=c.charCodeAt(w),t=w;a>=32&&92!=a&&34!=a;)a=c.charCodeAt(++w);e+=c.slice(t,w)}if(34==c.charCodeAt(w))return w++,e;A();default:if(t=w,45==a&&(i=!0,a=c.charCodeAt(++w)),a>=48&&a<=57){for(48==a&&(a=c.charCodeAt(w+1))>=48&&a<=57&&A(),i=!1;w<o&&(a=c.charCodeAt(w))>=48&&a<=57;w++);if(46==c.charCodeAt(w)){for(n=++w;n<o&&(a=c.charCodeAt(n))>=48&&a<=57;n++);n==w&&A(),w=n}if(101==(a=c.charCodeAt(w))||69==a){for(43!=(a=c.charCodeAt(++w))&&45!=a||w++,n=w;n<o&&(a=c.charCodeAt(n))>=48&&a<=57;n++);n==w&&A(),w=n}return+c.slice(t,w)}if(i&&A(),"true"==c.slice(w,w+4))return w+=4,!0;if("false"==c.slice(w,w+5))return w+=5,!1;if("null"==c.slice(w,w+4))return w+=4,null;A()}return"$"},T=function e(t){var n,i;if("$"==t&&A(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=D());i||(i=!0))i&&(","==t?"]"==(t=D())&&A():A()),","==t&&A(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=D());i||(i=!0))i&&(","==t?"}"==(t=D())&&A():A()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==D()||A(),n[t.slice(1)]=e(D());return n}A()}return t},P=function(e,t,n){var i=E(e,t,n);i===_?delete e[t]:e[t]=i},E=function(e,t,n){var i,c=e[t];if("object"==(void 0===c?"undefined":a(c))&&c)if("[object Array]"==y.call(c))for(i=c.length;i--;)P(c,i,n);else p(c,function(e){P(c,e,n)});return n.call(e,t,c)};t.parse=function(e,t){var n,i;return w=0,R=""+e,n=T(D()),"$"!=D()&&A(),w=R=null,t&&"[object Function]"==y.call(t)?E((i={},i[""]=n,i),"",t):n}}}return t.runInContext=i,t}var c={function:!0,object:!0},o=c[void 0===n?"undefined":a(n)]&&n&&!n.nodeType&&n,s=c["undefined"==typeof window?"undefined":a(window)]&&window||this,r=o&&c[void 0===t?"undefined":a(t)]&&t&&!t.nodeType&&"object"==(void 0===e?"undefined":a(e))&&e;if(!r||r.global!==r&&r.window!==r&&r.self!==r||(s=r),o)i(s,o);else{var l=s.JSON,h=s.JSON3,g=!1,d=i(s,s.JSON3={noConflict:function(){return g||(g=!0,s.JSON=l,s.JSON3=h,l=h=null),d}});s.JSON={parse:d.parse,stringify:d.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],51:[function(e,t,n){t.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},{}]},{},[31])(31)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["socket-io","AnysdkMgr","AudioMgr","AudioMng","GameNetMgr","Global","GpsMgr","HTTP","HallNet","HotUpdate","MD5","MahjongMgr","Net","ReplayMgr","UserMgr","Utils","VoiceMgr","Alert","ButtonScaler","Chat","CheckBox","CheckBoxGroupMgr","CheckBoxMutex","CreateRole","CreateRoom","DingPiao","DingQue","Folds","FrameEvent","GameOver","GameResult","Hall","History","HuanSanZhang","ImageLoader","JoinGameInput","LoadingLogic","Login","MJGame","MJRoom","NoticeTip","OnBack","PengGangs","PopupMgr","RadioButton","RadioGroupMgr","ReConnect","ReplayCtrl","Seat","SequenceActionFunction","Settings","TimePointer","UserInfoShow","Voice","WaitingConnection"]);